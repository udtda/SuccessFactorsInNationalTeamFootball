define("params",["module"],function(module){return{config:module.config()}});!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("src/moment/moment.min.js",b):a.moment=b()}(this,function(){"use strict";function a(){return Uc.apply(null,arguments)}function b(a){Uc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Da(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a){return void 0===a}function n(a,b){var c,d,e;if(m(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),m(b._i)||(a._i=b._i),m(b._f)||(a._f=b._f),m(b._l)||(a._l=b._l),m(b._strict)||(a._strict=b._strict),m(b._tzm)||(a._tzm=b._tzm),m(b._isUTC)||(a._isUTC=b._isUTC),m(b._offset)||(a._offset=b._offset),m(b._pf)||(a._pf=j(b)),m(b._locale)||(a._locale=b._locale),Wc.length>0)for(c in Wc)d=Wc[c],e=b[d],m(e)||(a[d]=e);return a}function o(b){n(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Xc===!1&&(Xc=!0,a.updateOffset(this),Xc=!1)}function p(a){return a instanceof o||null!=a&&null!=a._isAMomentObject}function q(a){return 0>a?Math.ceil(a):Math.floor(a)}function r(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=q(b)),c}function s(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&r(a[d])!==r(b[d]))&&g++;return g+f}function t(){}function u(a){return a?a.toLowerCase().replace("_","-"):a}function v(a){for(var b,c,d,e,f=0;f<a.length;){for(e=u(a[f]).split("-"),b=e.length,c=u(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=w(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&s(e,c,!0)>=b-1)break;b--}f++}return null}function w(a){var b=null;if(!Yc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Vc._abbr,require("./locale/"+a),x(b)}catch(c){}return Yc[a]}function x(a,b){var c;return a&&(c=m(b)?z(a):y(a,b),c&&(Vc=c)),Vc._abbr}function y(a,b){return null!==b?(b.abbr=a,Yc[a]=Yc[a]||new t,Yc[a].set(b),x(a),Yc[a]):(delete Yc[a],null)}function z(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Vc;if(!c(a)){if(b=w(a))return b;a=[a]}return v(a)}function A(a,b){var c=a.toLowerCase();Zc[c]=Zc[c+"s"]=Zc[b]=a}function B(a){return"string"==typeof a?Zc[a]||Zc[a.toLowerCase()]:void 0}function C(a){var b,c,d={};for(c in a)f(a,c)&&(b=B(c),b&&(d[b]=a[c]));return d}function D(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function E(b,c){return function(d){return null!=d?(G(this,b,d),a.updateOffset(this,c),this):F(this,b)}}function F(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function G(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function H(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=B(a),D(this[a]))return this[a](b);return this}function I(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function J(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(bd[a]=e),b&&(bd[b[0]]=function(){return I(e.apply(this,arguments),b[1],b[2])}),c&&(bd[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function L(a){var b,c,d=a.match($c);for(b=0,c=d.length;c>b;b++)bd[d[b]]?d[b]=bd[d[b]]:d[b]=K(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),ad[b]=ad[b]||L(b),ad[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(_c.lastIndex=0;d>=0&&_c.test(a);)a=a.replace(_c,c),_c.lastIndex=0,d-=1;return a}function O(a,b,c){td[a]=D(b)?b:function(a,d){return a&&c?c:b}}function P(a,b){return f(td,a)?td[a](b._strict,b._locale):new RegExp(Q(a))}function Q(a){return R(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function R(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function S(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=r(a)}),c=0;c<a.length;c++)ud[a[c]]=d}function T(a,b){S(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function U(a,b,c){null!=b&&f(ud,a)&&ud[a](b,c._a,c,a)}function V(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function W(a,b){return c(this._months)?this._months[a.month()]:this._months[Ed.test(b)?"format":"standalone"][a.month()]}function X(a,b){return c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Ed.test(b)?"format":"standalone"][a.month()]}function Y(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function Z(a,b){var c;return a.isValid()?"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),V(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a):a}function $(b){return null!=b?(Z(this,b),a.updateOffset(this,!0),this):F(this,"Month")}function _(){return V(this.year(),this.month())}function aa(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex}function ba(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex}function ca(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=h([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=R(d[b]),e[b]=R(e[b]),f[b]=R(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")$","i")}function da(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[wd]<0||c[wd]>11?wd:c[xd]<1||c[xd]>V(c[vd],c[wd])?xd:c[yd]<0||c[yd]>24||24===c[yd]&&(0!==c[zd]||0!==c[Ad]||0!==c[Bd])?yd:c[zd]<0||c[zd]>59?zd:c[Ad]<0||c[Ad]>59?Ad:c[Bd]<0||c[Bd]>999?Bd:-1,j(a)._overflowDayOfYear&&(vd>b||b>xd)&&(b=xd),j(a)._overflowWeeks&&-1===b&&(b=Cd),j(a)._overflowWeekday&&-1===b&&(b=Dd),j(a).overflow=b),a}function ea(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function fa(a,b){var c=!0;return g(function(){return c&&(ea(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ga(a,b){Jd[a]||(ea(b),Jd[a]=!0)}function ha(a){var b,c,d,e,f,g,h=a._i,i=Kd.exec(h)||Ld.exec(h);if(i){for(j(a).iso=!0,b=0,c=Nd.length;c>b;b++)if(Nd[b][1].exec(i[1])){e=Nd[b][0],d=Nd[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Od.length;c>b;b++)if(Od[b][1].exec(i[3])){f=(i[2]||" ")+Od[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Md.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),wa(a)}else a._isValid=!1}function ia(b){var c=Pd.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ha(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ja(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ka(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function la(a){return ma(a)?366:365}function ma(a){return a%4===0&&a%100!==0||a%400===0}function na(){return ma(this.year())}function oa(a,b,c){var d=7+b-c,e=(7+ka(a,0,d).getUTCDay()-b)%7;return-e+d-1}function pa(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=oa(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=la(f)+j):j>la(a)?(f=a+1,g=j-la(a)):(f=a,g=j),{year:f,dayOfYear:g}}function qa(a,b,c){var d,e,f=oa(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+ra(e,b,c)):g>ra(a.year(),b,c)?(d=g-ra(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function ra(a,b,c){var d=oa(a,b,c),e=oa(a+1,b,c);return(la(a)-d+e)/7}function sa(a,b,c){return null!=a?a:null!=b?b:c}function ta(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function ua(a){var b,c,d,e,f=[];if(!a._d){for(d=ta(a),a._w&&null==a._a[xd]&&null==a._a[wd]&&va(a),a._dayOfYear&&(e=sa(a._a[vd],d[vd]),a._dayOfYear>la(e)&&(j(a)._overflowDayOfYear=!0),c=ka(e,0,a._dayOfYear),a._a[wd]=c.getUTCMonth(),a._a[xd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[yd]&&0===a._a[zd]&&0===a._a[Ad]&&0===a._a[Bd]&&(a._nextDay=!0,a._a[yd]=0),a._d=(a._useUTC?ka:ja).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[yd]=24)}}function va(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=sa(b.GG,a._a[vd],qa(Ea(),1,4).year),d=sa(b.W,1),e=sa(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=sa(b.gg,a._a[vd],qa(Ea(),f,g).year),d=sa(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>ra(c,f,g)?j(a)._overflowWeeks=!0:null!=i?j(a)._overflowWeekday=!0:(h=pa(c,d,e,f,g),a._a[vd]=h.year,a._dayOfYear=h.dayOfYear)}function wa(b){if(b._f===a.ISO_8601)return void ha(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=N(b._f,b._locale).match($c)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(P(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),bd[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),U(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[yd]<=12&&b._a[yd]>0&&(j(b).bigHour=void 0),b._a[yd]=xa(b._locale,b._a[yd],b._meridiem),ua(b),da(b)}function xa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function ya(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],wa(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function za(a){if(!a._d){var b=C(a._i);a._a=e([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),ua(a)}}function Aa(a){var b=new o(da(Ba(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Ba(a){var b=a._i,e=a._f;return a._locale=a._locale||z(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),p(b)?new o(da(b)):(c(e)?ya(a):e?wa(a):d(b)?a._d=b:Ca(a),k(a)||(a._d=null),a))}function Ca(b){var f=b._i;void 0===f?b._d=new Date(a.now()):d(f)?b._d=new Date(+f):"string"==typeof f?ia(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ua(b)):"object"==typeof f?za(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Da(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,Aa(f)}function Ea(a,b,c,d){return Da(a,b,c,d,!1)}function Fa(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Ea();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Ga(){var a=[].slice.call(arguments,0);return Fa("isBefore",a)}function Ha(){var a=[].slice.call(arguments,0);return Fa("isAfter",a)}function Ia(a){var b=C(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=z(),this._bubble()}function Ja(a){return a instanceof Ia}function Ka(a,b){J(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+I(~~(a/60),2)+b+I(~~a%60,2)})}function La(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(Ud)||["-",0,0],f=+(60*e[1])+r(e[2]);return"+"===e[0]?f:-f}function Ma(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(p(b)||d(b)?+b:+Ea(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Ea(b).local()}function Na(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Oa(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?("string"==typeof b?b=La(qd,b):Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Na(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?cb(this,Za(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Na(this):null!=b?this:NaN}function Pa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Qa(a){return this.utcOffset(0,a)}function Ra(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Na(this),"m")),this}function Sa(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(La(pd,this._i)),this}function Ta(a){return this.isValid()?(a=a?Ea(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function Ua(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Va(){if(!m(this._isDSTShifted))return this._isDSTShifted;var a={};if(n(a,this),a=Ba(a),a._a){var b=a._isUTC?h(a._a):Ea(a._a);this._isDSTShifted=this.isValid()&&s(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Wa(){return this.isValid()?!this._isUTC:!1}function Xa(){return this.isValid()?this._isUTC:!1}function Ya(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Za(a,b){var c,d,e,g=a,h=null;return Ja(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=Vd.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:r(h[xd])*c,h:r(h[yd])*c,m:r(h[zd])*c,s:r(h[Ad])*c,ms:r(h[Bd])*c}):(h=Wd.exec(a))?(c="-"===h[1]?-1:1,g={y:$a(h[2],c),M:$a(h[3],c),d:$a(h[4],c),h:$a(h[5],c),m:$a(h[6],c),s:$a(h[7],c),w:$a(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=ab(Ea(g.from),Ea(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ia(g),Ja(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function $a(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function _a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function ab(a,b){var c;return a.isValid()&&b.isValid()?(b=Ma(b,a),a.isBefore(b)?c=_a(a,b):(c=_a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function bb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ga(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Za(c,d),cb(this,e,a),this}}function cb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;b.isValid()&&(e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&G(b,"Date",F(b,"Date")+g*d),h&&Z(b,F(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function db(a,b){var c=a||Ea(),d=Ma(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse",g=b&&(D(b[f])?b[f]():b[f]);return this.format(g||this.localeData().calendar(f,this,Ea(c)))}function eb(){return new o(this)}function fb(a,b){var c=p(a)?a:Ea(a);return this.isValid()&&c.isValid()?(b=B(m(b)?"millisecond":b),"millisecond"===b?+this>+c:+c<+this.clone().startOf(b)):!1}function gb(a,b){var c=p(a)?a:Ea(a);return this.isValid()&&c.isValid()?(b=B(m(b)?"millisecond":b),"millisecond"===b?+c>+this:+this.clone().endOf(b)<+c):!1}function hb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function ib(a,b){var c,d=p(a)?a:Ea(a);return this.isValid()&&d.isValid()?(b=B(b||"millisecond"),"millisecond"===b?+this===+d:(c=+d,+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))):!1}function jb(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function kb(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function lb(a,b,c){var d,e,f,g;return this.isValid()?(d=Ma(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=B(b),"year"===b||"month"===b||"quarter"===b?(g=mb(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:q(g)):NaN):NaN}function mb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function nb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ob(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?D(Date.prototype.toISOString)?this.toDate().toISOString():M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function pb(b){var c=M(this,b||a.defaultFormat);return this.localeData().postformat(c)}function qb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function rb(a){return this.from(Ea(),a)}function sb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function tb(a){return this.to(Ea(),a)}function ub(a){var b;return void 0===a?this._locale._abbr:(b=z(a),null!=b&&(this._locale=b),this)}function vb(){return this._locale}function wb(a){switch(a=B(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function xb(a){return a=B(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function yb(){return+this._d-6e4*(this._offset||0)}function zb(){return Math.floor(+this/1e3)}function Ab(){return this._offset?new Date(+this):this._d}function Bb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function Cb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Db(){return this.isValid()?this.toISOString():"null"}function Eb(){return k(this)}function Fb(){return g({},j(this))}function Gb(){return j(this).overflow}function Hb(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ib(a,b){J(0,[a,a.length],0,b)}function Jb(a){return Nb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Kb(a){return Nb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Lb(){return ra(this.year(),1,4)}function Mb(){var a=this.localeData()._week;return ra(this.year(),a.dow,a.doy)}function Nb(a,b,c,d,e){var f;return null==a?qa(this,d,e).year:(f=ra(a,d,e),b>f&&(b=f),Ob.call(this,a,b,c,d,e))}function Ob(a,b,c,d,e){var f=pa(a,b,c,d,e),g=ka(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Pb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Qb(a){return qa(a,this._week.dow,this._week.doy).week}function Rb(){return this._week.dow}function Sb(){return this._week.doy}function Tb(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Ub(a){var b=qa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Vb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Wb(a,b){return c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]}function Xb(a){return this._weekdaysShort[a.day()]}function Yb(a){return this._weekdaysMin[a.day()]}function Zb(a,b,c){var d,e,f;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){if(e=Ea([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function $b(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Vb(a,this.localeData()),this.add(a-b,"d")):b}function _b(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function ac(a){return this.isValid()?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN}function bc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function cc(){return this.hours()%12||12}function dc(a,b){J(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function ec(a,b){return b._meridiemParse}function fc(a){return"p"===(a+"").toLowerCase().charAt(0)}function gc(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function hc(a,b){b[Bd]=r(1e3*("0."+a))}function ic(){return this._isUTC?"UTC":""}function jc(){return this._isUTC?"Coordinated Universal Time":""}function kc(a){return Ea(1e3*a)}function lc(){return Ea.apply(null,arguments).parseZone()}function mc(a,b,c){var d=this._calendar[a];return D(d)?d.call(b,c):d}function nc(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function oc(){return this._invalidDate}function pc(a){return this._ordinal.replace("%d",a)}function qc(a){return a}function rc(a,b,c,d){var e=this._relativeTime[c];return D(e)?e(a,b,c,d):e.replace(/%d/i,a)}function sc(a,b){var c=this._relativeTime[a>0?"future":"past"];return D(c)?c(b):c.replace(/%s/i,b)}function tc(a){var b,c;for(c in a)b=a[c],D(b)?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function uc(a,b,c,d){var e=z(),f=h().set(d,b);return e[c](f,a)}function vc(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return uc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=uc(a,f,c,e);return g}function wc(a,b){return vc(a,b,"months",12,"month")}function xc(a,b){return vc(a,b,"monthsShort",12,"month")}function yc(a,b){return vc(a,b,"weekdays",7,"day")}function zc(a,b){return vc(a,b,"weekdaysShort",7,"day")}function Ac(a,b){return vc(a,b,"weekdaysMin",7,"day")}function Bc(){var a=this._data;return this._milliseconds=se(this._milliseconds),this._days=se(this._days),this._months=se(this._months),a.milliseconds=se(a.milliseconds),a.seconds=se(a.seconds),a.minutes=se(a.minutes),a.hours=se(a.hours),a.months=se(a.months),a.years=se(a.years),this}function Cc(a,b,c,d){var e=Za(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Dc(a,b){return Cc(this,a,b,1)}function Ec(a,b){return Cc(this,a,b,-1)}function Fc(a){return 0>a?Math.floor(a):Math.ceil(a)}function Gc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*Fc(Ic(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=q(f/1e3),i.seconds=a%60,b=q(a/60),i.minutes=b%60,c=q(b/60),i.hours=c%24,g+=q(c/24),e=q(Hc(g)),h+=e,g-=Fc(Ic(e)),d=q(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function Hc(a){return 4800*a/146097}function Ic(a){return 146097*a/4800}function Jc(a){var b,c,d=this._milliseconds;if(a=B(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+Hc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(Ic(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function Kc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*r(this._months/12)}function Lc(a){return function(){return this.as(a)}}function Mc(a){return a=B(a),this[a+"s"]()}function Nc(a){return function(){return this._data[a]}}function Oc(){return q(this.days()/7)}function Pc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Qc(a,b,c){var d=Za(a).abs(),e=Ie(d.as("s")),f=Ie(d.as("m")),g=Ie(d.as("h")),h=Ie(d.as("d")),i=Ie(d.as("M")),j=Ie(d.as("y")),k=e<Je.s&&["s",e]||1>=f&&["m"]||f<Je.m&&["mm",f]||1>=g&&["h"]||g<Je.h&&["hh",g]||1>=h&&["d"]||h<Je.d&&["dd",h]||1>=i&&["M"]||i<Je.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Pc.apply(null,k)}function Rc(a,b){return void 0===Je[a]?!1:void 0===b?Je[a]:(Je[a]=b,!0)}function Sc(a){var b=this.localeData(),c=Qc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Tc(){var a,b,c,d=Ke(this._milliseconds)/1e3,e=Ke(this._days),f=Ke(this._months);a=q(d/60),b=q(a/60),d%=60,a%=60,c=q(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Uc,Vc,Wc=a.momentProperties=[],Xc=!1,Yc={},Zc={},$c=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,_c=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ad={},bd={},cd=/\d/,dd=/\d\d/,ed=/\d{3}/,fd=/\d{4}/,gd=/[+-]?\d{6}/,hd=/\d\d?/,id=/\d\d\d\d?/,jd=/\d\d\d\d\d\d?/,kd=/\d{1,3}/,ld=/\d{1,4}/,md=/[+-]?\d{1,6}/,nd=/\d+/,od=/[+-]?\d+/,pd=/Z|[+-]\d\d:?\d\d/gi,qd=/Z|[+-]\d\d(?::?\d\d)?/gi,rd=/[+-]?\d+(\.\d{1,3})?/,sd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,td={},ud={},vd=0,wd=1,xd=2,yd=3,zd=4,Ad=5,Bd=6,Cd=7,Dd=8;J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),J("MMMM",0,0,function(a){return this.localeData().months(this,a)}),A("month","M"),O("M",hd),O("MM",hd,dd),O("MMM",function(a,b){return b.monthsShortRegex(a)}),O("MMMM",function(a,b){return b.monthsRegex(a)}),S(["M","MM"],function(a,b){b[wd]=r(a)-1}),S(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[wd]=e:j(c).invalidMonth=a});var Ed=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Fd="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Gd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Hd=sd,Id=sd,Jd={};a.suppressDeprecationWarnings=!1;var Kd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ld=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Md=/Z|[+-]\d\d(?::?\d\d)?/,Nd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Od=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Pd=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=fa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),J("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),A("year","y"),O("Y",od),O("YY",hd,dd),O("YYYY",ld,fd),O("YYYYY",md,gd),O("YYYYYY",md,gd),S(["YYYYY","YYYYYY"],vd),S("YYYY",function(b,c){c[vd]=2===b.length?a.parseTwoDigitYear(b):r(b)}),S("YY",function(b,c){c[vd]=a.parseTwoDigitYear(b)}),S("Y",function(a,b){b[vd]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return r(a)+(r(a)>68?1900:2e3)};var Qd=E("FullYear",!1);a.ISO_8601=function(){};var Rd=fa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:l()}),Sd=fa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:l()}),Td=function(){return Date.now?Date.now():+new Date};Ka("Z",":"),Ka("ZZ",""),O("Z",qd),O("ZZ",qd),S(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=La(qd,a)});var Ud=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Vd=/(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Wd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Za.fn=Ia.prototype;var Xd=bb(1,"add"),Yd=bb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Zd=fa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ib("gggg","weekYear"),Ib("ggggg","weekYear"),Ib("GGGG","isoWeekYear"),Ib("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),O("G",od),O("g",od),O("GG",hd,dd),O("gg",hd,dd),O("GGGG",ld,fd),O("gggg",ld,fd),O("GGGGG",md,gd),O("ggggg",md,gd),T(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=r(a)}),T(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),J("Q",0,"Qo","quarter"),A("quarter","Q"),O("Q",cd),S("Q",function(a,b){b[wd]=3*(r(a)-1)}),J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),O("w",hd),O("ww",hd,dd),O("W",hd),O("WW",hd,dd),T(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=r(a)});var $d={dow:0,doy:6};J("D",["DD",2],"Do","date"),A("date","D"),O("D",hd),O("DD",hd,dd),O("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),S(["D","DD"],xd),S("Do",function(a,b){b[xd]=r(a.match(hd)[0],10)});var _d=E("Date",!0);J("d",0,"do","day"),J("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),J("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),J("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),O("d",hd),O("e",hd),O("E",hd),O("dd",sd),O("ddd",sd),O("dddd",sd),T(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:j(c).invalidWeekday=a}),T(["d","e","E"],function(a,b,c,d){b[d]=r(a)});var ae="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),be="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ce="Su_Mo_Tu_We_Th_Fr_Sa".split("_");J("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),O("DDD",kd),O("DDDD",ed),S(["DDD","DDDD"],function(a,b,c){c._dayOfYear=r(a)}),J("H",["HH",2],0,"hour"),J("h",["hh",2],0,cc),J("hmm",0,0,function(){return""+cc.apply(this)+I(this.minutes(),2)}),J("hmmss",0,0,function(){return""+cc.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)}),J("Hmm",0,0,function(){return""+this.hours()+I(this.minutes(),2)}),J("Hmmss",0,0,function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)}),dc("a",!0),dc("A",!1),A("hour","h"),O("a",ec),O("A",ec),O("H",hd),O("h",hd),O("HH",hd,dd),O("hh",hd,dd),O("hmm",id),O("hmmss",jd),O("Hmm",id),O("Hmmss",jd),S(["H","HH"],yd),S(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),S(["h","hh"],function(a,b,c){b[yd]=r(a),j(c).bigHour=!0}),S("hmm",function(a,b,c){var d=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d)),j(c).bigHour=!0}),S("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d,2)),b[Ad]=r(a.substr(e)),j(c).bigHour=!0}),S("Hmm",function(a,b,c){var d=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d))}),S("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d,2)),b[Ad]=r(a.substr(e))});var de=/[ap]\.?m?\.?/i,ee=E("Hours",!0);J("m",["mm",2],0,"minute"),A("minute","m"),O("m",hd),O("mm",hd,dd),S(["m","mm"],zd);var fe=E("Minutes",!1);J("s",["ss",2],0,"second"),A("second","s"),O("s",hd),O("ss",hd,dd),S(["s","ss"],Ad);var ge=E("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)}),J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0,["SSSS",4],0,function(){return 10*this.millisecond()}),J(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),J(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),J(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),J(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),J(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),O("S",kd,cd),O("SS",kd,dd),O("SSS",kd,ed);var he;for(he="SSSS";he.length<=9;he+="S")O(he,nd);for(he="S";he.length<=9;he+="S")S(he,hc);var ie=E("Milliseconds",!1);J("z",0,0,"zoneAbbr"),J("zz",0,0,"zoneName");var je=o.prototype;je.add=Xd,je.calendar=db,je.clone=eb,je.diff=lb,je.endOf=xb,je.format=pb,je.from=qb,je.fromNow=rb,je.to=sb,je.toNow=tb,je.get=H,je.invalidAt=Gb,je.isAfter=fb,je.isBefore=gb,je.isBetween=hb,je.isSame=ib,je.isSameOrAfter=jb,je.isSameOrBefore=kb,je.isValid=Eb,je.lang=Zd,je.locale=ub,je.localeData=vb,je.max=Sd,je.min=Rd,je.parsingFlags=Fb,je.set=H,je.startOf=wb,je.subtract=Yd,je.toArray=Bb,je.toObject=Cb,je.toDate=Ab,je.toISOString=ob,je.toJSON=Db,je.toString=nb,je.unix=zb,je.valueOf=yb,je.creationData=Hb,je.year=Qd,je.isLeapYear=na,je.weekYear=Jb,je.isoWeekYear=Kb,je.quarter=je.quarters=Pb,je.month=$,je.daysInMonth=_,je.week=je.weeks=Tb,je.isoWeek=je.isoWeeks=Ub,je.weeksInYear=Mb,je.isoWeeksInYear=Lb,je.date=_d,je.day=je.days=$b,je.weekday=_b,je.isoWeekday=ac,je.dayOfYear=bc,je.hour=je.hours=ee,je.minute=je.minutes=fe,je.second=je.seconds=ge,je.millisecond=je.milliseconds=ie,je.utcOffset=Oa,je.utc=Qa,je.local=Ra,je.parseZone=Sa,je.hasAlignedHourOffset=Ta,je.isDST=Ua,je.isDSTShifted=Va,je.isLocal=Wa,je.isUtcOffset=Xa,je.isUtc=Ya,je.isUTC=Ya,je.zoneAbbr=ic,je.zoneName=jc,je.dates=fa("dates accessor is deprecated. Use date instead.",_d),je.months=fa("months accessor is deprecated. Use month instead",$),je.years=fa("years accessor is deprecated. Use year instead",Qd),je.zone=fa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Pa);var ke=je,le={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},me={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},ne="Invalid date",oe="%d",pe=/\d{1,2}/,qe={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},re=t.prototype;re._calendar=le,re.calendar=mc,re._longDateFormat=me,re.longDateFormat=nc,re._invalidDate=ne,re.invalidDate=oc,re._ordinal=oe,re.ordinal=pc,re._ordinalParse=pe,re.preparse=qc,re.postformat=qc,re._relativeTime=qe,re.relativeTime=rc,re.pastFuture=sc,re.set=tc,re.months=W,re._months=Fd,re.monthsShort=X,re._monthsShort=Gd,re.monthsParse=Y,re._monthsRegex=Id,re.monthsRegex=ba,re._monthsShortRegex=Hd,re.monthsShortRegex=aa,re.week=Qb,re._week=$d,re.firstDayOfYear=Sb,re.firstDayOfWeek=Rb,re.weekdays=Wb,re._weekdays=ae,re.weekdaysMin=Yb,re._weekdaysMin=ce,re.weekdaysShort=Xb,re._weekdaysShort=be,re.weekdaysParse=Zb,re.isPM=fc,re._meridiemParse=de,re.meridiem=gc,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===r(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=fa("moment.lang is deprecated. Use moment.locale instead.",x),a.langData=fa("moment.langData is deprecated. Use moment.localeData instead.",z);var se=Math.abs,te=Lc("ms"),ue=Lc("s"),ve=Lc("m"),we=Lc("h"),xe=Lc("d"),ye=Lc("w"),ze=Lc("M"),Ae=Lc("y"),Be=Nc("milliseconds"),Ce=Nc("seconds"),De=Nc("minutes"),Ee=Nc("hours"),Fe=Nc("days"),Ge=Nc("months"),He=Nc("years"),Ie=Math.round,Je={s:45,m:45,h:22,d:26,M:11},Ke=Math.abs,Le=Ia.prototype;Le.abs=Bc,Le.add=Dc,Le.subtract=Ec,Le.as=Jc,Le.asMilliseconds=te,Le.asSeconds=ue,Le.asMinutes=ve,Le.asHours=we,Le.asDays=xe,Le.asWeeks=ye,Le.asMonths=ze,Le.asYears=Ae,Le.valueOf=Kc,Le._bubble=Gc,Le.get=Mc,Le.milliseconds=Be,Le.seconds=Ce,Le.minutes=De,Le.hours=Ee,Le.days=Fe,Le.weeks=Oc,Le.months=Ge,Le.years=He,Le.humanize=Sc,Le.toISOString=Tc,Le.toString=Tc,Le.toJSON=Tc,Le.locale=ub,Le.localeData=vb,Le.toIsoString=fa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Tc),Le.lang=Zd,J("X",0,0,"unix"),J("x",0,0,"valueOf"),O("x",od),O("X",rd),S("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),S("x",function(a,b,c){c._d=new Date(r(a))}),a.version="2.11.1",b(Ea),a.fn=ke,a.min=Ga,a.max=Ha,a.now=Td,a.utc=h,a.unix=kc,a.months=wc,a.isDate=d,a.locale=x,a.invalid=l,a.duration=Za,a.isMoment=p,a.weekdays=yc,a.parseZone=lc,a.localeData=z,a.isDuration=Ja,a.monthsShort=xc,a.weekdaysMin=Ac,a.defineLocale=y,a.weekdaysShort=zc,a.normalizeUnits=B,a.relativeTimeThreshold=Rc,a.prototype=ke;var Me=a;return Me});!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("moment",b):a.moment=b()}(this,function(){"use strict";function a(){return Rd.apply(null,arguments)}function b(a){Rd=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Da(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a){return void 0===a}function n(a,b){var c,d,e;if(m(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),m(b._i)||(a._i=b._i),m(b._f)||(a._f=b._f),m(b._l)||(a._l=b._l),m(b._strict)||(a._strict=b._strict),m(b._tzm)||(a._tzm=b._tzm),m(b._isUTC)||(a._isUTC=b._isUTC),m(b._offset)||(a._offset=b._offset),m(b._pf)||(a._pf=j(b)),m(b._locale)||(a._locale=b._locale),Td.length>0)for(c in Td)d=Td[c],e=b[d],m(e)||(a[d]=e);return a}function o(b){n(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Ud===!1&&(Ud=!0,a.updateOffset(this),Ud=!1)}function p(a){return a instanceof o||null!=a&&null!=a._isAMomentObject}function q(a){return 0>a?Math.ceil(a):Math.floor(a)}function r(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=q(b)),c}function s(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&r(a[d])!==r(b[d]))&&g++;return g+f}function t(){}function u(a){return a?a.toLowerCase().replace("_","-"):a}function v(a){for(var b,c,d,e,f=0;f<a.length;){for(e=u(a[f]).split("-"),b=e.length,c=u(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=w(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&s(e,c,!0)>=b-1)break;b--}f++}return null}function w(a){var b=null;if(!Vd[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Sd._abbr,require("./locale/"+a),x(b)}catch(c){}return Vd[a]}function x(a,b){var c;return a&&(c=m(b)?z(a):y(a,b),c&&(Sd=c)),Sd._abbr}function y(a,b){return null!==b?(b.abbr=a,Vd[a]=Vd[a]||new t,Vd[a].set(b),x(a),Vd[a]):(delete Vd[a],null)}function z(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Sd;if(!c(a)){if(b=w(a))return b;a=[a]}return v(a)}function A(a,b){var c=a.toLowerCase();Wd[c]=Wd[c+"s"]=Wd[b]=a}function B(a){return"string"==typeof a?Wd[a]||Wd[a.toLowerCase()]:void 0}function C(a){var b,c,d={};for(c in a)f(a,c)&&(b=B(c),b&&(d[b]=a[c]));return d}function D(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function E(b,c){return function(d){return null!=d?(G(this,b,d),a.updateOffset(this,c),this):F(this,b)}}function F(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function G(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function H(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=B(a),D(this[a]))return this[a](b);return this}function I(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function J(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&($d[a]=e),b&&($d[b[0]]=function(){return I(e.apply(this,arguments),b[1],b[2])}),c&&($d[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function L(a){var b,c,d=a.match(Xd);for(b=0,c=d.length;c>b;b++)$d[d[b]]?d[b]=$d[d[b]]:d[b]=K(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),Zd[b]=Zd[b]||L(b),Zd[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Yd.lastIndex=0;d>=0&&Yd.test(a);)a=a.replace(Yd,c),Yd.lastIndex=0,d-=1;return a}function O(a,b,c){qe[a]=D(b)?b:function(a,d){return a&&c?c:b}}function P(a,b){return f(qe,a)?qe[a](b._strict,b._locale):new RegExp(Q(a))}function Q(a){return R(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function R(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function S(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=r(a)}),c=0;c<a.length;c++)re[a[c]]=d}function T(a,b){S(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function U(a,b,c){null!=b&&f(re,a)&&re[a](b,c._a,c,a)}function V(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function W(a,b){return c(this._months)?this._months[a.month()]:this._months[Be.test(b)?"format":"standalone"][a.month()]}function X(a,b){return c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Be.test(b)?"format":"standalone"][a.month()]}function Y(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function Z(a,b){var c;return a.isValid()?"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),V(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a):a}function $(b){return null!=b?(Z(this,b),a.updateOffset(this,!0),this):F(this,"Month")}function _(){return V(this.year(),this.month())}function aa(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex}function ba(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex}function ca(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=h([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=R(d[b]),e[b]=R(e[b]),f[b]=R(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")$","i")}function da(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[te]<0||c[te]>11?te:c[ue]<1||c[ue]>V(c[se],c[te])?ue:c[ve]<0||c[ve]>24||24===c[ve]&&(0!==c[we]||0!==c[xe]||0!==c[ye])?ve:c[we]<0||c[we]>59?we:c[xe]<0||c[xe]>59?xe:c[ye]<0||c[ye]>999?ye:-1,j(a)._overflowDayOfYear&&(se>b||b>ue)&&(b=ue),j(a)._overflowWeeks&&-1===b&&(b=ze),j(a)._overflowWeekday&&-1===b&&(b=Ae),j(a).overflow=b),a}function ea(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function fa(a,b){var c=!0;return g(function(){return c&&(ea(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ga(a,b){Ge[a]||(ea(b),Ge[a]=!0)}function ha(a){var b,c,d,e,f,g,h=a._i,i=He.exec(h)||Ie.exec(h);if(i){for(j(a).iso=!0,b=0,c=Ke.length;c>b;b++)if(Ke[b][1].exec(i[1])){e=Ke[b][0],d=Ke[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Le.length;c>b;b++)if(Le[b][1].exec(i[3])){f=(i[2]||" ")+Le[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Je.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),wa(a)}else a._isValid=!1}function ia(b){var c=Me.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ha(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ja(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ka(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function la(a){return ma(a)?366:365}function ma(a){return a%4===0&&a%100!==0||a%400===0}function na(){return ma(this.year())}function oa(a,b,c){var d=7+b-c,e=(7+ka(a,0,d).getUTCDay()-b)%7;return-e+d-1}function pa(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=oa(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=la(f)+j):j>la(a)?(f=a+1,g=j-la(a)):(f=a,g=j),{year:f,dayOfYear:g}}function qa(a,b,c){var d,e,f=oa(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+ra(e,b,c)):g>ra(a.year(),b,c)?(d=g-ra(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function ra(a,b,c){var d=oa(a,b,c),e=oa(a+1,b,c);return(la(a)-d+e)/7}function sa(a,b,c){return null!=a?a:null!=b?b:c}function ta(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function ua(a){var b,c,d,e,f=[];if(!a._d){for(d=ta(a),a._w&&null==a._a[ue]&&null==a._a[te]&&va(a),a._dayOfYear&&(e=sa(a._a[se],d[se]),a._dayOfYear>la(e)&&(j(a)._overflowDayOfYear=!0),c=ka(e,0,a._dayOfYear),a._a[te]=c.getUTCMonth(),a._a[ue]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[ve]&&0===a._a[we]&&0===a._a[xe]&&0===a._a[ye]&&(a._nextDay=!0,a._a[ve]=0),a._d=(a._useUTC?ka:ja).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[ve]=24)}}function va(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=sa(b.GG,a._a[se],qa(Ea(),1,4).year),d=sa(b.W,1),e=sa(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=sa(b.gg,a._a[se],qa(Ea(),f,g).year),d=sa(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>ra(c,f,g)?j(a)._overflowWeeks=!0:null!=i?j(a)._overflowWeekday=!0:(h=pa(c,d,e,f,g),a._a[se]=h.year,a._dayOfYear=h.dayOfYear)}function wa(b){if(b._f===a.ISO_8601)return void ha(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=N(b._f,b._locale).match(Xd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(P(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),$d[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),U(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[ve]<=12&&b._a[ve]>0&&(j(b).bigHour=void 0),b._a[ve]=xa(b._locale,b._a[ve],b._meridiem),ua(b),da(b)}function xa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function ya(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],wa(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function za(a){if(!a._d){var b=C(a._i);a._a=e([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),ua(a)}}function Aa(a){var b=new o(da(Ba(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Ba(a){var b=a._i,e=a._f;return a._locale=a._locale||z(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),p(b)?new o(da(b)):(c(e)?ya(a):e?wa(a):d(b)?a._d=b:Ca(a),k(a)||(a._d=null),a))}function Ca(b){var f=b._i;void 0===f?b._d=new Date(a.now()):d(f)?b._d=new Date(+f):"string"==typeof f?ia(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ua(b)):"object"==typeof f?za(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Da(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,Aa(f)}function Ea(a,b,c,d){return Da(a,b,c,d,!1)}function Fa(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Ea();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Ga(){var a=[].slice.call(arguments,0);return Fa("isBefore",a)}function Ha(){var a=[].slice.call(arguments,0);return Fa("isAfter",a)}function Ia(a){var b=C(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=z(),this._bubble()}function Ja(a){return a instanceof Ia}function Ka(a,b){J(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+I(~~(a/60),2)+b+I(~~a%60,2)})}function La(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(Re)||["-",0,0],f=+(60*e[1])+r(e[2]);return"+"===e[0]?f:-f}function Ma(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(p(b)||d(b)?+b:+Ea(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Ea(b).local()}function Na(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Oa(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?("string"==typeof b?b=La(ne,b):Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Na(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?cb(this,Za(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Na(this):null!=b?this:NaN}function Pa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Qa(a){return this.utcOffset(0,a)}function Ra(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Na(this),"m")),this}function Sa(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(La(me,this._i)),this}function Ta(a){return this.isValid()?(a=a?Ea(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function Ua(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Va(){if(!m(this._isDSTShifted))return this._isDSTShifted;var a={};if(n(a,this),a=Ba(a),a._a){var b=a._isUTC?h(a._a):Ea(a._a);this._isDSTShifted=this.isValid()&&s(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Wa(){return this.isValid()?!this._isUTC:!1}function Xa(){return this.isValid()?this._isUTC:!1}function Ya(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Za(a,b){var c,d,e,g=a,h=null;return Ja(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=Se.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:r(h[ue])*c,h:r(h[ve])*c,m:r(h[we])*c,s:r(h[xe])*c,ms:r(h[ye])*c}):(h=Te.exec(a))?(c="-"===h[1]?-1:1,g={y:$a(h[2],c),M:$a(h[3],c),d:$a(h[4],c),h:$a(h[5],c),m:$a(h[6],c),s:$a(h[7],c),w:$a(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=ab(Ea(g.from),Ea(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ia(g),Ja(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function $a(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function _a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function ab(a,b){var c;return a.isValid()&&b.isValid()?(b=Ma(b,a),a.isBefore(b)?c=_a(a,b):(c=_a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function bb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ga(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Za(c,d),cb(this,e,a),this}}function cb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;b.isValid()&&(e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&G(b,"Date",F(b,"Date")+g*d),h&&Z(b,F(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function db(a,b){var c=a||Ea(),d=Ma(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse",g=b&&(D(b[f])?b[f]():b[f]);return this.format(g||this.localeData().calendar(f,this,Ea(c)))}function eb(){return new o(this)}function fb(a,b){var c=p(a)?a:Ea(a);return this.isValid()&&c.isValid()?(b=B(m(b)?"millisecond":b),"millisecond"===b?+this>+c:+c<+this.clone().startOf(b)):!1}function gb(a,b){var c=p(a)?a:Ea(a);return this.isValid()&&c.isValid()?(b=B(m(b)?"millisecond":b),"millisecond"===b?+c>+this:+this.clone().endOf(b)<+c):!1}function hb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function ib(a,b){var c,d=p(a)?a:Ea(a);return this.isValid()&&d.isValid()?(b=B(b||"millisecond"),"millisecond"===b?+this===+d:(c=+d,+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))):!1}function jb(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function kb(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function lb(a,b,c){var d,e,f,g;return this.isValid()?(d=Ma(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=B(b),"year"===b||"month"===b||"quarter"===b?(g=mb(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:q(g)):NaN):NaN}function mb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function nb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ob(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?D(Date.prototype.toISOString)?this.toDate().toISOString():M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function pb(b){var c=M(this,b||a.defaultFormat);return this.localeData().postformat(c)}function qb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function rb(a){return this.from(Ea(),a)}function sb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function tb(a){return this.to(Ea(),a)}function ub(a){var b;return void 0===a?this._locale._abbr:(b=z(a),null!=b&&(this._locale=b),this)}function vb(){return this._locale}function wb(a){switch(a=B(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function xb(a){return a=B(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function yb(){return+this._d-6e4*(this._offset||0)}function zb(){return Math.floor(+this/1e3)}function Ab(){return this._offset?new Date(+this):this._d}function Bb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function Cb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Db(){return this.isValid()?this.toISOString():"null"}function Eb(){return k(this)}function Fb(){return g({},j(this))}function Gb(){return j(this).overflow}function Hb(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ib(a,b){J(0,[a,a.length],0,b)}function Jb(a){return Nb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Kb(a){return Nb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Lb(){return ra(this.year(),1,4)}function Mb(){var a=this.localeData()._week;return ra(this.year(),a.dow,a.doy)}function Nb(a,b,c,d,e){var f;return null==a?qa(this,d,e).year:(f=ra(a,d,e),b>f&&(b=f),Ob.call(this,a,b,c,d,e))}function Ob(a,b,c,d,e){var f=pa(a,b,c,d,e),g=ka(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Pb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Qb(a){return qa(a,this._week.dow,this._week.doy).week}function Rb(){return this._week.dow}function Sb(){return this._week.doy}function Tb(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Ub(a){var b=qa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Vb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Wb(a,b){return c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]}function Xb(a){return this._weekdaysShort[a.day()]}function Yb(a){return this._weekdaysMin[a.day()]}function Zb(a,b,c){var d,e,f;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){if(e=Ea([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function $b(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Vb(a,this.localeData()),this.add(a-b,"d")):b}function _b(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function ac(a){return this.isValid()?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN}function bc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function cc(){return this.hours()%12||12}function dc(a,b){J(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function ec(a,b){return b._meridiemParse}function fc(a){return"p"===(a+"").toLowerCase().charAt(0)}function gc(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function hc(a,b){b[ye]=r(1e3*("0."+a))}function ic(){return this._isUTC?"UTC":""}function jc(){return this._isUTC?"Coordinated Universal Time":""}function kc(a){return Ea(1e3*a)}function lc(){return Ea.apply(null,arguments).parseZone()}function mc(a,b,c){var d=this._calendar[a];return D(d)?d.call(b,c):d}function nc(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function oc(){return this._invalidDate}function pc(a){return this._ordinal.replace("%d",a)}function qc(a){return a}function rc(a,b,c,d){var e=this._relativeTime[c];return D(e)?e(a,b,c,d):e.replace(/%d/i,a)}function sc(a,b){var c=this._relativeTime[a>0?"future":"past"];return D(c)?c(b):c.replace(/%s/i,b)}function tc(a){var b,c;for(c in a)b=a[c],D(b)?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function uc(a,b,c,d){var e=z(),f=h().set(d,b);return e[c](f,a)}function vc(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return uc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=uc(a,f,c,e);return g}function wc(a,b){return vc(a,b,"months",12,"month")}function xc(a,b){return vc(a,b,"monthsShort",12,"month")}function yc(a,b){return vc(a,b,"weekdays",7,"day")}function zc(a,b){return vc(a,b,"weekdaysShort",7,"day")}function Ac(a,b){return vc(a,b,"weekdaysMin",7,"day")}function Bc(){var a=this._data;return this._milliseconds=qf(this._milliseconds),this._days=qf(this._days),this._months=qf(this._months),a.milliseconds=qf(a.milliseconds),a.seconds=qf(a.seconds),a.minutes=qf(a.minutes),a.hours=qf(a.hours),a.months=qf(a.months),a.years=qf(a.years),this}function Cc(a,b,c,d){var e=Za(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Dc(a,b){return Cc(this,a,b,1)}function Ec(a,b){return Cc(this,a,b,-1)}function Fc(a){return 0>a?Math.floor(a):Math.ceil(a)}function Gc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*Fc(Ic(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=q(f/1e3),i.seconds=a%60,b=q(a/60),i.minutes=b%60,c=q(b/60),i.hours=c%24,g+=q(c/24),e=q(Hc(g)),h+=e,g-=Fc(Ic(e)),d=q(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function Hc(a){return 4800*a/146097}function Ic(a){return 146097*a/4800}function Jc(a){var b,c,d=this._milliseconds;if(a=B(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+Hc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(Ic(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function Kc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*r(this._months/12)}function Lc(a){return function(){return this.as(a)}}function Mc(a){return a=B(a),this[a+"s"]()}function Nc(a){return function(){return this._data[a]}}function Oc(){return q(this.days()/7)}function Pc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Qc(a,b,c){var d=Za(a).abs(),e=Gf(d.as("s")),f=Gf(d.as("m")),g=Gf(d.as("h")),h=Gf(d.as("d")),i=Gf(d.as("M")),j=Gf(d.as("y")),k=e<Hf.s&&["s",e]||1>=f&&["m"]||f<Hf.m&&["mm",f]||1>=g&&["h"]||g<Hf.h&&["hh",g]||1>=h&&["d"]||h<Hf.d&&["dd",h]||1>=i&&["M"]||i<Hf.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Pc.apply(null,k)}function Rc(a,b){return void 0===Hf[a]?!1:void 0===b?Hf[a]:(Hf[a]=b,!0)}function Sc(a){var b=this.localeData(),c=Qc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Tc(){var a,b,c,d=If(this._milliseconds)/1e3,e=If(this._days),f=If(this._months);a=q(d/60),b=q(a/60),d%=60,a%=60,c=q(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}function Uc(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function Vc(a,b,c){var d={mm:b?"__":"__",hh:b?"__":"__",dd:"__",MM:"__",yy:"__"};return"m"===c?b?"":"":"h"===c?b?"":"":a+" "+Uc(d[c],+a)}function Wc(a,b,c){var d={mm:"munutenn",MM:"miz",dd:"devezh"};return a+" "+Zc(d[c],a)}function Xc(a){switch(Yc(a)){case 1:case 3:case 4:case 5:case 9:return a+" bloaz";default:return a+" vloaz"}}function Yc(a){return a>9?Yc(a%10):a}function Zc(a,b){return 2===b?$c(a):a}function $c(a){var b={m:"v",b:"v",d:"z"};return void 0===b[a.charAt(0)]?a:b[a.charAt(0)]+a.substring(1)}function _c(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute";case"mm":return d+=1===a?"minuta":2===a||3===a||4===a?"minute":"minuta";case"h":return b?"jedan sat":"jednog sata";case"hh":return d+=1===a?"sat":2===a||3===a||4===a?"sata":"sati";case"dd":return d+=1===a?"dan":"dana";case"MM":return d+=1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci";case"yy":return d+=1===a?"godina":2===a||3===a||4===a?"godine":"godina"}}function ad(a){return a>1&&5>a&&1!==~~(a/10)}function bd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"pr sekund":"pr sekundami";case"m":return b?"minuta":d?"minutu":"minutou";case"mm":return b||d?e+(ad(a)?"minuty":"minut"):e+"minutami";break;case"h":return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(ad(a)?"hodiny":"hodin"):e+"hodinami";break;case"d":return b||d?"den":"dnem";case"dd":return b||d?e+(ad(a)?"dny":"dn"):e+"dny";break;case"M":return b||d?"msc":"mscem";case"MM":return b||d?e+(ad(a)?"msce":"msc"):e+"msci";break;case"y":return b||d?"rok":"rokem";case"yy":return b||d?e+(ad(a)?"roky":"let"):e+"lety"}}function cd(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}function dd(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}function ed(a,b,c,d){var e={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[a+" minuti",a+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[a+" tunni",a+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[a+" kuu",a+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[a+" aasta",a+" aastat"]};return b?e[c][2]?e[c][2]:e[c][1]:d?e[c][0]:e[c][1]}function fd(a,b,c,d){var e="";switch(c){case"s":return d?"muutaman sekunnin":"muutama sekunti";case"m":return d?"minuutin":"minuutti";case"mm":e=d?"minuutin":"minuuttia";break;case"h":return d?"tunnin":"tunti";case"hh":e=d?"tunnin":"tuntia";break;case"d":return d?"pivn":"piv";case"dd":e=d?"pivn":"piv";break;case"M":return d?"kuukauden":"kuukausi";case"MM":e=d?"kuukauden":"kuukautta";break;case"y":return d?"vuoden":"vuosi";case"yy":e=d?"vuoden":"vuotta"}return e=gd(a,d)+" "+e}function gd(a,b){return 10>a?b?fg[a]:eg[a]:a}function hd(a,b,c){var d=a+" ";switch(c){case"m":return b?"jedna minuta":"jedne minute";case"mm":return d+=1===a?"minuta":2===a||3===a||4===a?"minute":"minuta";case"h":return b?"jedan sat":"jednog sata";case"hh":return d+=1===a?"sat":2===a||3===a||4===a?"sata":"sati";case"dd":return d+=1===a?"dan":"dana";case"MM":return d+=1===a?"mjesec":2===a||3===a||4===a?"mjeseca":"mjeseci";case"yy":return d+=1===a?"godina":2===a||3===a||4===a?"godine":"godina"}}function id(a,b,c,d){var e=a;switch(c){case"s":return d||b?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(d||b?" perc":" perce");case"mm":return e+(d||b?" perc":" perce");case"h":return"egy"+(d||b?" ra":" rja");case"hh":return e+(d||b?" ra":" rja");case"d":return"egy"+(d||b?" nap":" napja");case"dd":return e+(d||b?" nap":" napja");case"M":return"egy"+(d||b?" hnap":" hnapja");case"MM":return e+(d||b?" hnap":" hnapja");case"y":return"egy"+(d||b?" v":" ve");case"yy":return e+(d||b?" v":" ve")}return""}function jd(a){return(a?"":"[mlt] ")+"["+pg[this.day()]+"] LT[-kor]"}function kd(a){return a%100===11?!0:a%10===1?!1:!0}function ld(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nokkrar sekndur":"nokkrum sekndum";case"m":return b?"mnta":"mntu";case"mm":return kd(a)?e+(b||d?"mntur":"mntum"):b?e+"mnta":e+"mntu";case"hh":return kd(a)?e+(b||d?"klukkustundir":"klukkustundum"):e+"klukkustund";case"d":return b?"dagur":d?"dag":"degi";case"dd":return kd(a)?b?e+"dagar":e+(d?"daga":"dgum"):b?e+"dagur":e+(d?"dag":"degi");case"M":return b?"mnuur":d?"mnu":"mnui";case"MM":return kd(a)?b?e+"mnuir":e+(d?"mnui":"mnuum"):b?e+"mnuur":e+(d?"mnu":"mnui");case"y":return b||d?"r":"ri";case"yy":return kd(a)?e+(b||d?"r":"rum"):e+(b||d?"r":"ri")}}function md(a,b,c,d){var e={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return b?e[c][0]:e[c][1]}function nd(a){var b=a.substr(0,a.indexOf(" "));return pd(b)?"a "+a:"an "+a}function od(a){var b=a.substr(0,a.indexOf(" "));return pd(b)?"viru "+a:"virun "+a}function pd(a){if(a=parseInt(a,10),isNaN(a))return!1;if(0>a)return!0;if(10>a)return a>=4&&7>=a?!0:!1;if(100>a){var b=a%10,c=a/10;return pd(0===b?c:b)}if(1e4>a){for(;a>=10;)a/=10;return pd(a)}return a/=1e3,pd(a)}function qd(a,b,c,d){return b?"kelios sekunds":d?"keli sekundi":"kelias sekundes"}function rd(a,b,c,d){return b?td(c)[0]:d?td(c)[1]:td(c)[2]}function sd(a){return a%10===0||a>10&&20>a}function td(a){return rg[a].split("_")}function ud(a,b,c,d){var e=a+" ";return 1===a?e+rd(a,b,c[0],d):b?e+(sd(a)?td(c)[1]:td(c)[0]):d?e+td(c)[1]:e+(sd(a)?td(c)[1]:td(c)[2])}function vd(a,b,c){return c?b%10===1&&11!==b?a[2]:a[3]:b%10===1&&11!==b?a[0]:a[1]}function wd(a,b,c){return a+" "+vd(sg[c],a,b)}function xd(a,b,c){return vd(sg[c],a,b)}function yd(a,b){return b?"daas sekundes":"dam sekundm"}function zd(a,b,c,d){var e="";if(b)switch(c){case"s":e=" ";break;case"m":e=" ";break;case"mm":e="%d ";break;case"h":e=" ";break;case"hh":e="%d ";break;case"d":e=" ";break;case"dd":e="%d ";break;case"M":e=" ";break;case"MM":e="%d ";break;case"y":e=" ";break;case"yy":e="%d "}else switch(c){case"s":e=" ";break;case"m":e=" ";break;case"mm":e="%d ";break;case"h":e=" ";break;case"hh":e="%d ";break;case"d":e=" ";break;case"dd":e="%d ";break;case"M":e=" ";break;case"MM":e="%d ";break;case"y":e=" ";break;case"yy":e="%d "}return e.replace(/%d/i,a)}function Ad(a){return 5>a%10&&a%10>1&&~~(a/10)%10!==1}function Bd(a,b,c){var d=a+" ";switch(c){case"m":return b?"minuta":"minut";case"mm":return d+(Ad(a)?"minuty":"minut");case"h":return b?"godzina":"godzin";case"hh":return d+(Ad(a)?"godziny":"godzin");case"MM":return d+(Ad(a)?"miesice":"miesicy");case"yy":return d+(Ad(a)?"lata":"lat")}}function Cd(a,b,c){var d={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},e=" ";return(a%100>=20||a>=100&&a%100===0)&&(e=" de "),a+e+d[c]}function Dd(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function Ed(a,b,c){var d={mm:b?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"};return"m"===c?b?"":"":a+" "+Dd(d[c],+a)}function Fd(a){return a>1&&5>a}function Gd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"pr seknd":"pr sekundami";case"m":return b?"minta":d?"mintu":"mintou";case"mm":return b||d?e+(Fd(a)?"minty":"mint"):e+"mintami";break;case"h":return b?"hodina":d?"hodinu":"hodinou";case"hh":return b||d?e+(Fd(a)?"hodiny":"hodn"):e+"hodinami";break;case"d":return b||d?"de":"dom";case"dd":return b||d?e+(Fd(a)?"dni":"dn"):e+"dami";break;case"M":return b||d?"mesiac":"mesiacom";case"MM":return b||d?e+(Fd(a)?"mesiace":"mesiacov"):e+"mesiacmi";break;case"y":return b||d?"rok":"rokom";case"yy":return b||d?e+(Fd(a)?"roky":"rokov"):e+"rokmi"}}function Hd(a,b,c,d){var e=a+" ";switch(c){case"s":return b||d?"nekaj sekund":"nekaj sekundami";case"m":return b?"ena minuta":"eno minuto";case"mm":return e+=1===a?b?"minuta":"minuto":2===a?b||d?"minuti":"minutama":5>a?b||d?"minute":"minutami":b||d?"minut":"minutami";case"h":return b?"ena ura":"eno uro";case"hh":return e+=1===a?b?"ura":"uro":2===a?b||d?"uri":"urama":5>a?b||d?"ure":"urami":b||d?"ur":"urami";case"d":return b||d?"en dan":"enim dnem";case"dd":return e+=1===a?b||d?"dan":"dnem":2===a?b||d?"dni":"dnevoma":b||d?"dni":"dnevi";case"M":return b||d?"en mesec":"enim mesecem";case"MM":return e+=1===a?b||d?"mesec":"mesecem":2===a?b||d?"meseca":"mesecema":5>a?b||d?"mesece":"meseci":b||d?"mesecev":"meseci";case"y":return b||d?"eno leto":"enim letom";case"yy":return e+=1===a?b||d?"leto":"letom":2===a?b||d?"leti":"letoma":5>a?b||d?"leta":"leti":b||d?"let":"leti"}}function Id(a){var b=a;return b=-1!==a.indexOf("jaj")?b.slice(0,-3)+"leS":-1!==a.indexOf("jar")?b.slice(0,-3)+"waQ":-1!==a.indexOf("DIS")?b.slice(0,-3)+"nem":b+" pIq"}function Jd(a){var b=a;return b=-1!==a.indexOf("jaj")?b.slice(0,-3)+"Hu":-1!==a.indexOf("jar")?b.slice(0,-3)+"wen":-1!==a.indexOf("DIS")?b.slice(0,-3)+"ben":b+" ret"}function Kd(a,b,c,d){var e=Ld(a);switch(c){case"mm":return e+" tup";case"hh":return e+" rep";case"dd":return e+" jaj";case"MM":return e+" jar";case"yy":return e+" DIS"}}function Ld(a){var b=Math.floor(a%1e3/100),c=Math.floor(a%100/10),d=a%10,e="";return b>0&&(e+=Lg[b]+"vatlh"),c>0&&(e+=(""!==e?" ":"")+Lg[c]+"maH"),d>0&&(e+=(""!==e?" ":"")+Lg[d]),""===e?"pagh":e}function Md(a,b,c,d){var e={s:["viensas secunds","'iensas secunds"],m:["'n mut","'iens mut"],mm:[a+" muts",""+a+" muts"],h:["'n ora","'iensa ora"],hh:[a+" oras",""+a+" oras"],d:["'n ziua","'iensa ziua"],dd:[a+" ziuas",""+a+" ziuas"],M:["'n mes","'iens mes"],MM:[a+" mesen",""+a+" mesen"],y:["'n ar","'iens ar"],yy:[a+" ars",""+a+" ars"]};return d?e[c][0]:b?e[c][0]:e[c][1]}function Nd(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function Od(a,b,c){var d={mm:b?"__":"__",hh:b?"__":"__",dd:"__",MM:"__",yy:"__"};return"m"===c?b?"":"":"h"===c?b?"":"":a+" "+Nd(d[c],+a)}function Pd(a,b){var c={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")},d=/(\[[]\]) ?dddd/.test(b)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(b)?"genitive":"nominative";return c[d][a.day()]}function Qd(a){return function(){return a+""+(11===this.hours()?"":"")+"] LT"}}var Rd,Sd,Td=a.momentProperties=[],Ud=!1,Vd={},Wd={},Xd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Yd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Zd={},$d={},_d=/\d/,ae=/\d\d/,be=/\d{3}/,ce=/\d{4}/,de=/[+-]?\d{6}/,ee=/\d\d?/,fe=/\d\d\d\d?/,ge=/\d\d\d\d\d\d?/,he=/\d{1,3}/,ie=/\d{1,4}/,je=/[+-]?\d{1,6}/,ke=/\d+/,le=/[+-]?\d+/,me=/Z|[+-]\d\d:?\d\d/gi,ne=/Z|[+-]\d\d(?::?\d\d)?/gi,oe=/[+-]?\d+(\.\d{1,3})?/,pe=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,qe={},re={},se=0,te=1,ue=2,ve=3,we=4,xe=5,ye=6,ze=7,Ae=8;J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),J("MMMM",0,0,function(a){return this.localeData().months(this,a)}),A("month","M"),O("M",ee),O("MM",ee,ae),O("MMM",function(a,b){return b.monthsShortRegex(a)}),O("MMMM",function(a,b){return b.monthsRegex(a)}),S(["M","MM"],function(a,b){b[te]=r(a)-1}),S(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[te]=e:j(c).invalidMonth=a});var Be=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ce="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),De="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ee=pe,Fe=pe,Ge={};a.suppressDeprecationWarnings=!1;var He=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ie=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Je=/Z|[+-]\d\d(?::?\d\d)?/,Ke=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Le=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Me=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=fa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),J("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),A("year","y"),O("Y",le),O("YY",ee,ae),O("YYYY",ie,ce),O("YYYYY",je,de),O("YYYYYY",je,de),S(["YYYYY","YYYYYY"],se),S("YYYY",function(b,c){c[se]=2===b.length?a.parseTwoDigitYear(b):r(b)}),S("YY",function(b,c){c[se]=a.parseTwoDigitYear(b)}),S("Y",function(a,b){b[se]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return r(a)+(r(a)>68?1900:2e3)};var Ne=E("FullYear",!1);a.ISO_8601=function(){};var Oe=fa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:l()}),Pe=fa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:l()}),Qe=function(){return Date.now?Date.now():+new Date};Ka("Z",":"),Ka("ZZ",""),O("Z",ne),O("ZZ",ne),S(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=La(ne,a)});var Re=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Se=/(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Te=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Za.fn=Ia.prototype;var Ue=bb(1,"add"),Ve=bb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var We=fa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ib("gggg","weekYear"),Ib("ggggg","weekYear"),Ib("GGGG","isoWeekYear"),Ib("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),O("G",le),O("g",le),O("GG",ee,ae),O("gg",ee,ae),O("GGGG",ie,ce),O("gggg",ie,ce),O("GGGGG",je,de),O("ggggg",je,de),T(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=r(a)}),T(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),J("Q",0,"Qo","quarter"),A("quarter","Q"),O("Q",_d),S("Q",function(a,b){b[te]=3*(r(a)-1)}),J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),O("w",ee),O("ww",ee,ae),O("W",ee),O("WW",ee,ae),T(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=r(a)});var Xe={dow:0,doy:6};J("D",["DD",2],"Do","date"),A("date","D"),O("D",ee),O("DD",ee,ae),O("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),S(["D","DD"],ue),S("Do",function(a,b){b[ue]=r(a.match(ee)[0],10)});var Ye=E("Date",!0);J("d",0,"do","day"),J("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),J("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),J("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),O("d",ee),O("e",ee),O("E",ee),O("dd",pe),O("ddd",pe),O("dddd",pe),T(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:j(c).invalidWeekday=a}),T(["d","e","E"],function(a,b,c,d){b[d]=r(a)});var Ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$e="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),_e="Su_Mo_Tu_We_Th_Fr_Sa".split("_");J("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),O("DDD",he),O("DDDD",be),S(["DDD","DDDD"],function(a,b,c){c._dayOfYear=r(a)}),J("H",["HH",2],0,"hour"),J("h",["hh",2],0,cc),J("hmm",0,0,function(){return""+cc.apply(this)+I(this.minutes(),2)}),J("hmmss",0,0,function(){return""+cc.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)}),J("Hmm",0,0,function(){return""+this.hours()+I(this.minutes(),2)}),J("Hmmss",0,0,function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)}),dc("a",!0),dc("A",!1),A("hour","h"),O("a",ec),O("A",ec),O("H",ee),O("h",ee),O("HH",ee,ae),O("hh",ee,ae),O("hmm",fe),O("hmmss",ge),O("Hmm",fe),O("Hmmss",ge),S(["H","HH"],ve),S(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),S(["h","hh"],function(a,b,c){b[ve]=r(a),j(c).bigHour=!0}),S("hmm",function(a,b,c){var d=a.length-2;b[ve]=r(a.substr(0,d)),b[we]=r(a.substr(d)),j(c).bigHour=!0}),S("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[ve]=r(a.substr(0,d)),b[we]=r(a.substr(d,2)),b[xe]=r(a.substr(e)),j(c).bigHour=!0}),S("Hmm",function(a,b,c){var d=a.length-2;b[ve]=r(a.substr(0,d)),b[we]=r(a.substr(d))}),S("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[ve]=r(a.substr(0,d)),b[we]=r(a.substr(d,2)),b[xe]=r(a.substr(e))});var af=/[ap]\.?m?\.?/i,bf=E("Hours",!0);J("m",["mm",2],0,"minute"),A("minute","m"),O("m",ee),O("mm",ee,ae),S(["m","mm"],we);var cf=E("Minutes",!1);J("s",["ss",2],0,"second"),A("second","s"),O("s",ee),O("ss",ee,ae),S(["s","ss"],xe);var df=E("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)}),J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0,["SSSS",4],0,function(){return 10*this.millisecond()}),J(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),J(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),J(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),J(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),J(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),O("S",he,_d),O("SS",he,ae),O("SSS",he,be);var ef;for(ef="SSSS";ef.length<=9;ef+="S")O(ef,ke);for(ef="S";ef.length<=9;ef+="S")S(ef,hc);var ff=E("Milliseconds",!1);J("z",0,0,"zoneAbbr"),J("zz",0,0,"zoneName");var gf=o.prototype;gf.add=Ue,gf.calendar=db,gf.clone=eb,gf.diff=lb,gf.endOf=xb,gf.format=pb,gf.from=qb,gf.fromNow=rb,gf.to=sb,gf.toNow=tb,gf.get=H,gf.invalidAt=Gb,gf.isAfter=fb,gf.isBefore=gb,gf.isBetween=hb,gf.isSame=ib,gf.isSameOrAfter=jb,gf.isSameOrBefore=kb,gf.isValid=Eb,gf.lang=We,gf.locale=ub,gf.localeData=vb,gf.max=Pe,gf.min=Oe,gf.parsingFlags=Fb,gf.set=H,gf.startOf=wb,gf.subtract=Ve,gf.toArray=Bb,gf.toObject=Cb,gf.toDate=Ab,gf.toISOString=ob,gf.toJSON=Db,gf.toString=nb,gf.unix=zb,gf.valueOf=yb,gf.creationData=Hb,gf.year=Ne,gf.isLeapYear=na,gf.weekYear=Jb,gf.isoWeekYear=Kb,gf.quarter=gf.quarters=Pb,gf.month=$,gf.daysInMonth=_,gf.week=gf.weeks=Tb,gf.isoWeek=gf.isoWeeks=Ub,gf.weeksInYear=Mb,gf.isoWeeksInYear=Lb,gf.date=Ye,gf.day=gf.days=$b,gf.weekday=_b,gf.isoWeekday=ac,gf.dayOfYear=bc,gf.hour=gf.hours=bf,gf.minute=gf.minutes=cf,gf.second=gf.seconds=df,gf.millisecond=gf.milliseconds=ff,gf.utcOffset=Oa,gf.utc=Qa,gf.local=Ra,gf.parseZone=Sa,gf.hasAlignedHourOffset=Ta,gf.isDST=Ua,gf.isDSTShifted=Va,gf.isLocal=Wa,gf.isUtcOffset=Xa,gf.isUtc=Ya,gf.isUTC=Ya,gf.zoneAbbr=ic,gf.zoneName=jc,gf.dates=fa("dates accessor is deprecated. Use date instead.",Ye),gf.months=fa("months accessor is deprecated. Use month instead",$),gf.years=fa("years accessor is deprecated. Use year instead",Ne),gf.zone=fa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Pa);var hf=gf,jf={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},kf={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},lf="Invalid date",mf="%d",nf=/\d{1,2}/,of={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},pf=t.prototype;pf._calendar=jf,pf.calendar=mc,pf._longDateFormat=kf,pf.longDateFormat=nc,pf._invalidDate=lf,pf.invalidDate=oc,pf._ordinal=mf,pf.ordinal=pc,pf._ordinalParse=nf,pf.preparse=qc,pf.postformat=qc,pf._relativeTime=of,pf.relativeTime=rc,pf.pastFuture=sc,pf.set=tc,pf.months=W,pf._months=Ce,pf.monthsShort=X,pf._monthsShort=De,pf.monthsParse=Y,pf._monthsRegex=Fe,pf.monthsRegex=ba,pf._monthsShortRegex=Ee,pf.monthsShortRegex=aa,pf.week=Qb,pf._week=Xe,pf.firstDayOfYear=Sb,pf.firstDayOfWeek=Rb,pf.weekdays=Wb,pf._weekdays=Ze,pf.weekdaysMin=Yb,pf._weekdaysMin=_e,pf.weekdaysShort=Xb,pf._weekdaysShort=$e,pf.weekdaysParse=Zb,pf.isPM=fc,pf._meridiemParse=af,pf.meridiem=gc,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===r(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=fa("moment.lang is deprecated. Use moment.locale instead.",x),a.langData=fa("moment.langData is deprecated. Use moment.localeData instead.",z);var qf=Math.abs,rf=Lc("ms"),sf=Lc("s"),tf=Lc("m"),uf=Lc("h"),vf=Lc("d"),wf=Lc("w"),xf=Lc("M"),yf=Lc("y"),zf=Nc("milliseconds"),Af=Nc("seconds"),Bf=Nc("minutes"),Cf=Nc("hours"),Df=Nc("days"),Ef=Nc("months"),Ff=Nc("years"),Gf=Math.round,Hf={s:45,m:45,h:22,d:26,M:11},If=Math.abs,Jf=Ia.prototype;Jf.abs=Bc,Jf.add=Dc,Jf.subtract=Ec,Jf.as=Jc,Jf.asMilliseconds=rf,Jf.asSeconds=sf,Jf.asMinutes=tf,Jf.asHours=uf,Jf.asDays=vf,Jf.asWeeks=wf,Jf.asMonths=xf,Jf.asYears=yf,Jf.valueOf=Kc,Jf._bubble=Gc,Jf.get=Mc,Jf.milliseconds=zf,Jf.seconds=Af,Jf.minutes=Bf,Jf.hours=Cf,Jf.days=Df,Jf.weeks=Oc,Jf.months=Ef,Jf.years=Ff,Jf.humanize=Sc,Jf.toISOString=Tc,Jf.toString=Tc,Jf.toJSON=Tc,Jf.locale=ub,Jf.localeData=vb,Jf.toIsoString=fa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Tc),Jf.lang=We,J("X",0,0,"unix"),J("x",0,0,"valueOf"),O("x",le),O("X",oe),S("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),S("x",function(a,b,c){c._d=new Date(r(a))}),a.version="2.11.1",b(Ea),a.fn=hf,a.min=Ga,a.max=Ha,a.now=Qe,a.utc=h,a.unix=kc,a.months=wc,a.isDate=d,a.locale=x,a.invalid=l,a.duration=Za,a.isMoment=p,a.weekdays=yc,a.parseZone=lc,a.localeData=z,a.isDuration=Ja,a.monthsShort=xc,a.weekdaysMin=Ac,a.defineLocale=y,a.weekdaysShort=zc,a.normalizeUnits=B,a.relativeTimeThreshold=Rc,a.prototype=hf;var Kf=a,Lf=(Kf.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(a){return/^nm$/i.test(a)},meridiem:function(a,b,c){return 12>a?c?"vm":"VM":c?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}}),Kf.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Mf={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Nf=(Kf.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return 12>a?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return Mf[a]}).replace(//g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return Lf[a]}).replace(/,/g,"")},week:{dow:6,doy:12}}),Kf.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Of={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Pf=function(a){return 0===a?0:1===a?1:2===a?2:a%100>=3&&10>=a%100?3:a%100>=11?4:5},Qf={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},Rf=function(a){return function(b,c,d,e){var f=Pf(b),g=Qf[a][Pf(b)];return 2===f&&(g=g[c?0:1]),g.replace(/%d/i,b)}},Sf=["  "," "," "," "," "," "," "," "," ","  ","  ","  "],Tf=(Kf.defineLocale("ar",{months:Sf,monthsShort:Sf,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return 12>a?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:Rf("s"),m:Rf("m"),mm:Rf("m"),h:Rf("h"),hh:Rf("h"),d:Rf("d"),dd:Rf("d"),M:Rf("M"),MM:Rf("M"),y:Rf("y"),yy:Rf("y")},preparse:function(a){return a.replace(/\u200f/g,"").replace(/[]/g,function(a){return Of[a]}).replace(//g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return Nf[a]}).replace(/,/g,"")},week:{dow:6,doy:12}}),{1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"}),Uf=(Kf.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniyy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(a){return/^(gndz|axam)$/.test(a)},meridiem:function(a,b,c){return 4>a?"gec":12>a?"shr":17>a?"gndz":"axam"},ordinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(a){if(0===a)return a+"-nc";var b=a%10,c=a%100-b,d=a>=100?100:null;return a+(Tf[b]||Tf[c]||Tf[d])},week:{dow:1,doy:7}}),Kf.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:Vc,mm:Vc,h:Vc,hh:Vc,d:"",dd:Vc,M:"",MM:Vc,y:"",yy:Vc},meridiemParse:/|||/,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a,b,c){return 4>a?"":12>a?"":17>a?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a%10!==2&&a%10!==3||a%100===12||a%100===13?a+"-":a+"-";case"D":return a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-":0===c?a+"-":c>10&&20>c?a+"-":1===b?a+"-":2===b?a+"-":7===b||8===b?a+"-":a+"-"},week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Vf={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Wf=(Kf.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return Vf[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Uf[a]})},meridiemParse:/||||/,isPM:function(a){return/^(||)$/.test(a)},meridiem:function(a,b,c){return 4>a?"":10>a?"":17>a?"":20>a?"":""},week:{dow:0,doy:6}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Xf={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Yf=(Kf.defineLocale("bo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return Xf[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Wf[a]})},meridiemParse:/||||/,isPM:function(a){return/^(||)$/.test(a)},meridiem:function(a,b,c){return 4>a?"":10>a?"":17>a?"":20>a?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:Wc,h:"un eur",hh:"%d eur",d:"un devezh",dd:Wc,M:"ur miz",MM:Wc,y:"ur bloaz",yy:Xc},ordinalParse:/\d{1,2}(a|vet)/,ordinal:function(a){var b=1===a?"a":"vet";return a+b},week:{dow:1,doy:4}}),Kf.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:_c,mm:_c,h:_c,hh:_c,d:"dan",dd:_c,M:"mjesec",MM:_c,y:"godinu",yy:_c},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("ca",{months:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(a,b){var c=1===a?"r":2===a?"n":3===a?"r":4===a?"t":"";return("w"===b||"W"===b)&&(c="a"),a+c},week:{dow:1,doy:4}}),"leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_")),Zf="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),$f=(Kf.defineLocale("cs",{months:Yf,monthsShort:Zf,monthsParse:function(a,b){var c,d=[];for(c=0;12>c;c++)d[c]=new RegExp("^"+a[c]+"$|^"+b[c]+"$","i");return d}(Yf,Zf),shortMonthsParse:function(a){var b,c=[];for(b=0;12>b;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(Zf),longMonthsParse:function(a){var b,c=[];for(b=0;12>b;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(Yf),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:bd,m:bd,mm:bd,h:bd,hh:bd,d:bd,dd:bd,M:bd,MM:bd,y:bd,yy:bd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(a){var b=/$/i.exec(a)?"":/$/i.exec(a)?"":"";return a+b},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}}),Kf.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(a){var b=a,c="",d=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return b>20?c=40===b||50===b||60===b||80===b||100===b?"fed":"ain":b>0&&(c=d[b]),a+c},week:{dow:1,doy:4}}),Kf.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gr kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:cd,mm:"%d Minuten",h:cd,hh:"%d Stunden",d:cd,dd:cd,M:cd,MM:cd,y:cd,yy:cd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:dd,mm:"%d Minuten",h:dd,hh:"%d Stunden",d:dd,dd:dd,M:dd,MM:dd,y:dd,yy:dd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),["","","","","","","","","","","",""]),_f=["","","","","","",""],ag=(Kf.defineLocale("dv",{months:$f,monthsShort:$f,weekdays:_f,weekdaysShort:_f,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return 12>a?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(a){return a.replace(//g,",")},postformat:function(a){return a.replace(/,/g,"")},week:{dow:7,doy:12}}),Kf.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(a,b){return/D/.test(b.substring(0,b.indexOf("MMMM")))?this._monthsGenitiveEl[a.month()]:this._monthsNominativeEl[a.month()]},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(a,b,c){return a>11?c?"":"":c?"":""},isPM:function(a){return""===(a+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(a,b){var c=this._calendarEl[a],d=b&&b.hours();return D(c)&&(c=c.apply(b)),c.replace("{}",d%12===1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),Kf.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY h:mm A",LLLL:"dddd, D MMMM, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Kf.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),Kf.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),Kf.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}}),Kf.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"Dimano_Lundo_Mardo_Merkredo_ado_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_a_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(a){return"p"===a.charAt(0).toLowerCase()},meridiem:function(a,b,c){return a>11?c?"p.t.m.":"P.T.M.":c?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}}),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_")),bg="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),cg=(Kf.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?bg[a.month()]:ag[a.month()]},weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:ed,m:ed,mm:ed,h:ed,hh:ed,d:ed,dd:"%d peva",M:ed,MM:ed,y:ed,yy:ed},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),dg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},eg=(Kf.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(a){return/  /.test(a)},meridiem:function(a,b,c){return 12>a?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(a){return a.replace(/[-]/g,function(a){return dg[a]}).replace(//g,",")},postformat:function(a){return a.replace(/\d/g,function(a){return cg[a]}).replace(/,/g,"")},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}}),"nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" ")),fg=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",eg[7],eg[8],eg[9]],gg=(Kf.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:fd,m:fd,mm:fd,h:fd,hh:fd,d:fd,dd:fd,M:fd,MM:fd,y:fd,yy:fd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")}}),Kf.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")},week:{dow:1,doy:4}}),Kf.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(a){return a+(1===a?"er":"")},week:{dow:1,doy:4}}),"jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_")),hg="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),ig=(Kf.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?hg[a.month()]:gg[a.month()]},weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}}),["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"]),jg=["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],kg=["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],lg=["Did","Dil","Dim","Dic","Dia","Dih","Dis"],mg=["D","Lu","M","Ci","Ar","Ha","Sa"],ng=(Kf.defineLocale("gd",{months:ig,monthsShort:jg,monthsParseExact:!0,weekdays:kg,weekdaysShort:lg,weekdaysMin:mg,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},ordinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(a){var b=1===a?"d":a%10===2?"na":"mh";return a+b},week:{dow:1,doy:4}}),Kf.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuo_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xu._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mrcores_Xoves_Venres_Sbado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mr._Xov._Ven._Sb.".split("_"),weekdaysMin:"Do_Lu_Ma_M_Xo_Ve_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(a){return"uns segundos"===a?"nuns segundos":"en "+a},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:7}}),Kf.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(a){return 2===a?"":a+" "},d:"",dd:function(a){return 2===a?"":a+" "},M:"",MM:function(a){return 2===a?"":a+" "},y:"",yy:function(a){return 2===a?"":a%10===0&&10!==a?a+" ":a+" "}}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),og={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},pg=(Kf.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return og[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return ng[a]})},meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b?4>a?a:a+12:""===b?a:""===b?a>=10?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return 4>a?"":10>a?"":17>a?"":20>a?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:hd,mm:hd,h:hd,hh:hd,d:"dan",dd:hd,M:"mjesec",MM:hd,y:"godinu",yy:hd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),"vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ")),qg=(Kf.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(a){return"u"===a.charAt(1).toLowerCase()},meridiem:function(a,b,c){return 12>a?c===!0?"de":"DE":c===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return jd.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return jd.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:id,m:id,mm:id,h:id,hh:id,d:id,dd:id,M:id,MM:id,y:id,yy:id},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a){return 4>a?"":12>a?"":17>a?"":""},ordinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(a,b){switch(b){case"DDD":case"w":case"W":case"DDDo":return 1===a?a+"-":a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"siang"===b?a>=11?a:a+12:"sore"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"pagi":15>a?"siang":19>a?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),Kf.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:ld,m:ld,mm:ld,h:"klukkustund",hh:ld,d:ld,dd:ld,M:ld,MM:ld,y:ld,yy:ld},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(a){return(/^[0-9].+$/.test(a)?"tra":"in")+" "+a},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahm",LTS:"Ahms",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhm",LLLL:"YYYYMDAhm dddd"},meridiemParse:/|/i,isPM:function(a){return""===a},meridiem:function(a,b,c){return 12>a?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}}),Kf.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(a,b){return 12===a&&(a=0),"enjing"===b?a:"siyang"===b?a>=11?a:a+12:"sonten"===b||"ndalu"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"enjing":15>a?"siyang":19>a?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}}),Kf.defineLocale("ka",{months:{standalone:"___________".split("_"),format:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(a){return/(|||)/.test(a)?a.replace(/$/,""):a+""},past:function(a){return/(||||)/.test(a)?a.replace(/(|)$/," ")://.test(a)?a.replace(/$/," "):void 0},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(a){return 0===a?a:1===a?a+"-":20>a||100>=a&&a%20===0||a%100===0?"-"+a:a+"-"},week:{dow:1,doy:7}}),{0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"}),rg=(Kf.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-(|)/,ordinal:function(a){var b=a%10,c=a>=100?100:null;return a+(qg[a]||qg[b]||qg[c])},week:{dow:1,doy:7}}),Kf.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}}),Kf.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h m",LTS:"A h m s",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h m",LLLL:"YYYY MMMM D dddd A h m"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return 12>a?"":""}}),Kf.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:nd,past:od,s:"e puer Sekonnen",m:md,mm:"%d Minutten",h:md,hh:"%d Stonnen",d:md,dd:"%d Deeg",M:md,MM:"%d Mint",y:md,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return 12>a?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},ordinalParse:/()\d{1,2}/,ordinal:function(a){return""+a}}),{m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"}),sg=(Kf.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_")},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:qd,m:rd,mm:ud,h:rd,hh:ud,d:rd,dd:ud,M:rd,MM:ud,y:rd,yy:ud},ordinalParse:/\d{1,2}-oji/,ordinal:function(a){return a+"-oji"},week:{dow:1,doy:4}}),{m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")}),tg=(Kf.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:yd,m:xd,mm:wd,h:xd,hh:wd,d:xd,dd:wd,M:xd,MM:wd,y:xd,yy:wd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&4>=a?b[1]:b[2]},translate:function(a,b,c){var d=tg.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+tg.correctGrammaticalCase(a,d)}}),ug=(Kf.defineLocale("me",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedjelja","ponedjeljak","utorak","srijeda","etvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sri.","et.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","e","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){var a=["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:tg.translate,mm:tg.translate,h:tg.translate,hh:tg.translate,d:"dan",dd:tg.translate,M:"mjesec",MM:tg.translate,y:"godinu",yy:tg.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(a){var b=a%10,c=a%100;return 0===a?a+"-":0===c?a+"-":c>10&&20>c?a+"-":1===b?a+"-":2===b?a+"-":7===b||8===b?a+"-":a+"-"},week:{dow:1,doy:7}}),Kf.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,isPM:function(a){return/^( ||)$/.test(a)},meridiem:function(a,b,c){return 4>a?"":12>a?"":17>a?" ":20>a?"":""}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),vg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},wg=(Kf.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:zd,m:zd,mm:zd,h:zd,hh:zd,d:zd,dd:zd,M:zd,MM:zd,y:zd,yy:zd},preparse:function(a){return a.replace(/[]/g,function(a){return vg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return ug[a]})},meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b?4>a?a:a+12:""===b?a:""===b?a>=10?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return 4>a?"":10>a?"":17>a?"":20>a?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"tengahari"===b?a>=11?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"pagi":15>a?"tengahari":19>a?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),Kf.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(a,b){return 12===a&&(a=0),"pagi"===b?a:"tengahari"===b?a>=11?a:a+12:"petang"===b||"malam"===b?a+12:void 0},meridiem:function(a,b,c){return 11>a?"pagi":15>a?"tengahari":19>a?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),xg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},yg=(Kf.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(a){return a.replace(/[]/g,function(a){return xg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return wg[a]})},week:{dow:1,doy:4}}),Kf.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),zg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Ag=(Kf.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(a){return a.replace(/[]/g,function(a){return zg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return yg[a]})},meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b?4>a?a:a+12:""===b?a:""===b?a>=10?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return 3>a?"":12>a?"":16>a?"":20>a?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}}),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_")),Bg="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),Cg=(Kf.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(a,b){return/-MMM-/.test(b)?Bg[a.month()]:Ag[a.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(a){return a+(1===a||8===a||a>=20?"ste":"de")},week:{dow:1,doy:4}}),Kf.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),"stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_")),Dg="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),Eg=(Kf.defineLocale("pl",{months:function(a,b){return""===b?"("+Dg[a.month()]+"|"+Cg[a.month()]+")":/D MMMM/.test(b)?Dg[a.month()]:Cg[a.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"nie_pon_wt_r_czw_pt_sb".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:Bd,mm:Bd,h:Bd,hh:Bd,d:"1 dzie",dd:"%d dni",M:"miesic",MM:Bd,y:"rok",yy:Bd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d"}),Kf.defineLocale("pt",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Dom_2_3_4_5_6_Sb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),Kf.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:Cd,h:"o or",hh:Cd,d:"o zi",dd:Cd,M:"o lun",MM:Cd,y:"un an",yy:Cd},week:{dow:1,doy:7}}),[/^/i,/^/i,/^/i,/^/i,/^[|]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]),Fg=(Kf.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"___________".split("_"),standalone:"___________".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:Eg,longMonthsParse:Eg,shortMonthsParse:Eg,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},lastWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:Ed,mm:Ed,h:"",hh:Ed,d:"",dd:Ed,M:"",MM:Ed,y:"",yy:Ed},meridiemParse:/|||/i,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a,b,c){return 4>a?"":12>a?"":17>a?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":return a+"-";case"D":return a+"-";case"w":case"W":return a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},ordinalParse:/\d{1,2} /,ordinal:function(a){return a+" "},meridiem:function(a,b,c){return a>11?c?"..":" ":c?"..":" "}}),"janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_")),Gg="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_"),Hg=(Kf.defineLocale("sk",{months:Fg,monthsShort:Gg,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:Gd,m:Gd,mm:Gd,h:Gd,hh:Gd,d:Gd,dd:Gd,M:Gd,MM:Gd,y:Gd,yy:Gd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:Hd,m:Hd,mm:Hd,h:Hd,hh:Hd,d:Hd,dd:Hd,M:Hd,MM:Hd,y:Hd,yy:Hd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),meridiemParse:/PD|MD/,isPM:function(a){return"M"===a.charAt(0)},meridiem:function(a,b,c){return 12>a?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&4>=a?b[1]:b[2]},translate:function(a,b,c){var d=Hg.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+Hg.correctGrammaticalCase(a,d)}}),Ig=(Kf.defineLocale("sr-cyrl",{months:["","","","","","","","","","","",""],monthsShort:[".",".",".",".","","","",".",".",".",".","."],weekdays:["","","","","","",""],weekdaysShort:[".",".",".",".",".",".","."],weekdaysMin:["","","","","","",""],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){var a=["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:Hg.translate,mm:Hg.translate,h:Hg.translate,hh:Hg.translate,d:"",dd:Hg.translate,M:"",MM:Hg.translate,y:"",yy:Hg.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),{words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(a,b){return 1===a?b[0]:a>=2&&4>=a?b[1]:b[2]},translate:function(a,b,c){var d=Ig.words[c];return 1===c.length?b?d[0]:d[1]:a+" "+Ig.correctGrammaticalCase(a,d)}}),Jg=(Kf.defineLocale("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","etvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","et.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","e","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){var a=["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"];return a[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:Ig.translate,mm:Ig.translate,h:Ig.translate,hh:Ig.translate,d:"dan",dd:Ig.translate,M:"mesec",MM:Ig.translate,y:"godinu",yy:Ig.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),Kf.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"e":1===b?"a":2===b?"a":"e";return a+c},week:{dow:1,doy:4}}),Kf.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}}),{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""}),Kg={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},Lg=(Kf.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:function(a){return a+""},preparse:function(a){return a.replace(/[]/g,function(a){return Kg[a]})},postformat:function(a){return a.replace(/\d/g,function(a){return Jg[a]})},meridiemParse:/|||||/,meridiem:function(a,b,c){return 2>a?" ":6>a?" ":10>a?" ":14>a?" ":18>a?" ":22>a?" ":" "},meridiemHour:function(a,b){return 12===a&&(a=0),""===b?2>a?a:a+12:""===b||""===b?a:""===b&&a>=10?a:a+12},week:{dow:0,doy:6}}),Kf.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b?4>a?a:a+12:""===b?a:""===b?a>=10?a:a+12:""===b?a+12:void 0},meridiem:function(a,b,c){return 4>a?"":10>a?"":17>a?"":20>a?"":""},week:{dow:0,doy:6}}),Kf.defineLocale("th",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),longDateFormat:{LT:"H  m ",LTS:"H  m  s ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H  m ",LLLL:"dddd D MMMM YYYY  H  m "},meridiemParse:/|/,isPM:function(a){return""===a},meridiem:function(a,b,c){return 12>a?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}}),Kf.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}}),"pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_")),Mg=(Kf.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:Id,past:Jd,s:"puS lup",m:"wa tup",mm:Kd,h:"wa rep",hh:Kd,d:"wa jaj",dd:Kd,M:"wa jar",MM:Kd,y:"wa DIS",yy:Kd},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"}),Ng=(Kf.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinalParse:/\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(a){if(0===a)return a+"'nc";var b=a%10,c=a%100-b,d=a>=100?100:null;return a+(Mg[b]||Mg[c]||Mg[d])},week:{dow:1,doy:7}}),Kf.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiem:function(a,b,c){return a>11?c?"d'o":"D'O":c?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:Md,m:Md,mm:Md,h:Md,hh:Md,d:Md,dd:Md,M:Md,MM:Md,y:Md,yy:Md},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),Kf.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}}),Kf.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}}),Kf.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:Pd,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:Qd("[ "),nextDay:Qd("[ "),lastDay:Qd("[ "),nextWeek:Qd("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return Qd("[] dddd [").call(this);case 1:case 2:case 4:return Qd("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:Od,mm:Od,h:"",hh:Od,d:"",dd:Od,M:"",MM:Od,y:"",yy:Od},meridiemParse:/|||/,isPM:function(a){return/^(|)$/.test(a)},meridiem:function(a,b,c){return 4>a?"":12>a?"":17>a?"":""},ordinalParse:/\d{1,2}-(|)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":case"w":case"W":return a+"-";case"D":return a+"-";default:return a}},week:{dow:1,doy:7}}),Kf.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}}),Kf.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},ordinalParse:/\d{1,2}/,ordinal:function(a){return a},week:{dow:1,doy:4}}),Kf.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYY-MM-DD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/|||||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b||""===b||""===b?a:""===b||""===b?a+12:a>=11?a:a+12},meridiem:function(a,b,c){var d=100*a+b;return 600>d?"":900>d?"":1130>d?"":1230>d?"":1800>d?"":""},calendar:{sameDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},lastDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextWeek:function(){var a,b;return a=Kf().startOf("week"),b=this.unix()-a.unix()>=604800?"[]":"[]",0===this.minutes()?b+"dddAh":b+"dddAhmm"},lastWeek:function(){var a,b;return a=Kf().startOf("week"),b=this.unix()<a.unix()?"[]":"[]",0===this.minutes()?b+"dddAh":b+"dddAhmm"},sameElse:"LL"},ordinalParse:/\d{1,2}(||)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"";case"M":return a+"";case"w":case"W":return a+"";default:return a}},relativeTime:{future:"%s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}}),Kf.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDAhmm",LLLL:"YYYYMMMDddddAhmm",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDAhmm",llll:"YYYYMMMDddddAhmm"},meridiemParse:/||||/,meridiemHour:function(a,b){return 12===a&&(a=0),""===b||""===b?a:""===b?a>=11?a:a+12:""===b||""===b?a+12:void 0},meridiem:function(a,b,c){var d=100*a+b;return 900>d?"":1130>d?"":1230>d?"":1800>d?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(||)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"";case"M":return a+"";case"w":case"W":return a+"";default:return a}},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"}}),Kf);return Ng.locale("en"),Ng});String.prototype._formatRegExp=/\{(\d+)\}/gm;String.prototype.format=function(){var replacements=arguments;return this.replace(this._formatRegExp,function(string,match){return replacements[parseInt(match)]})};String.prototype.endsWith=function(suffix){return this.indexOf(suffix,this.length-suffix.length)!==-1};String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};String.prototype.toShortName=function(){var name=jQuery.trim(this);var names=name.split(" ");if(names.length==1){return name}var result=[];for(var i=0;i<names.length-1;i++){result.push(names[i].charAt(0)+". ")}result.push(names[names.length-1]);return result.join("")};String.prototype.bool=function(){return/^true$/i.test(this)};String.prototype.capitaliseFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.lowercaseFirstLetter=function(){return this.charAt(0).toLowerCase()+this.slice(1)};String.prototype.removeLowercaseLetters=function(){return this.replace(/[^A-Z%]/g,"")};String.prototype.insertSpacesBetweenWords=function(){return this.replace(/([a-z])([A-Z])/g,"$1 $2")};String.prototype.containsLowercaseLetters=function(){return/[a-z]/.exec(this)!==null};String.prototype.removeWhiteSpace=function(){return this.replace(/ /g,"")};function areStringsTooSimilar(str1,str2){return str1.toLowerCase().removeWhiteSpace()===str2.toLowerCase().removeWhiteSpace()}String.prototype.replaceAll=function(search,replacement){var target=this;return target.replace(new RegExp(search,"g"),replacement)};define("stringext",function(){});(function(factory){if(typeof define==="function"&&define.amd){define("jquerycookie",["jquery"],factory)}else if(typeof exports==="object"){module.exports=factory(require("jquery"))}else{factory(jQuery)}})(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{s=decodeURIComponent(s.replace(pluses," "));return config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date;t.setMilliseconds(t.getMilliseconds()+days*864e5)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}var result=key?undefined:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;for(;i<l;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key===name){result=read(cookie,value);break}if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie}}return result};config.defaults={};$.removeCookie=function(key,options){$.cookie(key,"",$.extend({},options,{expires:-1}));return!$.cookie(key)}});!function(t){"function"==typeof define&&define.amd?define("jqueryui",["jquery"],t):t(jQuery)}(function(b){b.ui=b.ui||{};b.ui.version="1.12.1";var s,i=0,o=Array.prototype.slice;b.cleanData=(s=b.cleanData,function(t){for(var e,i,a=0;null!=(i=t[a]);a++)try{(e=b._data(i,"events"))&&e.remove&&b(i).triggerHandler("remove")}catch(t){}s(t)}),b.widget=function(t,i,e){var a,s,n,r={},o=t.split(".")[0],l=o+"-"+(t=t.split(".")[1]);return e||(e=i,i=b.Widget),b.isArray(e)&&(e=b.extend.apply(null,[{}].concat(e))),b.expr[":"][l.toLowerCase()]=function(t){return!!b.data(t,l)},b[o]=b[o]||{},a=b[o][t],s=b[o][t]=function(t,e){if(!this._createWidget)return new s(t,e);arguments.length&&this._createWidget(t,e)},b.extend(s,a,{version:e.version,_proto:b.extend({},e),_childConstructors:[]}),(n=new i).options=b.widget.extend({},n.options),b.each(e,function(e,a){function s(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}b.isFunction(a)?r[e]=function(){var t,e=this._super,i=this._superApply;return this._super=s,this._superApply=n,t=a.apply(this,arguments),this._super=e,this._superApply=i,t}:r[e]=a}),s.prototype=b.widget.extend(n,{widgetEventPrefix:a&&n.widgetEventPrefix||t},r,{constructor:s,namespace:o,widgetName:t,widgetFullName:l}),a?(b.each(a._childConstructors,function(t,e){var i=e.prototype;b.widget(i.namespace+"."+i.widgetName,s,e._proto)}),delete a._childConstructors):i._childConstructors.push(s),b.widget.bridge(t,s),s},b.widget.extend=function(t){for(var e,i,a=o.call(arguments,1),s=0,n=a.length;s<n;s++)for(e in a[s])i=a[s][e],a[s].hasOwnProperty(e)&&void 0!==i&&(b.isPlainObject(i)?t[e]=b.isPlainObject(t[e])?b.widget.extend({},t[e],i):b.widget.extend({},i):t[e]=i);return t},b.widget.bridge=function(n,e){var r=e.prototype.widgetFullName||n;b.fn[n]=function(i){var t="string"==typeof i,a=o.call(arguments,1),s=this;return t?this.length||"instance"!==i?this.each(function(){var t,e=b.data(this,r);return"instance"===i?(s=e,!1):e?b.isFunction(e[i])&&"_"!==i.charAt(0)?(t=e[i].apply(e,a))!==e&&void 0!==t?(s=t&&t.jquery?s.pushStack(t.get()):t,!1):void 0:b.error("no such method '"+i+"' for "+n+" widget instance"):b.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+i+"'")}):s=void 0:(a.length&&(i=b.widget.extend.apply(null,[i].concat(a))),this.each(function(){var t=b.data(this,r);t?(t.option(i||{}),t._init&&t._init()):b.data(this,r,new e(i,this))})),s}},b.Widget=function(){},b.Widget._childConstructors=[],b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=b(e||this.defaultElement||this)[0],this.element=b(e),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=b(),this.hoverable=b(),this.focusable=b(),this.classesElementLookup={},e!==this&&(b.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=b(e.style?e.ownerDocument:e.document||e),this.window=b(this.document[0].defaultView||this.document[0].parentWindow)),this.options=b.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){var i=this;this._destroy(),b.each(this.classesElementLookup,function(t,e){i._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:b.noop,widget:function(){return this.element},option:function(t,e){var i,a,s,n=t;if(0===arguments.length)return b.widget.extend({},this.options);if("string"==typeof t)if(n={},t=(i=t.split(".")).shift(),i.length){for(a=n[t]=b.widget.extend({},this.options[t]),s=0;s<i.length-1;s++)a[i[s]]=a[i[s]]||{},a=a[i[s]];if(t=i.pop(),1===arguments.length)return void 0===a[t]?null:a[t];a[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];n[t]=e}return this._setOptions(n),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,i,a;for(e in t)a=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&a&&a.length&&(i=b(a.get()),this._removeClass(a,e),i.addClass(this._classes({element:i,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(s){var n=[],r=this;function t(t,e){for(var i,a=0;a<t.length;a++)i=r.classesElementLookup[t[a]]||b(),i=s.add?b(b.unique(i.get().concat(s.element.get()))):b(i.not(s.element).get()),r.classesElementLookup[t[a]]=i,n.push(t[a]),e&&s.classes[t[a]]&&n.push(s.classes[t[a]])}return s=b.extend({element:this.element,classes:this.options.classes||{}},s),this._on(s.element,{remove:"_untrackClassesElement"}),s.keys&&t(s.keys.match(/\S+/g)||[],!0),s.extra&&t(s.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(i){var a=this;b.each(a.classesElementLookup,function(t,e){-1!==b.inArray(i.target,e)&&(a.classesElementLookup[t]=b(e.not(i.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,a){a="boolean"==typeof a?a:i;var s="string"==typeof t||null===t,t={extra:s?e:i,keys:s?t:e,element:s?this.element:t,add:a};return t.element.toggleClass(this._classes(t),a),this},_on:function(s,n,t){var r,o=this;"boolean"!=typeof s&&(t=n,n=s,s=!1),t?(n=r=b(n),this.bindings=this.bindings.add(n)):(t=n,n=this.element,r=this.widget()),b.each(t,function(t,e){function i(){if(s||!0!==o.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"==typeof e?o[e]:e).apply(o,arguments)}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||b.guid++);var a=t.match(/^([\w:-]*)\s*(.*)$/),t=a[1]+o.eventNamespace,a=a[2];a?r.on(t,a,i):n.on(t,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=b(this.bindings.not(t).get()),this.focusable=b(this.focusable.not(t).get()),this.hoverable=b(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(b(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(b(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(b(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(b(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,i){var a,s,n=this.options[t];if(i=i||{},(e=b.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],s=e.originalEvent)for(a in s)a in e||(e[a]=s[a]);return this.element.trigger(e,i),!(b.isFunction(n)&&!1===n.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},b.each({show:"fadeIn",hide:"fadeOut"},function(n,r){b.Widget.prototype["_"+n]=function(e,t,i){var a;"string"==typeof t&&(t={effect:t});var s=t?!0!==t&&"number"!=typeof t&&t.effect||r:n;"number"==typeof(t=t||{})&&(t={duration:t}),a=!b.isEmptyObject(t),t.complete=i,t.delay&&e.delay(t.delay),a&&b.effects&&b.effects.effect[s]?e[n](t):s!==n&&e[s]?e[s](t.duration,t.easing,i):e.queue(function(t){b(this)[n](),i&&i.call(e[0]),t()})}});var n;b.widget,b.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};function t(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},b.extend(this._defaults,this.regional[""]),this.regional.en=b.extend(!0,{},this.regional[""]),this.regional["en-US"]=b.extend(!0,{},this.regional.en),this.dpDiv=a(b("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",e,function(){b(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&b(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&b(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",e,r)}function r(){b.datepicker._isDisabledDatepicker((n.inline?n.dpDiv.parent():n.input)[0])||(b(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),b(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&b(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&b(this).addClass("ui-datepicker-next-hover"))}function l(t,e){for(var i in b.extend(t,e),e)null==e[i]&&(t[i]=e[i]);return t}b.extend(b.ui,{datepicker:{version:"1.12.1"}}),b.extend(t.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return l(this._defaults,t||{}),this},_attachDatepicker:function(t,e){var i,a=t.nodeName.toLowerCase(),s="div"===a||"span"===a;t.id||(this.uuid+=1,t.id="dp"+this.uuid),(i=this._newInst(b(t),s)).settings=b.extend({},e||{}),"input"===a?this._connectDatepicker(t,i):s&&this._inlineDatepicker(t,i)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?a(b("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,e){var i=b(t);e.append=b([]),e.trigger=b([]),i.hasClass(this.markerClassName)||(this._attachments(i,e),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(e),b.data(t,"datepicker",e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i,a=this._get(e,"appendText"),s=this._get(e,"isRTL");e.append&&e.append.remove(),a&&(e.append=b("<span class='"+this._appendClass+"'>"+a+"</span>"),t[s?"before":"after"](e.append)),t.off("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),"focus"!==(i=this._get(e,"showOn"))&&"both"!==i||t.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(a=this._get(e,"buttonText"),i=this._get(e,"buttonImage"),e.trigger=b(this._get(e,"buttonImageOnly")?b("<img/>").addClass(this._triggerClass).attr({src:i,alt:a,title:a}):b("<button type='button'></button>").addClass(this._triggerClass).html(i?b("<img/>").attr({src:i,alt:a,title:a}):a)),t[s?"before":"after"](e.trigger),e.trigger.on("click",function(){return b.datepicker._datepickerShowing&&b.datepicker._lastInput===t[0]?b.datepicker._hideDatepicker():(b.datepicker._datepickerShowing&&b.datepicker._lastInput!==t[0]&&b.datepicker._hideDatepicker(),b.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){var e,i,a,s,n,r;this._get(t,"autoSize")&&!t.inline&&(n=new Date(2009,11,20),(r=this._get(t,"dateFormat")).match(/[DM]/)&&(e=function(t){for(s=a=i=0;s<t.length;s++)t[s].length>i&&(i=t[s].length,a=s);return a},n.setMonth(e(this._get(t,r.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(e(this._get(t,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),t.input.attr("size",this._formatDate(t,n).length))},_inlineDatepicker:function(t,e){var i=b(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(e.dpDiv),b.data(t,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,a,s){var n,r=this._dialogInst;return r||(this.uuid+=1,n="dp"+this.uuid,this._dialogInput=b("<input type='text' id='"+n+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),b("body").append(this._dialogInput),(r=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},b.data(this._dialogInput[0],"datepicker",r)),l(r.settings,a||{}),e=e&&e.constructor===Date?this._formatDate(r,e):e,this._dialogInput.val(e),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(n=document.documentElement.clientWidth,a=document.documentElement.clientHeight,e=document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[n/2-100+e,a/2-150+s]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),r.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),b.blockUI&&b.blockUI(this.dpDiv),b.data(this._dialogInput[0],"datepicker",r),this},_destroyDatepicker:function(t){var e,i=b(t),a=b.data(t,"datepicker");i.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),b.removeData(t,"datepicker"),"input"===e?(a.append.remove(),a.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==e&&"span"!==e||i.removeClass(this.markerClassName).empty(),n===a&&(n=null))},_enableDatepicker:function(e){var t,i=b(e),a=b.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==t&&"span"!==t||((i=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=b.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var t,i=b(e),a=b.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==t&&"span"!==t||((i=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=b.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(t){try{return b.data(t,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var a,s,n,r,o=this._getInst(t);if(2===arguments.length&&"string"==typeof e)return"defaults"===e?b.extend({},b.datepicker._defaults):o?"all"===e?b.extend({},o.settings):this._get(o,e):null;a=e||{},"string"==typeof e&&((a={})[e]=i),o&&(this._curInst===o&&this._hideDatepicker(),s=this._getDateDatepicker(t,!0),n=this._getMinMaxDate(o,"min"),r=this._getMinMaxDate(o,"max"),l(o.settings,a),null!==n&&void 0!==a.dateFormat&&void 0===a.minDate&&(o.settings.minDate=this._formatDate(o,n)),null!==r&&void 0!==a.dateFormat&&void 0===a.maxDate&&(o.settings.maxDate=this._formatDate(o,r)),"disabled"in a&&(a.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(b(t),o),this._autoSize(o),this._setDate(o,s),this._updateAlternate(o),this._updateDatepicker(o))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){t=this._getInst(t);t&&this._updateDatepicker(t)},_setDateDatepicker:function(t,e){t=this._getInst(t);t&&(this._setDate(t,e),this._updateDatepicker(t),this._updateAlternate(t))},_getDateDatepicker:function(t,e){t=this._getInst(t);return t&&!t.inline&&this._setDateFromField(t,e),t?this._getDate(t):null},_doKeyDown:function(t){var e,i,a=b.datepicker._getInst(t.target),s=!0,n=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,b.datepicker._datepickerShowing)switch(t.keyCode){case 9:b.datepicker._hideDatepicker(),s=!1;break;case 13:return(i=b("td."+b.datepicker._dayOverClass+":not(."+b.datepicker._currentClass+")",a.dpDiv))[0]&&b.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,i[0]),(e=b.datepicker._get(a,"onSelect"))?(i=b.datepicker._formatDate(a),e.apply(a.input?a.input[0]:null,[i,a])):b.datepicker._hideDatepicker(),!1;case 27:b.datepicker._hideDatepicker();break;case 33:b.datepicker._adjustDate(t.target,t.ctrlKey?-b.datepicker._get(a,"stepBigMonths"):-b.datepicker._get(a,"stepMonths"),"M");break;case 34:b.datepicker._adjustDate(t.target,t.ctrlKey?+b.datepicker._get(a,"stepBigMonths"):+b.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&b.datepicker._clearDate(t.target),s=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&b.datepicker._gotoToday(t.target),s=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&b.datepicker._adjustDate(t.target,n?1:-1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&b.datepicker._adjustDate(t.target,t.ctrlKey?-b.datepicker._get(a,"stepBigMonths"):-b.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&b.datepicker._adjustDate(t.target,-7,"D"),s=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&b.datepicker._adjustDate(t.target,n?-1:1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&b.datepicker._adjustDate(t.target,t.ctrlKey?+b.datepicker._get(a,"stepBigMonths"):+b.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&b.datepicker._adjustDate(t.target,7,"D"),s=t.ctrlKey||t.metaKey;break;default:s=!1}else 36===t.keyCode&&t.ctrlKey?b.datepicker._showDatepicker(this):s=!1;s&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,i=b.datepicker._getInst(t.target);if(b.datepicker._get(i,"constrainInput"))return e=b.datepicker._possibleChars(b.datepicker._get(i,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||i<" "||!e||-1<e.indexOf(i)},_doKeyUp:function(t){var e=b.datepicker._getInst(t.target);if(e.input.val()!==e.lastVal)try{b.datepicker.parseDate(b.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,b.datepicker._getFormatConfig(e))&&(b.datepicker._setDateFromField(e),b.datepicker._updateAlternate(e),b.datepicker._updateDatepicker(e))}catch(t){}return!0},_showDatepicker:function(t){var e,i,a,s;"input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=b("input",t.parentNode)[0]),b.datepicker._isDisabledDatepicker(t)||b.datepicker._lastInput===t||(s=b.datepicker._getInst(t),b.datepicker._curInst&&b.datepicker._curInst!==s&&(b.datepicker._curInst.dpDiv.stop(!0,!0),s&&b.datepicker._datepickerShowing&&b.datepicker._hideDatepicker(b.datepicker._curInst.input[0])),!1!==(i=(a=b.datepicker._get(s,"beforeShow"))?a.apply(t,[t,s]):{})&&(l(s.settings,i),s.lastVal=null,b.datepicker._lastInput=t,b.datepicker._setDateFromField(s),b.datepicker._inDialog&&(t.value=""),b.datepicker._pos||(b.datepicker._pos=b.datepicker._findPos(t),b.datepicker._pos[1]+=t.offsetHeight),e=!1,b(t).parents().each(function(){return!(e|="fixed"===b(this).css("position"))}),a={left:b.datepicker._pos[0],top:b.datepicker._pos[1]},b.datepicker._pos=null,s.dpDiv.empty(),s.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),b.datepicker._updateDatepicker(s),a=b.datepicker._checkOffset(s,a,e),s.dpDiv.css({position:b.datepicker._inDialog&&b.blockUI?"static":e?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),s.inline||(i=b.datepicker._get(s,"showAnim"),a=b.datepicker._get(s,"duration"),s.dpDiv.css("z-index",function(t){for(var e,i;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}(b(t))+1),b.datepicker._datepickerShowing=!0,b.effects&&b.effects.effect[i]?s.dpDiv.show(i,b.datepicker._get(s,"showOptions"),a):s.dpDiv[i||"show"](i?a:null),b.datepicker._shouldFocusInput(s)&&s.input.trigger("focus"),b.datepicker._curInst=s)))},_updateDatepicker:function(t){this.maxRows=4,(n=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var e,i=this._getNumberOfMonths(t),a=i[1],s=t.dpDiv.find("."+this._dayOverClass+" a");0<s.length&&r.apply(s.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<a&&t.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===b.datepicker._curInst&&b.datepicker._datepickerShowing&&b.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(t,e,i){var a=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),n=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,o=document.documentElement.clientWidth+(i?0:b(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:b(document).scrollTop());return e.left-=this._get(t,"isRTL")?a-n:0,e.left-=i&&e.left===t.input.offset().left?b(document).scrollLeft():0,e.top-=i&&e.top===t.input.offset().top+r?b(document).scrollTop():0,e.left-=Math.min(e.left,e.left+a>o&&a<o?Math.abs(e.left+a-o):0),e.top-=Math.min(e.top,e.top+s>l&&s<l?Math.abs(s+r):0),e},_findPos:function(t){for(var e=this._getInst(t),i=this._get(e,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||b.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return[(e=b(t).offset()).left,e.top]},_hideDatepicker:function(t){var e,i,a=this._curInst;!a||t&&a!==b.data(t,"datepicker")||this._datepickerShowing&&(e=this._get(a,"showAnim"),i=this._get(a,"duration"),t=function(){b.datepicker._tidyDialog(a)},b.effects&&(b.effects.effect[e]||b.effects[e])?a.dpDiv.hide(e,b.datepicker._get(a,"showOptions"),i,t):a.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?i:null,t),e||t(),this._datepickerShowing=!1,(t=this._get(a,"onClose"))&&t.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),b.blockUI&&(b.unblockUI(),b("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){var e;b.datepicker._curInst&&(e=b(t.target),t=b.datepicker._getInst(e[0]),(e[0].id===b.datepicker._mainDivId||0!==e.parents("#"+b.datepicker._mainDivId).length||e.hasClass(b.datepicker.markerClassName)||e.closest("."+b.datepicker._triggerClass).length||!b.datepicker._datepickerShowing||b.datepicker._inDialog&&b.blockUI)&&(!e.hasClass(b.datepicker.markerClassName)||b.datepicker._curInst===t)||b.datepicker._hideDatepicker())},_adjustDate:function(t,e,i){var a=b(t),t=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(t,e+("M"===i?this._get(t,"showCurrentAtPos"):0),i),this._updateDatepicker(t))},_gotoToday:function(t){var e=b(t),i=this._getInst(e[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(t=new Date,i.selectedDay=t.getDate(),i.drawMonth=i.selectedMonth=t.getMonth(),i.drawYear=i.selectedYear=t.getFullYear()),this._notifyChange(i),this._adjustDate(e)},_selectMonthYear:function(t,e,i){var a=b(t),t=this._getInst(a[0]);t["selected"+("M"===i?"Month":"Year")]=t["draw"+("M"===i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(t),this._adjustDate(a)},_selectDay:function(t,e,i,a){var s=b(t);b(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||((s=this._getInst(s[0])).selectedDay=s.currentDay=b("a",a).html(),s.selectedMonth=s.currentMonth=e,s.selectedYear=s.currentYear=i,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){t=b(t);this._selectDate(t,"")},_selectDate:function(t,e){var i=b(t),t=this._getInst(i[0]);e=null!=e?e:this._formatDate(t),t.input&&t.input.val(e),this._updateAlternate(t),(i=this._get(t,"onSelect"))?i.apply(t.input?t.input[0]:null,[e,t]):t.input&&t.input.trigger("change"),t.inline?this._updateDatepicker(t):(this._hideDatepicker(),this._lastInput=t.input[0],"object"!=typeof t.input[0]&&t.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var e,i,a=this._get(t,"altField");a&&(e=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),t=this.formatDate(e,i,this._getFormatConfig(t)),b(a).val(t))},noWeekends:function(t){t=t.getDay();return[0<t&&t<6,""]},iso8601Week:function(t){var e=new Date(t.getTime());return e.setDate(e.getDate()+4-(e.getDay()||7)),t=e.getTime(),e.setMonth(0),e.setDate(1),Math.floor(Math.round((t-e)/864e5)/7)+1},parseDate:function(e,s,t){if(null==e||null==s)throw"Invalid arguments";if(""===(s="object"==typeof s?s.toString():s+""))return null;function n(t){return(t=D+1<e.length&&e.charAt(D+1)===t)&&D++,t}function i(t){var e=n(t),e="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,e=new RegExp("^\\d{"+("y"===t?e:1)+","+e+"}");if(!(e=s.substring(h).match(e)))throw"Missing number at position "+h;return h+=e[0].length,parseInt(e[0],10)}function a(t,e,i){var a=-1,e=b.map(n(t)?i:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(b.each(e,function(t,e){var i=e[1];if(s.substr(h,i.length).toLowerCase()===i.toLowerCase())return a=e[0],h+=i.length,!1}),-1!==a)return a+1;throw"Unknown name at position "+h}function r(){if(s.charAt(h)!==e.charAt(D))throw"Unexpected literal at position "+h;h++}for(var o,l,u,h=0,c=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,p=(t?t.dayNames:null)||this._defaults.dayNames,f=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,g=(t?t.monthNames:null)||this._defaults.monthNames,m=-1,_=-1,v=-1,y=-1,k=!1,D=0;D<e.length;D++)if(k)"'"!==e.charAt(D)||n("'")?r():k=!1;else switch(e.charAt(D)){case"d":v=i("d");break;case"D":a("D",d,p);break;case"o":y=i("o");break;case"m":_=i("m");break;case"M":_=a("M",f,g);break;case"y":m=i("y");break;case"@":m=(u=new Date(i("@"))).getFullYear(),_=u.getMonth()+1,v=u.getDate();break;case"!":m=(u=new Date((i("!")-this._ticksTo1970)/1e4)).getFullYear(),_=u.getMonth()+1,v=u.getDate();break;case"'":n("'")?r():k=!0;break;default:r()}if(h<s.length&&(l=s.substr(h),!/^\s+/.test(l)))throw"Extra/unparsed characters found in date: "+l;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=c?0:-100)),-1<y)for(_=1,v=y;;){if(v<=(o=this._getDaysInMonth(m,_-1)))break;_++,v-=o}if((u=this._daylightSavingAdjust(new Date(m,_-1,v))).getFullYear()!==m||u.getMonth()+1!==_||u.getDate()!==v)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";function s(t){return(t=r+1<e.length&&e.charAt(r+1)===t)&&r++,t}function a(t,e,i){var a=""+e;if(s(t))for(;a.length<i;)a="0"+a;return a}function n(t,e,i,a){return(s(t)?a:i)[e]}var r,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,l=(i?i.dayNames:null)||this._defaults.dayNames,u=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,h=(i?i.monthNames:null)||this._defaults.monthNames,c="",d=!1;if(t)for(r=0;r<e.length;r++)if(d)"'"!==e.charAt(r)||s("'")?c+=e.charAt(r):d=!1;else switch(e.charAt(r)){case"d":c+=a("d",t.getDate(),2);break;case"D":c+=n("D",t.getDay(),o,l);break;case"o":c+=a("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=a("m",t.getMonth()+1,2);break;case"M":c+=n("M",t.getMonth(),u,h);break;case"y":c+=s("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=1e4*t.getTime()+this._ticksTo1970;break;case"'":s("'")?c+="'":d=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){function t(t){return(t=s+1<e.length&&e.charAt(s+1)===t)&&s++,t}for(var i="",a=!1,s=0;s<e.length;s++)if(a)"'"!==e.charAt(s)||t("'")?i+=e.charAt(s):a=!1;else switch(e.charAt(s)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":t("'")?i+="'":a=!0;break;default:i+=e.charAt(s)}return i},_get:function(t,e){return(void 0!==t.settings[e]?t.settings:this._defaults)[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),a=t.lastVal=t.input?t.input.val():null,s=this._getDefaultDate(t),n=s,r=this._getFormatConfig(t);try{n=this.parseDate(i,a,r)||s}catch(t){a=e?"":a}t.selectedDay=n.getDate(),t.drawMonth=t.selectedMonth=n.getMonth(),t.drawYear=t.selectedYear=n.getFullYear(),t.currentDay=a?n.getDate():0,t.currentMonth=a?n.getMonth():0,t.currentYear=a?n.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(o,t,e){var i,a,t=null==t||""===t?e:"string"==typeof t?function(t){try{return b.datepicker.parseDate(b.datepicker._get(o,"dateFormat"),t,b.datepicker._getFormatConfig(o))}catch(t){}for(var e=(t.toLowerCase().match(/^c/)?b.datepicker._getDate(o):null)||new Date,i=e.getFullYear(),a=e.getMonth(),s=e.getDate(),n=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=n.exec(t);r;){switch(r[2]||"d"){case"d":case"D":s+=parseInt(r[1],10);break;case"w":case"W":s+=7*parseInt(r[1],10);break;case"m":case"M":a+=parseInt(r[1],10),s=Math.min(s,b.datepicker._getDaysInMonth(i,a));break;case"y":case"Y":i+=parseInt(r[1],10),s=Math.min(s,b.datepicker._getDaysInMonth(i,a))}r=n.exec(t)}return new Date(i,a,s)}(t):"number"==typeof t?isNaN(t)?e:(i=t,(a=new Date).setDate(a.getDate()+i),a):new Date(t.getTime());return(t=t&&"Invalid Date"===t.toString()?e:t)&&(t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)),this._daylightSavingAdjust(t)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var a=!e,s=t.selectedMonth,n=t.selectedYear,e=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=e.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=e.getMonth(),t.drawYear=t.selectedYear=t.currentYear=e.getFullYear(),s===t.selectedMonth&&n===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(a?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){b.datepicker._adjustDate(i,-e,"M")},next:function(){b.datepicker._adjustDate(i,+e,"M")},hide:function(){b.datepicker._hideDatepicker()},today:function(){b.datepicker._gotoToday(i)},selectDay:function(){return b.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return b.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return b.datepicker._selectMonthYear(i,this,"Y"),!1}};b(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,a,s,n,r,o,l,u,h,c,d,p,f,g,m,_,v,y,k,D,b,w,M,x,C,I,S,N,F,T,A=new Date,O=this._daylightSavingAdjust(new Date(A.getFullYear(),A.getMonth(),A.getDate())),Y=this._get(t,"isRTL"),E=this._get(t,"showButtonPanel"),j=this._get(t,"hideIfNoPrevNext"),W=this._get(t,"navigationAsDateFormat"),P=this._getNumberOfMonths(t),K=this._get(t,"showCurrentAtPos"),A=this._get(t,"stepMonths"),H=1!==P[0]||1!==P[1],R=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),L=this._getMinMaxDate(t,"min"),V=this._getMinMaxDate(t,"max"),U=t.drawMonth-K,z=t.drawYear;if(U<0&&(U+=12,z--),V)for(e=this._daylightSavingAdjust(new Date(V.getFullYear(),V.getMonth()-P[0]*P[1]+1,V.getDate())),e=L&&e<L?L:e;this._daylightSavingAdjust(new Date(z,U,1))>e;)--U<0&&(U=11,z--);for(t.drawMonth=U,t.drawYear=z,K=this._get(t,"prevText"),K=W?this.formatDate(K,this._daylightSavingAdjust(new Date(z,U-A,1)),this._getFormatConfig(t)):K,i=this._canAdjustMonth(t,-1,z,U)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+K+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+K+"</span></a>":j?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+K+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+K+"</span></a>",K=this._get(t,"nextText"),K=W?this.formatDate(K,this._daylightSavingAdjust(new Date(z,U+A,1)),this._getFormatConfig(t)):K,a=this._canAdjustMonth(t,1,z,U)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+K+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+K+"</span></a>":j?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+K+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+K+"</span></a>",j=this._get(t,"currentText"),K=this._get(t,"gotoCurrent")&&t.currentDay?R:O,j=W?this.formatDate(j,K,this._getFormatConfig(t)):j,W=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",W=E?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?W:"")+(this._isInRange(t,K)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+j+"</button>":"")+(Y?"":W)+"</div>":"",s=parseInt(this._get(t,"firstDay"),10),s=isNaN(s)?0:s,n=this._get(t,"showWeek"),r=this._get(t,"dayNames"),o=this._get(t,"dayNamesMin"),l=this._get(t,"monthNames"),u=this._get(t,"monthNamesShort"),h=this._get(t,"beforeShowDay"),c=this._get(t,"showOtherMonths"),d=this._get(t,"selectOtherMonths"),p=this._getDefaultDate(t),f="",m=0;m<P[0];m++){for(_="",this.maxRows=4,v=0;v<P[1];v++){if(y=this._daylightSavingAdjust(new Date(z,U,t.selectedDay)),w=" ui-corner-all",k="",H){if(k+="<div class='ui-datepicker-group",1<P[1])switch(v){case 0:k+=" ui-datepicker-group-first",w=" ui-corner-"+(Y?"right":"left");break;case P[1]-1:k+=" ui-datepicker-group-last",w=" ui-corner-"+(Y?"left":"right");break;default:k+=" ui-datepicker-group-middle",w=""}k+="'>"}for(k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+w+"'>"+(/all|left/.test(w)&&0===m?Y?a:i:"")+(/all|right/.test(w)&&0===m?Y?i:a:"")+this._generateMonthYearHeader(t,U,z,L,V,0<m||0<v,l,u)+"</div><table class='ui-datepicker-calendar'><thead><tr>",D=n?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",g=0;g<7;g++)D+="<th scope='col'"+(5<=(g+s+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+r[b=(g+s)%7]+"'>"+o[b]+"</span></th>";for(k+=D+"</tr></thead><tbody>",M=this._getDaysInMonth(z,U),z===t.selectedYear&&U===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,M)),w=(this._getFirstDayOfMonth(z,U)-s+7)%7,M=Math.ceil((w+M)/7),x=H&&this.maxRows>M?this.maxRows:M,this.maxRows=x,C=this._daylightSavingAdjust(new Date(z,U,1-w)),I=0;I<x;I++){for(k+="<tr>",S=n?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(C)+"</td>":"",g=0;g<7;g++)N=h?h.apply(t.input?t.input[0]:null,[C]):[!0,""],T=(F=C.getMonth()!==U)&&!d||!N[0]||L&&C<L||V&&V<C,S+="<td class='"+(5<=(g+s+6)%7?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(C.getTime()===y.getTime()&&U===t.selectedMonth&&t._keyEvent||p.getTime()===C.getTime()&&p.getTime()===y.getTime()?" "+this._dayOverClass:"")+(T?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!c?"":" "+N[1]+(C.getTime()===R.getTime()?" "+this._currentClass:"")+(C.getTime()===O.getTime()?" ui-datepicker-today":""))+"'"+(F&&!c||!N[2]?"":" title='"+N[2].replace(/'/g,"&#39;")+"'")+(T?"":" data-handler='selectDay' data-event='click' data-month='"+C.getMonth()+"' data-year='"+C.getFullYear()+"'")+">"+(F&&!c?"&#xa0;":T?"<span class='ui-state-default'>"+C.getDate()+"</span>":"<a class='ui-state-default"+(C.getTime()===O.getTime()?" ui-state-highlight":"")+(C.getTime()===R.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+C.getDate()+"</a>")+"</td>",C.setDate(C.getDate()+1),C=this._daylightSavingAdjust(C);k+=S+"</tr>"}11<++U&&(U=0,z++),_+=k+="</tbody></table>"+(H?"</div>"+(0<P[0]&&v===P[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}f+=_}return f+=W,t._keyEvent=!1,f},_generateMonthYearHeader:function(t,e,i,a,s,n,r,o){var l,u,h,c,d,p,f,g=this._get(t,"changeMonth"),m=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),v="<div class='ui-datepicker-title'>",y="";if(n||!g)y+="<span class='ui-datepicker-month'>"+r[e]+"</span>";else{for(l=a&&a.getFullYear()===i,u=s&&s.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;h<12;h++)(!l||h>=a.getMonth())&&(!u||h<=s.getMonth())&&(y+="<option value='"+h+"'"+(h===e?" selected='selected'":"")+">"+o[h]+"</option>");y+="</select>"}if(_||(v+=y+(!n&&g&&m?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",n||!m)v+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(c=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=(r=function(t){t=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(t)?d:t})(c[0]),f=Math.max(p,r(c[1]||"")),p=a?Math.max(p,a.getFullYear()):p,f=s?Math.min(f,s.getFullYear()):f,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=f;p++)t.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",v+=t.yearshtml,t.yearshtml=null}return v+=this._get(t,"yearSuffix"),_&&(v+=(!n&&g&&m?"":"&#xa0;")+y),v+="</div>"},_adjustInstDate:function(t,e,i){var a=t.selectedYear+("Y"===i?e:0),s=t.selectedMonth+("M"===i?e:0),e=Math.min(t.selectedDay,this._getDaysInMonth(a,s))+("D"===i?e:0),e=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(a,s,e)));t.selectedDay=e.getDate(),t.drawMonth=t.selectedMonth=e.getMonth(),t.drawYear=t.selectedYear=e.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),t=this._getMinMaxDate(t,"max"),e=i&&e<i?i:e;return t&&t<e?t:e},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){t=this._get(t,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,a){var s=this._getNumberOfMonths(t),s=this._daylightSavingAdjust(new Date(i,a+(e<0?e:s[0]*s[1]),1));return e<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(t,s)},_isInRange:function(t,e){var i=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),s=null,n=null,r=this._get(t,"yearRange");return r&&(t=r.split(":"),r=(new Date).getFullYear(),s=parseInt(t[0],10),n=parseInt(t[1],10),t[0].match(/[+\-].*/)&&(s+=r),t[1].match(/[+\-].*/)&&(n+=r)),(!i||e.getTime()>=i.getTime())&&(!a||e.getTime()<=a.getTime())&&(!s||e.getFullYear()>=s)&&(!n||e.getFullYear()<=n)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,a){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);e=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(a,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),e,this._getFormatConfig(t))}}),b.fn.datepicker=function(t){if(!this.length)return this;b.datepicker.initialized||(b(document).on("mousedown",b.datepicker._checkExternalClick),b.datepicker.initialized=!0),0===b("#"+b.datepicker._mainDivId).length&&b("body").append(b.datepicker.dpDiv);var e=Array.prototype.slice.call(arguments,1);return"string"==typeof t&&("isDisabled"===t||"getDate"===t||"widget"===t)||"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?b.datepicker["_"+t+"Datepicker"].apply(b.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?b.datepicker["_"+t+"Datepicker"].apply(b.datepicker,[this].concat(e)):b.datepicker._attachDatepicker(this,t)})},b.datepicker=new t,b.datepicker.initialized=!1,b.datepicker.uuid=(new Date).getTime(),b.datepicker.version="1.12.1";b.datepicker,b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var u=!1;b(document).on("mouseup",function(){u=!1});b.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(t){if(!0===b.data(t.target,e.widgetName+".preventClickEvent"))return b.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,i=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&b(t.target).closest(this.options.cancel).length;return i&&!a&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===b.data(t.target,this.widgetName+".preventClickEvent")&&b.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),u=!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(b.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&b.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,u=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),b.widget("ui.slider",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e=this.options,i=this.element.find(".ui-slider-handle"),a=[],s=e.values&&e.values.length||1;for(i.length>s&&(i.slice(s).remove(),i=i.slice(0,s)),t=i.length;t<s;t++)a.push("<span tabindex='0'></span>");this.handles=i.add(b(a.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){b(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:b.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=b("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var i,a,s,n,e,r,o=this,l=this.options;return!l.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(r),a=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(i-o.values(t));(e<a||a===e&&(t===o._lastChangedValue||o.values(t)===l.min))&&(a=e,s=b(this),n=t)}),!1!==this._start(t,n)&&(this._mouseSliding=!0,this._handleIndex=n,this._addClass(s,null,"ui-state-active"),s.trigger("focus"),e=s.offset(),r=!b(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=r?{left:0,top:0}:{left:t.pageX-e.left-s.width()/2,top:t.pageY-e.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,n,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},e=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,e),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,t="horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=t/e;return 1<t&&(t=1),t<0&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),e=this._valueMin()+t*e,this._trimAlignValue(e)},_uiHash:function(t,e,i){var a={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(a.value=void 0!==e?e:this.values(t),a.values=i||this.values()),a},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var a,s=this.value(),n=this.values();this._hasMultipleValues()&&(a=this.values(e?0:1),s=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(a,i):Math.max(a,i)),n[e]=i),i!==s&&!1!==this._trigger("slide",t,this._uiHash(e,i,n))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var i,a,s;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!b.isArray(t))return this._hasMultipleValues()?this._values(t):this.value();for(i=this.options.values,a=t,s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(a[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,e){var i,a=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),b.isArray(this.options.values)&&(a=this.options.values.length),this._super(t,e),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(e),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=a-1;0<=i;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,a;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(i[a]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e,t=t-i;return 2*Math.abs(i)>=e&&(t+=0<i?e:-e),parseFloat(t.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),t=e.indexOf(".");return-1===t?0:e.length-t-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,t,a,s,n=this.options.range,r=this.options,o=this,l=!this._animateOff&&r.animate,u={};this._hasMultipleValues()?this.handles.each(function(t){i=(o.values(t)-o._valueMin())/(o._valueMax()-o._valueMin())*100,u["horizontal"===o.orientation?"left":"bottom"]=i+"%",b(this).stop(1,1)[l?"animate":"css"](u,r.animate),!0===o.options.range&&("horizontal"===o.orientation?(0===t&&o.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===t&&o.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===t&&o.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===t&&o.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(t=this.value(),a=this._valueMin(),s=this._valueMax(),i=s!==a?(t-a)/(s-a)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===n&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===n&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-i+"%"},r.animate),"min"===n&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===n&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(t){var e,i,a,s=b(t.target).data("ui-slider-handle-index");switch(t.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(b(t.target),null,"ui-state-active"),!1===this._start(t,s)))return}switch(a=this.options.step,e=i=this._hasMultipleValues()?this.values(s):this.value(),t.keyCode){case b.ui.keyCode.HOME:i=this._valueMin();break;case b.ui.keyCode.END:i=this._valueMax();break;case b.ui.keyCode.PAGE_UP:i=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case b.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(e===this._valueMax())return;i=this._trimAlignValue(e+a);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(e===this._valueMin())return;i=this._trimAlignValue(e-a)}this._slide(t,s,i)},keyup:function(t){var e=b(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),this._removeClass(b(t.target),null,"ui-state-active"))}}});var h,c,d,p,e,f,g,m,_,v,y,k,D,w,M,x,C,I,S,N,F,T="ui-effects-",A="ui-effects-style",O="ui-effects-animated",Y=b;function E(t,e,i){var a=m[e.type]||{};return null==t?i||!e.def?null:e.def:(t=a.floor?~~t:parseFloat(t),isNaN(t)?e.def:a.mod?(t+a.mod)%a.mod:t<0?0:a.max<t?a.max:t)}function j(a){var s=f(),n=s._rgba=[];return a=a.toLowerCase(),y(e,function(t,e){var i=e.re.exec(a),i=i&&e.parse(i),e=e.space||"rgba";if(i)return i=s[e](i),s[g[e].cache]=i[g[e].cache],n=s._rgba=i._rgba,!1}),n.length?("0,0,0,0"===n.join()&&h.extend(n,d.transparent),s):d[a]}function W(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function P(t){var e,i,a=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(a&&a.length&&a[0]&&a[a[0]])for(i=a.length;i--;)"string"==typeof a[e=a[i]]&&(s[b.camelCase(e)]=a[e]);else for(e in a)"string"==typeof a[e]&&(s[e]=a[e]);return s}function K(t,e,i,a){return b.isPlainObject(t)&&(t=(e=t).effect),t={effect:t},null==e&&(e={}),b.isFunction(e)&&(a=e,i=null,e={}),"number"!=typeof e&&!b.fx.speeds[e]||(a=i,i=e,e={}),b.isFunction(i)&&(a=i,i=null),e&&b.extend(t,e),i=i||e.duration,t.duration=b.fx.off?0:"number"==typeof i?i:i in b.fx.speeds?b.fx.speeds[i]:b.fx.speeds._default,t.complete=a||e.complete,t}function H(t){return!t||"number"==typeof t||b.fx.speeds[t]||("string"==typeof t&&!b.effects.effect[t]||(b.isFunction(t)||"object"==typeof t&&!t.effect))}function R(t,e){var i=e.outerWidth(),e=e.outerHeight(),t=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,e,0];return{top:parseFloat(t[1])||0,right:"auto"===t[2]?i:parseFloat(t[2]),bottom:"auto"===t[3]?e:parseFloat(t[3]),left:parseFloat(t[4])||0}}b.effects={effect:{}},p=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],f=(h=Y).Color=function(t,e,i,a){return new h.Color.fn.parse(t,e,i,a)},g={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},m={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},_=f.support={},v=h("<p>")[0],y=h.each,v.style.cssText="background-color:rgba(1,1,1,.5)",_.rgba=-1<v.style.backgroundColor.indexOf("rgba"),y(g,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),f.fn=h.extend(f.prototype,{parse:function(s,t,e,i){if(s===c)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=h(s).css(t),t=c);var n=this,a=h.type(s),r=this._rgba=[];return t!==c&&(s=[s,t,e,i],a="array"),"string"===a?this.parse(j(s)||d._default):"array"===a?(y(g.rgba.props,function(t,e){r[e.idx]=E(s[e.idx],e)}),this):"object"===a?(y(g,s instanceof f?function(t,e){s[e.cache]&&(n[e.cache]=s[e.cache].slice())}:function(t,i){var a=i.cache;y(i.props,function(t,e){if(!n[a]&&i.to){if("alpha"===t||null==s[t])return;n[a]=i.to(n._rgba)}n[a][e.idx]=E(s[t],e,!0)}),n[a]&&h.inArray(null,n[a].slice(0,3))<0&&(n[a][3]=1,i.from&&(n._rgba=i.from(n[a])))}),this):void 0},is:function(t){var s=f(t),n=!0,r=this;return y(g,function(t,e){var i,a=s[e.cache];return a&&(i=r[e.cache]||e.to&&e.to(r._rgba)||[],y(e.props,function(t,e){if(null!=a[e.idx])return n=a[e.idx]===i[e.idx]})),n}),n},_space:function(){var i=[],a=this;return y(g,function(t,e){a[e.cache]&&i.push(t)}),i.pop()},transition:function(t,r){var e=(u=f(t))._space(),i=g[e],t=0===this.alpha()?f("transparent"):this,o=t[i.cache]||i.to(t._rgba),l=o.slice(),u=u[i.cache];return y(i.props,function(t,e){var i=e.idx,a=o[i],s=u[i],n=m[e.type]||{};null!==s&&(null===a?l[i]=s:(n.mod&&(n.mod/2<s-a?a+=n.mod:n.mod/2<a-s&&(a-=n.mod)),l[i]=E((s-a)*r+a,e)))}),this[e](l)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),i=e.pop(),a=f(t)._rgba;return f(h.map(e,function(t,e){return(1-i)*a[e]+i*t}))},toRgbaString:function(){var t="rgba(",e=h.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=h.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),i=e.pop();return t&&e.push(~~(255*i)),"#"+h.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,g.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/255,i=t[1]/255,a=t[2]/255,s=t[3],n=Math.max(e,i,a),r=Math.min(e,i,a),o=n-r,l=n+r,t=.5*l,i=r===n?0:e===n?60*(i-a)/o+360:i===n?60*(a-e)/o+120:60*(e-i)/o+240,l=0==o?0:t<=.5?o/l:o/(2-l);return[Math.round(i)%360,l,t,null==s?1:s]},g.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],a=t[2],t=t[3],i=a<=.5?a*(1+i):a+i-a*i,a=2*a-i;return[Math.round(255*W(a,i,e+1/3)),Math.round(255*W(a,i,e)),Math.round(255*W(a,i,e-1/3)),t]},y(g,function(l,t){var n=t.props,r=t.cache,o=t.to,u=t.from;f.fn[l]=function(t){if(o&&!this[r]&&(this[r]=o(this._rgba)),t===c)return this[r].slice();var e,i=h.type(t),a="array"===i||"object"===i?t:arguments,s=this[r].slice();return y(n,function(t,e){t=a["object"===i?t:e.idx];null==t&&(t=s[e.idx]),s[e.idx]=E(t,e)}),u?((e=f(u(s)))[r]=s,e):f(s)},y(n,function(r,o){f.fn[r]||(f.fn[r]=function(t){var e,i=h.type(t),a="alpha"===r?this._hsla?"hsla":"rgba":l,s=this[a](),n=s[o.idx];return"undefined"===i?n:("function"===i&&(t=t.call(this,n),i=h.type(t)),null==t&&o.empty?this:("string"===i&&(e=p.exec(t))&&(t=n+parseFloat(e[2])*("+"===e[1]?1:-1)),s[o.idx]=t,this[a](s)))})})}),f.hook=function(t){t=t.split(" ");y(t,function(t,n){h.cssHooks[n]={set:function(t,e){var i,a,s="";if("transparent"!==e&&("string"!==h.type(e)||(i=j(e)))){if(e=f(i||e),!_.rgba&&1!==e._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=h.css(a,"backgroundColor"),a=a.parentNode}catch(t){}e=e.blend(s&&"transparent"!==s?s:"_default")}e=e.toRgbaString()}try{t.style[n]=e}catch(t){}}},h.fx.step[n]=function(t){t.colorInit||(t.start=f(t.elem,n),t.end=f(t.end),t.colorInit=!0),h.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},f.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),h.cssHooks.borderColor={expand:function(i){var a={};return y(["Top","Right","Bottom","Left"],function(t,e){a["border"+e+"Color"]=i}),a}},d=h.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},M=["add","remove","toggle"],x={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},b.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){b.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(Y.style(t.elem,e,t.end),t.setAttr=!0)}}),b.fn.addBack||(b.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),b.effects.animateClass=function(s,t,e,i){var n=b.speed(t,e,i);return this.queue(function(){var i=b(this),t=i.attr("class")||"",e=(e=n.children?i.find("*").addBack():i).map(function(){return{el:b(this),start:P(this)}}),a=function(){b.each(M,function(t,e){s[e]&&i[e+"Class"](s[e])})};a(),e=e.map(function(){return this.end=P(this.el[0]),this.diff=function(t,e){var i,a,s={};for(i in e)a=e[i],t[i]!==a&&(x[i]||!b.fx.step[i]&&isNaN(parseFloat(a))||(s[i]=a));return s}(this.start,this.end),this}),i.attr("class",t),e=e.map(function(){var t=this,e=b.Deferred(),i=b.extend({},n,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,i),e.promise()}),b.when.apply(b,e.get()).done(function(){a(),b.each(arguments,function(){var e=this.el;b.each(this.diff,function(t){e.css(t,"")})}),n.complete.call(i[0])})})},b.fn.extend({addClass:(w=b.fn.addClass,function(t,e,i,a){return e?b.effects.animateClass.call(this,{add:t},e,i,a):w.apply(this,arguments)}),removeClass:(D=b.fn.removeClass,function(t,e,i,a){return 1<arguments.length?b.effects.animateClass.call(this,{remove:t},e,i,a):D.apply(this,arguments)}),toggleClass:(k=b.fn.toggleClass,function(t,e,i,a,s){return"boolean"==typeof e||void 0===e?i?b.effects.animateClass.call(this,e?{add:t}:{remove:t},i,a,s):k.apply(this,arguments):b.effects.animateClass.call(this,{toggle:t},e,i,a)}),switchClass:function(t,e,i,a,s){return b.effects.animateClass.call(this,{add:e,remove:t},i,a,s)}}),b.expr&&b.expr.filters&&b.expr.filters.animated&&(b.expr.filters.animated=(C=b.expr.filters.animated,function(t){return!!b(t).data(O)||C(t)})),!1!==b.uiBackCompat&&b.extend(b.effects,{save:function(t,e){for(var i=0,a=e.length;i<a;i++)null!==e[i]&&t.data(T+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,a=0,s=e.length;a<s;a++)null!==e[a]&&(i=t.data(T+e[a]),t.css(e[a],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper"))return i.parent();var a={width:i.outerWidth(!0),height:i.outerHeight(!0),float:i.css("float")},t=b("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:i.width(),height:i.height()},s=document.activeElement;try{s.id}catch(t){s=document.body}return i.wrap(t),i[0]!==s&&!b.contains(i[0],s)||b(s).trigger("focus"),t=i.parent(),"static"===i.css("position")?(t.css({position:"relative"}),i.css({position:"relative"})):(b.extend(a,{position:i.css("position"),zIndex:i.css("z-index")}),b.each(["top","left","bottom","right"],function(t,e){a[e]=i.css(e),isNaN(parseInt(a[e],10))&&(a[e]="auto")}),i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(e),t.css(a).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),t[0]!==e&&!b.contains(t[0],e)||b(e).trigger("focus")),t}}),b.extend(b.effects,{version:"1.12.1",define:function(t,e,i){return i||(i=e,e="effect"),b.effects.effect[t]=i,b.effects.effect[t].mode=e,i},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var a="horizontal"!==i?(e||100)/100:1,e="vertical"!==i?(e||100)/100:1;return{height:t.height()*e,width:t.width()*a,outerHeight:t.outerHeight()*e,outerWidth:t.outerWidth()*a}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var a=t.queue();1<e&&a.splice.apply(a,[1,0].concat(a.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(A,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(A)||"",t.removeData(A)},mode:function(t,e){t=t.is(":hidden");return"toggle"===e&&(e=t?"show":"hide"),(t?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,a;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":a=0;break;case"center":a=.5;break;case"right":a=1;break;default:a=t[1]/e.width}return{x:a,y:i}},createPlaceholder:function(t){var e,i=t.css("position"),a=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",e=b("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(T+"placeholder",e)),t.css({position:i,left:a.left,top:a.top}),e},removePlaceholder:function(t){var e=T+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(t){b.effects.restoreStyle(t),b.effects.removePlaceholder(t)},setTransition:function(a,t,s,n){return n=n||{},b.each(t,function(t,e){var i=a.cssUnit(e);0<i[0]&&(n[e]=i[0]*s+i[1])}),n}}),b.fn.extend({effect:function(){function t(t){var e=b(this),i=b.effects.mode(e,o)||n;e.data(O,!0),l.push(i),n&&("show"===i||i===n&&"hide"===i)&&e.show(),n&&"none"===i||b.effects.saveStyle(e),b.isFunction(t)&&t()}var a=K.apply(this,arguments),s=b.effects.effect[a.effect],n=s.mode,e=a.queue,i=e||"fx",r=a.complete,o=a.mode,l=[];return b.fx.off||!s?o?this[o](a.duration,r):this.each(function(){r&&r.call(this)}):!1===e?this.each(t).each(u):this.queue(i,t).queue(i,u);function u(t){var e=b(this);function i(){b.isFunction(r)&&r.call(e[0]),b.isFunction(t)&&t()}a.mode=l.shift(),!1===b.uiBackCompat||n?"none"===a.mode?(e[o](),i()):s.call(e[0],a,function(){e.removeData(O),b.effects.cleanUp(e),"hide"===a.mode&&e.hide(),i()}):(e.is(":hidden")?"hide"===o:"show"===o)?(e[o](),i()):s.call(e[0],a,i)}},show:(N=b.fn.show,function(t){if(H(t))return N.apply(this,arguments);var e=K.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(S=b.fn.hide,function(t){if(H(t))return S.apply(this,arguments);var e=K.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(I=b.fn.toggle,function(t){if(H(t)||"boolean"==typeof t)return I.apply(this,arguments);var e=K.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(t){var i=this.css(t),a=[];return b.each(["em","px","%","pt"],function(t,e){0<i.indexOf(e)&&(a=[parseFloat(i),e])}),a},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):R(this.css("clip"),this)},transfer:function(t,e){var i=b(this),a=b(t.to),s="fixed"===a.css("position"),n=b("body"),r=s?n.scrollTop():0,o=s?n.scrollLeft():0,n=a.offset(),n={top:n.top-r,left:n.left-o,height:a.innerHeight(),width:a.innerWidth()},a=i.offset(),l=b("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:a.top-r,left:a.left-o,height:i.innerHeight(),width:i.innerWidth(),position:s?"fixed":"absolute"}).animate(n,t.duration,t.easing,function(){l.remove(),b.isFunction(e)&&e()})}}),b.fx.step.clip=function(t){t.clipInit||(t.start=b(t.elem).cssClip(),"string"==typeof t.end&&(t.end=R(t.end,t.elem)),t.clipInit=!0),b(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})},F={},b.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){F[t]=function(t){return Math.pow(t,e+2)}}),b.extend(F,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),b.each(F,function(t,e){b.easing["easeIn"+t]=e,b.easing["easeOut"+t]=function(t){return 1-e(1-t)},b.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}});b.effects,b.effects.define("fade","toggle",function(t,e){var i="show"===t.mode;b(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:e})})});define("WS/WS.Localizer",["moment","stringext","jquery","jquerycookie","jqueryui"],function(moment){var Localizer={resources:null,init:function(currentLocale,localizationResourcesVersion){this.loadResources(currentLocale,localizationResourcesVersion);this.localeEdition.showMessageIfAny(currentLocale);this.currentLocale=currentLocale;moment.locale(currentLocale);$.datepicker.setDefaults($.datepicker.regional[currentLocale])},loadResources:function(currentLocale,localizationJSResourcesVersion){var self=this;this.resourcesVersion=localizationJSResourcesVersion;$.ajax({type:"GET",url:"/js/localizationResources_{0}/localization_debug.json".format(currentLocale),data:{version:localizationJSResourcesVersion},contentType:"application/json; charset=utf-8",dataType:"json",async:false,success:function(resources){self.addResources(resources)},error:function(xhr,a,b){console.log("Could not load localization.json: {0} : {1} : {2}".format(xhr.resultMessage,a,b))}})},dbRes:function(resSet,resId){if(!this.resources)return resId;if(!this.resources||!this.resources[resSet])return resId;var result=this.resources[resSet][resId];return result?result:resId},addResources:function(resourcesData){if(!resourcesData)return;this.resources=resourcesData},localeEdition:{getCookieName:function(locale){return"localeEditionShown_"+locale},showMessageIfAny:function(currentLocale){var self=this;$(function(){var userLangTwoChars=self.getTwoChardsUserLang();var localeEditionShownCookie=$.cookie(self.getCookieName(currentLocale));if(userLangTwoChars&&currentLocale!=userLangTwoChars&&!localeEditionShownCookie){self.showMessage(userLangTwoChars,currentLocale)}})},showMessage:function(userLangTwoChars,currentLocale){var $locationEditionExists=$("#locale-edition-exists");this.setMessage($locationEditionExists,userLangTwoChars);$locationEditionExists.slideDown();var self=this;$locationEditionExists.on("click",".btn",function(e){var $btn=$(e.currentTarget);if($btn.is(".btn-close")){$locationEditionExists.slideUp()}$.cookie(self.getCookieName(currentLocale),"true",{expires:365,path:"/"})})},setMessage:function($locationEditionExists,userLangTwoChars){var editionUrl=this.getEditionUrl(userLangTwoChars);if(!editionUrl)return;var editionUrlDisplayName=this.getEditionDisplayText(editionUrl,userLangTwoChars);$(".btn-ok",$locationEditionExists).attr("href",editionUrl).append(editionUrlDisplayName)},getEditionUrl:function(userLangTwoChars){return $('ul li[data-locale-code="{0}"] a'.format(userLangTwoChars)).attr("href")},getEditionDisplayText:function(editionUrl,userLangTwoChars){var localeName=$('ul li[data-locale-code="{0}"] .locale-name'.format(userLangTwoChars)).html();return"{0}?".format(localeName)},getTwoChardsUserLang:function(){var userLang=navigator.language||navigator.userLanguage;return userLang?userLang.split("-")[0]:null}}};return Localizer});define("WS/WS.TeamHeader",["jquery"],function(){return{init:function(){var self=this;self.bindEvents()},bindEvents:function(){var self=this;$("#toggle-team-favourites.add-team").unbind("click");$("#toggle-team-favourites.remove-team").unbind("click");$("#toggle-team-favourites.add-team").on("click",function(e){e.preventDefault();self.addTeamAsAFavourite()});$("#toggle-team-favourites.remove-team").on("click",function(e){e.preventDefault();self.removeTeamFromFavourites()})},addTeamAsAFavourite:function(){var teamId=gridConfig.model.defaultParameters.teamId;WSUser.addTeamAsAFavourite(teamId)},removeTeamFromFavourites:function(){var teamId=gridConfig.model.defaultParameters.teamId;WSUser.removeTeamFromFavourites(teamId)}}});define("plugins/jquery.messageBox",["jquery"],function($){(function($){$.fn.messageBox=function(options){options=options||{};return this.each(function(){var $item=$(this);var $box;var timeToLive=options.timeToLive||1e3;var align=options.align||"right";var removeAfter=false;var messageText=options.messageText||"(Empty)";var classes=options.classes||"";var icon=options.icon||"";if(icon!=""){icon='<span class="with-solo-icon is-default-transparent rc"><span class="ui-icon '+options.icon+'"/></span></span>'}if(options.id){removeAfter=true;$box=$("#"+options.id).hide();$box.append(icon)}else{var html=[];html.push("<div ");html.push('class="messageBox" >');html.push('<span class="rc text '+classes+'">'+messageText+"</span>");html.push("</div>");$box=$(html.join(" "))}var elementOffset=$item.offset();var left=elementOffset.left+(options.leftMargin||0);var top=elementOffset.top+(options.topMargin||0);if(align=="right"){left+=$item.width()}if(align=="left"){left-=messageText.length}if(align=="top"){top-=$item.height()}if(align=="bottom"){top+=$item.height()}$box.css("left",left).css("top",top).appendTo("body").fadeIn();if(timeToLive!=-1){setTimeout(function(){if(!removeAfter){$box.remove();return false}$box.fadeOut()},timeToLive)}})}})(jQuery)});define("WS/WS.User",["WS/WS.Localizer","WS/WS.TeamHeader","plugins/jquery.messageBox","jquerycookie"],function(WSLocalizer,WSTeamHeader){return{persistentOptions:{expires:365,path:"/",domain:gDomain},favTeamMaxNumberAlertDialogueValues:{icon:"icon-alert",messageText:"Maximum 3 teams can be added to your favourites.",timeToLive:3e3,classes:"favorite-tournaments-limit-message",leftMargin:25},signInAlertDialogueValues:{icon:"icon-alert",messageText:'<a target="_parent" href="/Accounts/Login?originalUrl='+window.location.pathname+'" id="login">Sign in</a> or <a target="_parent" href="/Accounts/Register?originalUrl='+window.location.pathname+'" id="register">Join us</a> to add this team to your favourites.',timeToLive:5e3,classes:"favorite-tournaments-signin-message",leftMargin:25},timezoneOffset:function(){if(undefined==arguments[0]){var tzo=$.cookie("tzo");if(null==tzo){tzo=gUtcOffset;$.cookie("tzo",tzo,this.persistentOptions)}return tzo}else{$.cookie("tzo",arguments[0],this.persistentOptions)}},addTeamAsAFavourite:function(id){var self=this;$("#toggle-team-link").text("Adding..");$.ajax({type:"POST",url:"/Accounts/AddFavouriteTeam",cache:false,data:"teamId="+id,dataType:"json",success:function(json){if(0==json.ReturnCode){$("#toggle-team-favourites").toggleClass("add-team");$("#toggle-team-favourites").toggleClass("remove-team");$("#toggle-team-link").text("Added!");window.setTimeout(function(){$("#toggle-team-link").html('<span class="ui-icon ui-icon-star"></span>Remove from Favourites')},1e3);WSTeamHeader.bindEvents()}else{console.error(json.Message);var userAlert=gIdentified?self.favTeamMaxNumberAlertDialogueValues:self.signInAlertDialogueValues;$("#toggle-team-link").messageBox(userAlert);$("#toggle-team-link").text(WSLocalizer.dbRes("UIComponent","tournament_info_favourite"))}},error:function(e){console.error(e);$("#toggle-team-link").text(WSLocalizer.dbRes("UIComponent","tournament_info_favourite"))}})},removeTeamFromFavourites:function(id){$("#toggle-team-link").text("Removing..");$.ajax({type:"PUT",url:"/Accounts/RemoveFavouriteTeam",cache:false,data:"teamId="+id,dataType:"json",success:function(json){if(0==json.ReturnCode){$("#toggle-team-favourites").toggleClass("add-team");$("#toggle-team-favourites").toggleClass("remove-team");$("#toggle-team-link").text("Removed!");window.setTimeout(function(){$("#toggle-team-link").html('<span class="ui-icon ui-icon-star"></span>'+WSLocalizer.dbRes("UIComponent","tournament_info_favourite"))},1e3);WSTeamHeader.bindEvents()}else{console.error(json.Message);$("#toggle-team-link").text("Remove from Favourites")}},error:function(e){console.error(e);$("#toggle-team-link").text("Remove from Favourites")}})},favoriteTournaments:function(){if(undefined==arguments[0]){var ft=$.cookie("ft")||"";var ids=0<ft.length?ft.split(","):[];var numericIds=[];for(var i=0;i<ids.length;i++){if(NG.isNumeric(ids[i])){numericIds.push(ids[i])}}if(ids.length!=numericIds.length){$.cookie("ft",numericIds.join(","),this.persistentOptions)}return numericIds}else{self=this;var ids=arguments[0].join(",");$.ajax({type:"POST",url:"/Accounts/FavouriteTournaments",cache:false,data:"ids="+ids,dataType:"json",success:function(json){if(0==json.ReturnCode){$.cookie("ft",json.Data,self.persistentOptions)}else{alert(json.Message)}},error:function(){alert("Error. Please try again.")}})}}}});var NG={renderDustTemplate:function(templateName,data,callback){NG.loadDustTemplate(templateName,function(){dust.render(templateName,data,function(err,out){if(err){console.log("Dust render error: {0}".format(err));return}if(callback){callback(out)}})})},loadDustTemplate:function(templateName,callback){setTimeout(function(){if(dust.cache[templateName]){if(callback){callback()}return}else{if(!dust.lockLoad){dust.lockLoad={}}if(!dust.lockLoad[templateName]){dust.lockLoad[templateName]=true;$.get("/js/templates/"+templateName+".dust",function(templateData){if(!dust){dust.lockLoad[templateName]=false;console.log("Dust is not loaded.. dust please..");return}if(!dust.cache[templateName]){var compiled=dust.compile(templateData,templateName);dust.loadSource(compiled)}if(callback){callback()}dust.lockLoad[templateName]=false})}else{setTimeout(function(){NG.loadDustTemplate(templateName,callback,0)},100)}}},0)},sortByFieldName:function(o,isDescending){var sortable=[];sorted={};for(var field in o){sortable.push(field)}sortable.sort();for(var i=0;i<sortable.length;i++){sorted[sortable[i]]=o[sortable[i]]}return!isDescending?sorted:sorted.reverse()},sortByFieldValue:function(o,isDescending){var invertedObject=NG.invert(o);var sortedInvertedObjectByValue=NG.sortByFieldName(invertedObject,isDescending);return NG.invert(sortedInvertedObjectByValue)},remove:function(o,p){var result=o[p];delete o[p];return result},isFunction:function(o){return Object.prototype.toString.call(o)==="[object Function]"},isArray:function(o){return Object.prototype.toString.call(o)==="[object Array]"},toArray:function(slice){return function toArray(object){return slice.call(object,0)}}(Array.prototype.slice),binarySearch:function(o,v,i,f){var h=o.length,l=-1,m;if(NG.isFunction(f)){while(h-l>1){m=h+l>>1;if(f(o[m])<v){l=m}else{h=m}}return undefined!==o[h]?f(o[h])!=v?i?h:-1:h:i?h:-1}else{while(h-l>1){m=h+l>>1;if(o[m]<v){l=m}else{h=m}}return o[h]!=v?i?h:-1:h}},indexOf:function(array,value,from,callback){var len=array.length>>>0;var from=Number(from)||0;from=from<0?Math.ceil(from):Math.floor(from);if(from<0){from+=len}if(callback){for(;from<len;from++){if(from in array&&callback(array[from])===value){return from}}}else{for(;from<len;from++){if(from in array&&array[from]===value){return from}}}return-1},trim:function(str){var str=str.replace(/^\s\s*/,""),ws=/\s/,i=str.length;while(ws.test(str.charAt(--i)));return str.slice(0,i+1)},async:function(fun,scope){setTimeout(function(){fun.call(scope)},1)},setTimeout:function(fun,timeout,scope){return setTimeout(function(){fun.call(scope)},timeout)},clearTimeout:function(timeoutId){clearTimeout(timeoutId);delete timeoutId},clearTimeoutByRef:function(object,property){clearTimeout(object[property]);delete object[property]},replaceHtml:function(el,html){var oldEl=el;var newEl=oldEl.cloneNode(false);newEl.innerHTML=html;oldEl.parentNode.replaceChild(newEl,oldEl);return newEl},isNumeric:function(input){var RE=/^-{0,1}\d*\.{0,1}\d+$/;return RE.test(input)},numberIsGreaterThan:function(value,opponentValue){if(!(this.isNumeric(value)&&this.isNumeric(opponentValue)))return false;return parseFloat(opponentValue)<parseFloat(value)},isFloat:function(input){return/\./.test(input.toString())},roundNumber:function(number,precision,keepDotsAndZeros){precision=precision||0;var result=String(Math.round(number*Math.pow(10,precision))/Math.pow(10,precision));if(result.indexOf(".")<0){result+="."}while(result.length-result.indexOf(".")<=precision){result+="0"}if(precision!=0){if(keepDotsAndZeros){return result}else{return parseFloat(result).toFixed(precision)/1}}else{return parseInt(result)}},roundNumberAsString:function(number,precision){precision=precision||0;var result=String(Math.round(number*Math.pow(10,precision))/Math.pow(10,precision));if(result.indexOf(".")<0){result+="."}while(result.length-result.indexOf(".")<=precision){result+="0"}return 0!=precision?parseFloat(Math.round(result*100)/100).toFixed(precision):parseInt(result)},getRatingDisplayValue:function(rating,precision){precision=precision||2;if(!rating)return 0;return this.roundNumber(rating,precision)},getAsFloat:function(value,total,precision){precision=precision||1;if(0==total)return 0;return NG.roundNumber(value/total,precision)},flattenJson:function(json){var nj={},walk=function(j){var jp;for(var prop in j){jp=j[prop];if(jp.toString()==="[object Object]"){walk(jp)}else{nj[prop]=jp}}};walk(json);return nj},getAverage:function(value,total,precision){if(0==total)return 0;return NG.roundNumber(value/total,precision)},percentage:function(number,whole,inverse,rounder){whole=parseFloat(whole);if(!whole){whole=100}number=parseFloat(number);if(!number){number=0}if(!whole||!number){return 0}rounder=parseFloat(rounder);rounder=rounder&&(!(rounder%10)||rounder==1)?rounder:100;return!inverse?NG.roundNumber(number*100/whole*rounder,rounder)/rounder:NG.roundNumber(whole*number/100*rounder)/rounder},getPercentage:function(value,total){if(!value||!total)return 0;if(0==total)return 0;return NG.roundNumber(100*value/total)},JsonLength:function(obj){if(!obj)return 0;var i=0;for(var attr in obj){i++}return i},sortNumeric:function(a,b){if(!NG.isNumeric(a)){a=-1}if(!NG.isNumeric(b)){b=-1}return a-b},sortTextAsc:function(a,b){return a>b},getDisplayNameByValue:function(o,value){if(!o)return null;for(var f in o){if(o[f]==value){return f}}},isScrolledIntoView:function($selector){var docViewTop=$(window).scrollTop();var docViewBottom=docViewTop+$(window).height();var elemTop=$selector.offset().top;var elemBottom=elemTop+$selector.height();return elemBottom<=docViewBottom&&elemTop>=docViewTop},invert:function(obj){var new_obj={};for(var prop in obj){if(obj.hasOwnProperty(prop)){new_obj[obj[prop]]=prop}}return new_obj},getShortName:function(text,minimumLength){var playerName=text;if(minimumLength==undefined||playerName.length>minimumLength){var names=playerName.split(/ /g);var fullName="";var length=names.length;for(var i=0;i<length;i++){var name=names[i];if(name.includes("-")){var isLastName=length-1==i;fullName=fullName+NG.splitHyphen(name,isLastName)}else if(length-1==i){fullName=fullName+" "+name}else{if(name.length>2){fullName=fullName+name[0]+"."}else{fullName=fullName+" "+name}}}return fullName}return playerName},splitHyphen:function(text,isLastName){var hypenedNames=text.split(/-/g);var combinedName="";for(var j=0;j<hypenedNames.length;j++){if(j==0){combinedName=(isLastName?" ":"")+hypenedNames[j][0]}else if(isLastName){combinedName=combinedName+"-"+hypenedNames[j]}else{combinedName=combinedName+"-"+hypenedNames[j][0]+"."}}return combinedName},reverse:function(oObject){var oResult,sKey,bErrorFound=false;if(Object.prototype.toString.call(oObject)==="[object Object]"){oResult={};for(sKey in oObject){if(oObject.hasOwnProperty(sKey)&&!bErrorFound){bErrorFound=oObject[sKey]instanceof Object;if(!bErrorFound){if(oResult[oObject[sKey]]===undefined){oResult[oObject[sKey]]=sKey}else{if(!Object.prototype.toString.call(oResult[oObject[sKey]])==="[object Array]"){oResult[oObject[sKey]]=[oResult[oObject[sKey]]]}oResult[oObject[sKey]].push(sKey)}}else{oResult=undefined}}}}else{oResult=oObject}return oResult},getShortDisplayName:function(name,hideTitle){name=name.trim();var names=name.split(" ");if(names.length==1){return name}var result=[];for(var i=0;i<names.length-1;i++){result.push(names[i].charAt(0)+". ")}result.push(names[names.length-1]);return"<span "+(!hideTitle?'title="'+name+'"':"")+">"+result.join("")+"</span>"}};define("ng",function(){});define("ngevents",["ng"],function(){return function(){var $NGEVENTS="$NGEVENTS";var prepare=function(fn){return function(obj,type,arg,scope){if(typeof type=="object")for(var k in type)arguments.callee(obj,k,type[k]);else{var events=obj[$NGEVENTS]=obj[$NGEVENTS]||{},storage=events[type]=events[type]||{listeners:[]};fn(obj,type,arg,storage,scope)}}};var add=prepare(function(obj,type,fn,storage,scope){var listeners=storage.listeners;for(var i=listeners.length;i--;)if(listeners[i]==fn)return;listeners.push({fn:fn,scope:scope||obj});return});var remove=prepare(function(obj,type,fn,storage){var listeners=storage.listeners;for(var i=listeners.length;i--;){if(listeners[i].fn===fn){listeners.splice(i,1);break}}});var fire=prepare(function(obj,type,args,storage){if(!args||Object.prototype.toString.call(args)!=="[object Array]")args=[args];for(var i=0,l=storage.listeners.length;i<l;i++){storage.listeners[i].fn.apply(storage.listeners[i].scope,args)}});var addGlobal=function(type,fn,scope){add(window,type,fn,scope)};var removeGlobal=function(type,fn){remove(window,type,fn)};var fireGlobal=function(type,args){fire(window,type,args)};var addOnce=prepare(function(obj,type,fn,storage){add(obj,type,function(){remove(obj,type,arguments.callee);fn.apply(obj,arguments)})});var toggle=prepare(function(obj,type,fn,storage,toggle){(toggle?add:remove)(obj,type,fn)});return{add:add,remove:remove,fire:fire,addGlobal:addGlobal,removeGlobal:removeGlobal,fireGlobal:fireGlobal,addOnce:addOnce,toggle:toggle}}()});if(!Array.prototype.map){Array.prototype.map=function(fun){var len=this.length>>>0;if(typeof fun!="function"){throw new TypeError}var res=new Array(len);var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this){res[i]=fun.call(thisp,this[i],i,this)}}return res}}if(!Array.prototype.filter){Array.prototype.filter=function(fun){var len=this.length>>>0;if(typeof fun!="function"){throw new TypeError}var res=[];var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this){var val=this[i];if(fun.call(thisp,val,i,this)){res.push(val)}}}return res}}if(!Array.prototype.every){Array.prototype.every=function(fun){var len=this.length>>>0;if(typeof fun!="function"){throw new TypeError}var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this&&!fun.call(thisp,this[i],i,this))return false}return true}}if(!Array.prototype.forEach){Array.prototype.forEach=function(fun){var len=this.length>>>0;if(typeof fun!="function")throw new TypeError;var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this)fun.call(thisp,this[i],i,this)}}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){"use strict";if(this===void 0||this===null)throw new TypeError;var t=Object(this);var len=t.length>>>0;if(len===0)return-1;var n=0;if(arguments.length>0){n=Number(arguments[1]);if(n!==n)n=0;else if(n!==0&&n!==1/0&&n!==-(1/0))n=(n>0||-1)*Math.floor(Math.abs(n))}if(n>=len)return-1;var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement)return k}return-1}}Array.prototype.subtract=function(a,fun,scope){return this.filter(function(e){return a.every(function(ae){return fun?fun.call(scope,e,ae):e!=ae})})};Array.prototype.hashtable=function(){var l=this.length>>>0,result={};if(0==l)return result;var mapFn=arguments[0];if(typeof mapFn=="function"){for(var i=0;i<l;i++){result[mapFn(this[i])]=this[i]}}else{for(var i=0;i<l;i++){result[this[i]]=this[i]}}return result};Array.prototype.indextable=function(){var l=this.length>>>0,result={};if(0==l)return result;var mapFn=arguments[0];if(typeof mapFn=="function"){for(var i=0;i<l;i++){result[mapFn(this[i])]=i}}else{for(var i=0;i<l;i++){result[this[i]]=i}}return result};Array.prototype.max=function(){var max=this[0];var len=this.length;for(var i=1;i<len;i++)if(this[i]>max)max=this[i];return max};Array.prototype.min=function(){var min=this[0];var len=this.length;for(var i=1;i<len;i++)if(this[i]<min)min=this[i];return min};Array.prototype.sum=function(){for(var i=0,len=this.length,sum=0;i<len;sum+=this[i++]);return sum};Array.prototype.take=function(count){var result=[];if(!count)return result;if(this.length<count)return result;for(var i=0;i<count;i++){result.push(this[i])}return result};Array.prototype.where=function(criteria){var result=[];if(!criteria)return this;for(var i=0;i<this.length;i++){if(criteria(this[i]))result.push(this[i])}return result};Array.prototype.addArray=function(array){if(!array)return this;if(0==array.length)return this;for(var i=0;i<array.length;i++){this.push(array[i])}return this};Array.prototype.contains=function(item){return this.indexOf(item)>=0};define("src/Array",function(){});define("plugins/jquery.tabs",["jquery"],function($){jQuery.fn.setupExtras=function(setup,options){for(var extra in setup){var self=this;if(setup[extra]instanceof Array){for(var i=0;i<setup[extra].length;i++){setup[extra][i].call(self,options)}}else{setup[extra].call(self,options)}}};var $$=function(param){return $.data($(param)[0])};(function($){$.fn.tabs=function(options){options=options||{};this.setupExtras(options.setup||$.fn.tabs.base,options);if(1<this.length){throw"Id corresponds to multiple tabs!"}var tabList=$(this);$$(tabList).panels=$([]);$("li a",tabList).click(function(e){e.preventDefault();tabList.trigger("activated",this);return false}).each(function(){var panel=$($(this).attr("href"));$$(tabList).panels=$$(tabList).panels.add(panel);tabList.trigger("setupPanel",[panel])});tabList.trigger("initialize");return this};var getPanel=function(selected){return $($(selected).attr("href"))};$.fn.tabs.base={setupPanel:[function(options){this.bind("setupPanel",function(e,selector){$(selector).hide()})}],initialize:[function(options){this.bind("initialize",function(){if(options.defaultTab!="nan"){var defaultTab=options.defaultTab?$("li a[href='"+options.defaultTab+"']")[0]:$(this).find("li a:first")[0];$(this).trigger("activated",defaultTab)}})}],activate:[function(options){this.bind("activated",function(e,selected){var panel=getPanel(selected);$$(this).panels.hide();$(panel).show();$(this).find("li a").removeClass("selected");$(selected).addClass("selected").blur();$(this).trigger("activation-finished",selected)})}]}})(jQuery)});define("WS/WS.FavoriteTournaments",["WS/WS.Localizer","WS/WS.User","ngevents","src/Array","plugins/jquery.tabs","plugins/jquery.messageBox","jquery"],function(WSLocalizer,WSUser,NGEvents){return function(){var favoritesCount=0,favoritesLimit=10,favoriteTournamentIds;var ftAddedMessageOptions={icon:"icon-circle-check",messageText:WSLocalizer.dbRes("UIComponent","favourite_info_added"),classes:"favorite-tournaments-added-message",leftMargin:5};var ftLimitMessageOptions={icon:"icon-alert",messageText:WSLocalizer.dbRes("UIComponent","favourite_info_limit"),timeToLive:1500,classes:"favorite-tournaments-limit-message",leftMargin:5};var ftSignInMessageOptions={icon:"icon-alert",messageText:WSLocalizer.dbRes("UIComponent","favourite_info_please")+' <a target="_parent" href="/Accounts/Login?originalUrl='+window.location.pathname+'" id="login">'+WSLocalizer.dbRes("UIComponent","favourite_lnk_singin")+'</a> | <a target="_parent" href="/Accounts/Register?originalUrl='+window.location.pathname+'" id="register">'+WSLocalizer.dbRes("UIComponent","favourite_lnk_register")+"</a>",timeToLive:5e3,classes:"favorite-tournaments-signin-message",leftMargin:5};var ftDuplicateMessageOptions={icon:"icon-alert",messageText:WSLocalizer.dbRes("UIComponent","favourite_info_already"),timeToLive:1500,classes:"favorite-tournaments-duplicate-message",leftMargin:5};var ftInfoMessageOptions={id:"favorite-tournaments-info-message",timeToLive:-1};function getTournamentById(id){for(var i=0,l=allRegions.length;i<l;i++){for(var j=0,m=allRegions[i].tournaments.length;j<m;j++){if(id==allRegions[i].tournaments[j].id){tournament=allRegions[i].tournaments[j];tournament.flg=allRegions[i].flg;tournament.regionName=allRegions[i].name;return tournament}}}}function createTournament(tournament){if(null!=tournament){var clone=$('<li class="hover-target"><a class="pt iconize iconize-icon-left" href="'+tournament.url+'" title="'+tournament.regionName+'">'+tournament.name+'<span class="ui-icon country '+tournament.flg+'"></span></a><div class="toolbar"></div></li>');addButton(clone,"remove","trash",WSLocalizer.dbRes("UIComponent","favourite_info_remove"),function(){removeFavoriteTournament(clone)});favoritesCount++;return clone}}function addFavoriteTournament(tournament,$trigger){if(gIdentified){if(favoritesCount==0){$("#my-favorites-note").hide()}if(favoritesCount<favoritesLimit){var favoriteTournamentIdsTable=favoriteTournamentIds.hashtable();if(!favoriteTournamentIdsTable[tournament.id]){createTournament(tournament).appendTo($("#favorite-tournaments-list"));$trigger.messageBox(ftAddedMessageOptions);NGEvents.fireGlobal("favoritetournamentsupdate",tournament.id);NGEvents.fireGlobal("favouritetournamentadded-"+tournament.id)}else{$trigger.messageBox(ftDuplicateMessageOptions)}}else{$trigger.messageBox(ftLimitMessageOptions)}}else{if(0==$(".favorite-tournaments-signin-message").length){$trigger.messageBox(ftSignInMessageOptions)}}}function removeFavoriteTournament($item){$item.remove();favoritesCount--;if(0==favoritesCount){$("#my-favorites-note").show()}NGEvents.fireGlobal("favoritetournamentsupdate",getTournamentId($item));NGEvents.fireGlobal("favouritetournamentremoved-"+getTournamentId($item))}function addPlusButton($li){addButton($li,"add","star","Add to favourites",function(){addFavoriteTournament(getTournamentById(getTournamentId($li)),$li)})}function addButton($li,css,iconType,title,onClick){var $toolBar=$(".toolbar",$li);var $button=$toolBar.append('<a class="'+css+' button-small ui-state-transparent-default" href="#" title="'+title+'"><span class="ui-icon ui-icon-'+iconType+'"></span></a>');$("."+css,$toolBar).click(function(e){e.preventDefault();if(onClick){onClick()}})}function getTournamentId($li){return stripTournamentIdFromHref($li.find("a.pt, a.t").attr("href"))}function stripTournamentIdFromHref(href){var re=/Tournaments\/(\d*)/;var id=href.match(re)[1];return id}function addTournamentById(tournamentId,$trigger){addFavoriteTournament(getTournamentById(tournamentId),$trigger)}this.stripTournamentIdFromHref=function(href){return stripTournamentIdFromHref(href)};this.initX=function(panel){$(panel).on("click","ul.regions li a.r",function(){$a=$(this);var tournaments=$a.addClass("e").blur().parent().find("ul.tournaments");if(tournaments.is(":visible")){$a.removeClass("e").blur().parent().find("ul.tournaments").hide()}else{tournaments.show();if(!$a.data("decorated")){$a.parent().find("ul.tournaments li").each(function(){addPlusButton($(this))});$a.data("decorated",true)}}return false})};this.init=function(){NGEvents.addGlobal("favoritetournamentsupdate",function(){var id,ids=[];$("#favorite-tournaments-list a.pt").each(function(){var href=$(this).attr("href");id=stripTournamentIdFromHref(href);ids.push(id)});WSUser.favoriteTournaments(ids);favoriteTournamentIds=ids});favoriteTournamentIds=WSUser.favoriteTournaments();if(0<favoriteTournamentIds.length){$("#my-favorites-note").hide();var idIndexes=favoriteTournamentIds.indextable();var $favLis=[];favoriteTournamentIds.forEach(function(id){if(!NG.isNumeric(id))return;var tournament=getTournamentById(id);$favLis[idIndexes[id]]=createTournament(tournament)});var favouriteTournamentslist=$("#favorite-tournaments-list");$favLis.forEach(function(t){t.appendTo(favouriteTournamentslist)})}else{$("#my-favorites-note").show()}$("#favorite-tournaments-list li a span.country").click(function(){return false});$("#tournament-nav-popup").show();var tablesTabsSetup=$.extend({},$.fn.tabs.base);tablesTabsSetup.activate.unshift(function(options){var init=options.init;var activate=options.activate;this.bind("activated",function(e,selected){var fn=init&&init[$(selected).attr("href")];if(fn){if(!$(selected).data("initialized")){fn();$(selected).data("initialized",true)}}if(activate&&activate[$(selected).attr("href")]){activate[$(selected).attr("href")]()}})});$("#tournament-groups").tabs({setup:tablesTabsSetup,defaultTab:window.innerWidth>720?0<WSUser.favoriteTournaments().length?"#favourites":"#popular":"nan",activate:{"#domestic":function(){},"#international":function(){}},init:{"#favorites":function(){},"#popular":function(){$("#popular").find("#popular-tournaments-list li").each(function(){addPlusButton($(this))})},"#domestic":function(){var model=allRegions.filter(function(e){return 0==e.type});function createIndex(model){function getMask(){var mask=[],index=0;mask[index++]="International";for(var i=0;i<model.length;i++){if(-1==mask.indexOf(model[i].name.charAt(0))){mask[index++]=model[i].name.charAt(0)}}return mask}function render(mask){var t=[];mask.forEach(function(o){t.push('<dd><a data-value="'+o+'" href="#" class="option">'+o+"</a></dd>")});return t.join("")}function init(){var mask=getMask();$index=$("#domestic-index");$index.html(render(mask));$(".option",$index).on("click",function(e){e.preventDefault();$(".option.selected",$index).removeClass("selected");$(this).addClass("selected").blur();NGEvents.fireGlobal("domesticindexselected",[$(this).attr("data-value")])});$(".option",$index)[1].click()}init()}function updateRegions(index){var regions;if("International"==index){regions=allRegions.filter(function(e){return 1==e.type})}else{regions="All"==index?model:model.filter(function(o){return index==o.name.charAt(0)})}var colCount=5;var itemsPerColCount=Math.ceil(regions.length/colCount);var currentRegionIdx=0;var currentRegion=null;var idxHtml="";var html="";for(var i=0;i<colCount;i++){html+='<div class="region-column"><ul class="regions">';for(var j=0;j<itemsPerColCount;j++){if(currentRegionIdx==regions.length){break}currentRegion=regions[currentRegionIdx];html+="<li >"+idxHtml+'<a class="r iconize iconize-icon-left" href="#"><span class="ui-icon country '+currentRegion.flg+'"></span>'+currentRegion.name+"</a>"+'<ul class="tournaments" style="display: none">';for(var l=0;l<currentRegion.tournaments.length;l++){html+='<li class="hover-target"><a class="t" href="'+currentRegion.tournaments[l].url+'">'+currentRegion.tournaments[l].name+'</a><div class="toolbar"></div></li>'}html+="</ul>"+"</li>";currentRegionIdx++}html+="</ul></div>"}$("#domestic-regions").html(html)}NGEvents.addGlobal("domesticindexselected",function(index){updateRegions(index)});createIndex(model);favoriteTournaments.initX("#domestic")},"#international":function(){var regions=allRegions.filter(function(e){return 1==e.type});var colCount=5;var itemsPerColCount=Math.ceil(regions.length/colCount);var currentRegionIdx=0;var currentRegion=null;var idxHtml=null;var html="";for(var i=0;i<colCount;i++){html+='<div class="region-column"><ul class="regions">';for(var j=0;j<itemsPerColCount;j++){if(currentRegionIdx==regions.length){break}currentRegion=regions[currentRegionIdx];html+="<li>"+'<a class="r iconize iconize-icon-left" href="#"><span class="ui-icon country '+currentRegion.flg+'"></span>'+currentRegion.name+"</a>"+'<ul class="tournaments" style="display: none">';for(var l=0;l<currentRegion.tournaments.length;l++){html+='<li class="hover-target"><a class="t" href="'+currentRegion.tournaments[l].url+'">'+currentRegion.tournaments[l].name+'</a><div class="toolbar"></div></li>'}html+="</ul>"+"</li>";currentRegionIdx++}html+="</ul></div>"}$("#international").html(html);favoriteTournaments.initX("#international")}}});NGEvents.addGlobal("addFavouriteTournament",function(tournamentId,$trigger){addTournamentById(tournamentId,$trigger)})}}});define("ngclock",["ngevents"],function(NGEvents){return{_date:null,_timezoneOffset:null,init:function(utc,offset){var self=this;this._date=new Date(utc.valueOf()+offset*6e4);this._timezoneOffset=offset;setInterval(function(){self._date=new Date(self._date.valueOf()+1e3);if(0==self._date.getSeconds())NGEvents.fire(self,"minutetick",[new Date(self._date.valueOf())])},1e3)},now:function(){return new Date(this._date.valueOf())},utcNow:function(){return new Date(this._date.valueOf()-this._timezoneOffset*6e4)}}});Date.prototype.toTimeStr=function(){return this.toTimeString().substr(0,5)};Date.prototype.toDateStr=function(){var s=this.toDateString();return s.substr(0,s.length-5)};Date.prototype.toLocal=function(timezoneOffset){return new Date(this.valueOf()+(timezoneOffset||0)*6e4)};Date.prototype.getWeek=function(){var target=new Date(this.valueOf());var dayNr=(this.getDay()+6)%7;target.setDate(target.getDate()-dayNr+3);var jan4=new Date(target.getFullYear(),0,4).getStartOfWeek();var dayDiff=(target-jan4)/864e5;var weekNr=1+Math.floor(dayDiff/7);return weekNr};Date.prototype.getWeekYear=function(){var target=new Date(this.valueOf());target.setDate(target.getDate()-(this.getDay()+6)%7+3);return target.getFullYear()};Date.prototype.getStartOfWeek=function(){var target=new Date(this.valueOf());target.setDate(target.getDate()-(6+target.getDay())%7);return target};Date.prototype.getEndOfWeek=function(){var target=new Date(this.valueOf());target.setDate(target.getDate()+(6-(6+target.getDay())%7));return target};Date.prototype.getEndOfMonth=function(){return new Date(this.getFullYear(),this.getMonth(),Date.daysInMonth[this.getMonth()])};Date.prototype.getStartOfMonth=function(){return new Date(this.getFullYear(),this.getMonth(),1)};Date.parseWeek=function(s){var y=s.substr(0,4)>>>0,w=s.substr(5,2)>>>0,date=new Date(y,0,4);date.setDate(date.getDate()-(6+date.getDay())%7+(w-1)*6);return date};Date.prototype.addDays=function(days){this.setDate(this.getDate()+days)};Date.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(format,ignore_offset){if(Date.formatFunctions[format]==null){Date.createNewFormat(format)}var func=Date.formatFunctions[format];if(ignore_offset||!this.offset){return this[func]()}else{return new Date(this.valueOf()-this.offset)[func]()}};Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;var code="Date.prototype."+funcName+" = function(){return ";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else if(special){special=false;code+="'"+String.escape(ch)+"' + "}else{code+=Date.getFormatCode(ch)}}eval(code.substring(0,code.length-3)+";}")};Date.getFormatCode=function(character){switch(character){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(character)+"' + "}};Date.parseDate=function(input,format){if(Date.parseFunctions[format]==null){Date.createParser(format)}var func=Date.parseFunctions[format];return Date[func](input)};Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++;var regexNum=Date.parseRegexes.length;var currentGroup=1;Date.parseFunctions[format]=funcName;var code="Date."+funcName+" = function(input){\n"+"var y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = 0;\n"+"var d = new Date();\n"+"y = d.getFullYear();\n"+"m = d.getMonth();\n"+"d = d.getDate();\n"+"var results = input.match(Date.parseRegexes["+regexNum+"]);\n"+"if (results && results.length > 0) {";var regex="";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else if(special){special=false;regex+=String.escape(ch)}else{obj=Date.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g;regex+=obj.s;if(obj.g&&obj.c){code+=obj.c}}}code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n"+"{return new Date(y, m, d, h, i, s).applyOffset(z);}\n"+"else if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n"+"{return new Date(y, m, d, h, i).applyOffset(z);}\n"+"else if (y > 0 && m >= 0 && d > 0 && h >= 0)\n"+"{return new Date(y, m, d, h).applyOffset(z);}\n"+"else if (y > 0 && m >= 0 && d > 0)\n"+"{return new Date(y, m, d).applyOffset(z);}\n"+"else if (y > 0 && m >= 0)\n"+"{return new Date(y, m).applyOffset(z);}\n"+"else if (y > 0)\n"+"{return new Date(y).applyOffset(z);}\n"+"}return null;}";Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$");eval(code)};Date.formatCodeToRegex=function(character,currentGroup){switch(character){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:0,c:null,s:"(?:\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+currentGroup+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+currentGroup+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+currentGroup+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+currentGroup+"], 10);\n"+"y = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+currentGroup+"] == 'am') {\n"+"if (h == 12) { h = 0; }\n"+"} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+currentGroup+"] == 'AM') {\n"+"if (h == 12) { h = 0; }\n"+"} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+currentGroup+"], 10);\n",s:"(\\d{2})"};case"O":case"P":return{g:1,c:"z = Date.parseOffset(results["+currentGroup+"], 10);\n",s:"(Z|[+-]\\d{2}:?\\d{2})"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:1,c:"s = parseInt(results["+currentGroup+"], 10);\n",s:"([+-]\\d{1,5})"};default:return{g:0,c:null,s:String.escape(character)}}};Date.parseOffset=function(str){if(str=="Z"){return 0}var seconds;seconds=parseInt(str[0]+str[1]+str[2])*3600;if(str[3]==":"){seconds+=parseInt(str[4]+str[5])*60}else{seconds+=parseInt(str[3]+str[4])*60}return seconds};Date.prototype.applyOffset=function(offset_seconds){this.offset=offset_seconds*1e3;this.setTime(this.valueOf()+this.offset);return this};Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3").replace(/^.*?[0-9]{4} \(([A-Z]{3})\)/,"$1")};Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(this.getTimezoneOffset()/60),2,"0")+String.leftPad(this.getTimezoneOffset()%60,2,"0")};Date.prototype.getDayOfYear=function(){var num=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var i=0;i<this.getMonth();++i){num+=Date.daysInMonth[i]}return num+this.getDate()-1};Date.prototype.getWeekOfYear=function(){var now=this.getDayOfYear()+(4-this.getDay());var jan1=new Date(this.getFullYear(),0,1);var then=7-jan1.getDay()+4;return String.leftPad((now-then)/7+1,2,"0")};Date.prototype.isLeapYear=function(){var year=this.getFullYear();return(year&3)==0&&(year%100||year%400==0&&year)};Date.prototype.getFirstDayOfMonth=function(){var day=(this.getDay()-(this.getDate()-1))%7;return day<0?day+7:day};Date.prototype.getLastDayOfMonth=function(){var day=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return day<0?day+7:day};Date.prototype.getDaysInMonth=function(){Date.daysInMonth[1]=this.isLeapYear()?29:28;return Date.daysInMonth[this.getMonth()]};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};String.escape=function(string){return string.replace(/('|\\)/g,"\\$1")};String.leftPad=function(val,size,ch){var result=new String(val);if(ch==null){ch=" "}while(result.length<size){result=ch+result}return result};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.patterns={ISO8601LongPattern:"Y\\-m\\-d\\TH\\:i\\:sO",ISO8601ShortPattern:"Y\\-m\\-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"};define("src/Date",function(){});define("WS/WS.Clock",["params","ngevents","src/Date","jquery"],function(params,NGEvents){return{init:function(clock){this.updateDateTime(clock.now());NGEvents.add(clock,"minutetick",this.updateDateTime)},updateDateTime:function(date){$clock=$("#clock");$("#time",$clock).html(date.toTimeStr());var options={weekday:"long",year:"numeric",month:"long",day:"numeric"};$("#date",$clock).html(date.toLocaleDateString(params.config.site.gCurrentLocale,options))}}});NGGA.Categories={Home:"Home",News:"News",Tournament:"Tournament",Team:"Team",Match:"Match",Player:"Player",Livescores:"Livescores",Facts:"Facts",Shared:"Shared",ContentTeam:"ContentTeam",Scripts:"Scripts",Articles:"Articles",Slides:"Slides"};NGGA.Actions={ClickPlayer:"ClickPlayer",ClickPlayerStats:"ClickPlayerStats",ClickLivescores:"ClickLivescores",ClickStatistics:"ClickStatistics",ClickTeamStatistics:"ClickTeamStatistics",ClickPlayerStatistics:"ClickPlayerStatistics",ClickTournamentFixtures:"ClickTournamentFixtures",ClickMenuBar:"ClickMenuBar",ClickTeam:"ClickTeam",ClickTeamFixtures:"ClickTeamFixtures",ClickSignIn:"ClickSignIn",ClickJoinUs:"ClickJoinUs",ClickTournament:"ClickTournament",ClickNews:"ClickNews",ClickArticles:"ClickArticle",ClickMatchReport:"ClickMatchReport",ClickPreview:"ClickPreview",ClickMatch:"ClickMatch",ClickLiveMatch:"ClickLiveMatch",ClickMatchStatistics:"ClickMatchStatistics",ClickTeamForm:"ClickTeamForm",ClickHead2Head:"ClickHead2Head",ClickPlayerFixtures:"ClickPlayerFixtures",ClickTournamentDetails:"ClickTournamentDetails",ClickSelectTournament:"ClickSelectTournament",ClickFilter:"ClickFilter",ClickMatchSelection:"ClickMatchSelection",ClickTab:"ClickTab",ClickIncidentDeatils:"ClickIncidentDetails",ClickHighlightTeams:"ClickHighlightTeams",ClickShowMore:"ClickShowMore",ClickShowLess:"ClickShowLess",ClickVotingClosedAtKickOff:"ClickVotingClosedAtKickOff",ClickStream:"ClickStream",ClickStatus:"ClickStatus",ClickCategory:"ClickCategory",ClickNewsTag:"ClickNewsTag",ClickExternalLinks:"ClickExternalLinks",ClickInternalLinks:"ClickInternalLinks",ClickPostAuthor:"ClickPostAuthor",ClickSocialLinks:"ClickSocialLinks",ClickDate:"ClickDate",ClickBreadcrumbNav:"ClickBreadcrumbNav",ClickDateToggle:"ClickDateToggle",ClickMarketFilter:"ClickMarketFilter",ClickTournamentFilter:"ClickTournamentFilter",ClickMainNavigation:"ClickMainNavigation",ClickCustom:"ClickCustom",AdBlockDetected:"AdblockDetected",AuthorVisited:"AuthorVisited",PublishHourVisited:"PublishHourVisited",PublishDayVisited:"PublishDayVisited",CategoryVisited:"CategoryVisited",ClickRelatedRead:"ClickRelatedRead",ClickSlide:"ClickSlide"};define("ngga",["ng"],function(){});define("plugins/jquery.isVisible",["jquery"],function($){(function($){$.fn.isVisible=function(){return $.expr.filters.visible(this[0])}})(jQuery)});define("mod_site-common",["params","WS/WS.Localizer","WS/WS.FavoriteTournaments","ngclock","WS/WS.Clock","jquerycookie","WS/WS.FavoriteTournaments","ngga","stringext","plugins/jquery.isVisible","jquery"],function(params,WSLocalizer,WSFavoriteTournaments,NGClock,WSClock){return function(){$.ajaxSetup({headers:{[params.config.site.gSiteHeaderName]:params.config.site.gSiteHeaderValue}});WSLocalizer.init(params.config.site.gCurrentLocale,params.config.site.gLocalizationResourcesVersion);NGClock.init(new Date(params.config.site.gUtcSeed),params.config.site.gUtcOffSetNow);if(params.config.site.gRdCountries){function hostRedirect(ctCode){if(ctCode!=null){$.cookie("ct",ctCode,{expires:30,domain:".whoscored.com"})}if(params.config.site.gRdCountries.includes(ctCode)){$(location).attr("host","1xbet.whoscored.com")}if(ctCode=="IT"){$(location).attr("host","it.whoscored.com")}}var ct=$.cookie("ct");if(null==ct||""==ct){var v=$.ajaxSettings.headers[params.config.site.gSiteHeaderName];delete $.ajaxSettings.headers[params.config.site.gSiteHeaderName];$.getJSON("https://extreme-ip-lookup.com/json/?key=fnEktirYODdp1mXmsUmp",function(data){hostRedirect(data.countryCode)});$.ajaxSettings.headers[params.config.site.gSiteHeaderName]=v}else{hostRedirect(ct)}}window.favoriteTournaments=new WSFavoriteTournaments;$(function(){var tournamentCollapsedIcon="ui-icon-triangle-1-s",tournamentExpandedIcon="ui-icon-triangle-1-n";$("#tournament-groups").bind("activation-finished",function(e,selected){$("#tournament-groups .ui-icon."+tournamentExpandedIcon).each(function(){if(!$(this).parent("a").hasClass("selected")){$(this).removeClass(tournamentExpandedIcon).addClass(tournamentCollapsedIcon)}});var $tournamentGroup=$(selected);var $groupPanel=$($tournamentGroup.attr("href"));var $icon=$(".ui-icon",$tournamentGroup);if($groupPanel.isVisible()){if($icon.hasClass(tournamentCollapsedIcon)){$icon.removeClass(tournamentCollapsedIcon).addClass(tournamentExpandedIcon)}else{$icon.removeClass(tournamentExpandedIcon).addClass(tournamentCollapsedIcon);$groupPanel.hide()}}else{$icon.removeClass(tournamentCollapsedIcon).addClass(tournamentExpandedIcon);$groupPanel.show()}});favoriteTournaments.init()});$("#dropdown-nav").click(function(){$("#dropdown-nav-menu").toggle()});$(document).mouseup(function(e){var container=$("#dropdown-nav");if(!container.is(e.target)&&container.has(e.target).length===0){$("#dropdown-nav-menu").hide()}});$(function(){WSClock.init(NGClock)});var loggedInUsername="";$("#accountInfoFrame").on("load",function(){function isValidUrl(url){var controlUrl=url?"?originalUrl="+url.toLowerCase().substr(getLastIndexOfProtocolFromUrl(url)):"";return!(-1<controlUrl.indexOf("/register")||-1<controlUrl.indexOf("/login")||-1<controlUrl.indexOf("/verifyemail"))}function cleanUrl(url){return isValidUrl(url)?url?"?originalUrl="+url.substr(getLastIndexOfProtocolFromUrl(url)):"":""}function getLastIndexOfProtocolFromUrl(url){if(-1<url.indexOf("http://")){return url.lastIndexOf("http://")}if(-1<url.indexOf("https://")){return url.lastIndexOf("https://")}return""}var contents=$(this).contents(),originalUrl=cleanUrl(parent.location.toString());contents.find("#login").click(function(e){e.preventDefault();parent.location=$(this).attr("href")+originalUrl});contents.find("#register").click(function(e){e.preventDefault();parent.location=$(this).attr("href")+originalUrl});contents.find("#logout").click(function(e){e.preventDefault();parent.location=$(this).attr("href")+originalUrl})}).attr("src","/Accounts/Info");$("body").on("accountControls-click",function(e,username){$("#accountControlsDropdown").toggleClass("activeAccount");loggedInUsername=username});$(document).mouseup(function(e){var $accountControlsDropdown=$("#accountControlsDropdown");if(!$accountControlsDropdown.is(e.target)&&$accountControlsDropdown.has(e.target).length===0){$accountControlsDropdown.removeClass("activeAccount")}})}});define("WS/WS.UrlHelper",["WS/WS.Localizer"],function(WSLocalizer){var urlHelper={PlayerLink:function(playerId,playerHtml,clazz,title,playerName){if(!playerHtml)return"";if(!playerId||0==playerId)return playerHtml;var seoText=playerName?"/"+this.GetSeoTextForPlayer(playerName):"/"+this.GetSeoTextForPlayer(playerHtml);return'<a class="player-link {2}" title="{3}" href="/Players/{0}/Show{4}">{1}</a>'.format(playerId,playerHtml,clazz?clazz:"",title?title:"",seoText)},TeamLink:function(teamId,teamHtml,clazz,title,teamName,teamCountryName){if(!teamHtml)return;if(!teamId||0==teamId)return teamHtml;var seoText=teamCountryName&&teamName?"/"+this.GetSeoTextForTeam(teamCountryName,teamName):"";return'<a class="team-link {2}" title="{3}" href="/Teams/{0}/Show{4}">{1}</a>'.format(teamId,teamHtml,clazz?clazz:"",title?title:"",seoText)},MatchLinkHrefGenerator:function(matchId,regionName,tournamentName,seasonName,homeTeamName,awayTeamName,actionName){if(!matchId)return;return"/Matches/"+matchId+"/"+actionName+"/"+this.GetSeoTextForMatch(regionName,tournamentName,seasonName,homeTeamName,awayTeamName)},SeoHelper:function(urlString){var encodedUrl=urlString.trim().split(this.unwantedCharactersRegex).join("-");encodedUrl=encodedUrl.split(this.spacesAndSlashesRegex).join("-");encodedUrl=encodedUrl.split(this.multiDashesRegex).join("-");return encodedUrl},GetSeoTextForTeam:function(regionName,teamName){return this.SeoHelper([regionName,teamName].join("-"))},GetSeoTextForTournament:function(regionName,tournamentName){return this.SeoHelper([regionName,tournamentName].join("-"))},GetSeoTextForStage:function(regionName,tournamentName,seasonName){return this.SeoHelper([regionName,tournamentName,seasonName].join("-"))},GetSeoTextForMatch:function GetSeoTextForMatch(regionName,tournamentName,seasonName,homeTeamName,awayTeamName){return this.SeoHelper([regionName,tournamentName,seasonName,homeTeamName,awayTeamName].join("-"))},GetSeoTextForPlayer:function(playerName){if(playerName){return this.SeoHelper(playerName)}return""},GetSeoTextForOfficial:function(officialName){return this.SeoHelper(officialName)},GenerateLocalizedRegionName:function(id,countryName){return this.GenerateLocalizedName(id,countryName,"countryName")},GenerateLocalizedName:function(id,name,resSet){if(!id){return name}var translatedName=WSLocalizer.dbRes(resSet,id.toString());return translatedName==id.toString()?name:translatedName},unwantedCharactersRegex:new RegExp("[\\[\\]~#%&*{}/;.=+()%$!`^@',_:<>?|\"-]"),spacesAndSlashesRegex:new RegExp("[\\s+\\\\]"),multiDashesRegex:RegExp("-+")};return urlHelper});define("WS/WS.MatchHelper",[],function(){var unexpectedTerminationStatuses=[{v:"Abd",t:"Abandoned"},{v:"Post",t:"Postponed"},{v:"Can",t:"Canceled"},{v:"Susp",t:"Suspended"}];var matchHelper={matchTerminatedUnexpectedly:function(elapsed){for(var i=0;i<unexpectedTerminationStatuses.length;i++){if(elapsed==unexpectedTerminationStatuses[i].v){return true}}return false},matchTerminatedUnexpectedlyToolTip:function(elapsed){for(var i=0;i<unexpectedTerminationStatuses.length;i++){if(elapsed==unexpectedTerminationStatuses[i].v){return unexpectedTerminationStatuses[i].t}}return""}};return matchHelper});define("WS/WS.TeamHelper",["params"],function(params){return{TeamEmblemUrl:function(teamid,title,style){if(gImageUrl&&teamid){return"<img "+(title?'title="'+title+'"':"")+(style?' style="'+style+'"':"")+' src="'+params.config.site.gImageUrl+"teams/"+teamid+'.png" class="team-emblem">'}return""}}});define("WS/WS.MatchHeader",["WS/WS.Localizer","WS/WS.UrlHelper","WS/WS.MatchHelper","WS/WS.TeamHelper","moment","jquery"],function(WSLocalizer,WSUrlHelper,WSMatchHelper,WSTeamHelper,moment){matchHeaderView=function(header){var html=[];html.push("<div>");html.push('<div class="teams-score-info">');html.push('<span class="col12-lg-4 col12-m-4 col12-s-0 col12-xs-0 home team">'+WSUrlHelper.TeamLink(header.HomeTeamId,header.HomeTeamName,null,null,header.HomeTeamName,header.HomeTeamCountryName)+"</span>");html.push('<span class="col12-lg-0 col12-m-0 col12-s-5 col12-xs-5 home team small-home-team">'+WSUrlHelper.TeamLink(header.HomeTeamId,header.HomeTeamName,null,null,header.HomeTeamName,header.HomeTeamCountryName)+"</span>");html.push('<span class="col12-lg-4 col12-m-4 col12-s-2 col12-xs-0 result">'+header.Score+"</span>");html.push('<span class="col12-lg-0 col12-m-0 col12-s-0 col12-xs-2 result">'+header.Score.replace(/ /g,"")+"</span>");html.push('<span class="col12-lg-4 col12-m-4 col12-s-0 col12-xs-0 away team">'+WSUrlHelper.TeamLink(header.AwayTeamId,header.AwayTeamName,null,null,header.AwayTeamName,header.AwayTeamCountryName)+"</span>");html.push('<span class="col12-lg-0 col12-m-0 col12-s-5 col12-xs-5 away team small-away-team">'+WSUrlHelper.TeamLink(header.AwayTeamId,header.AwayTeamName,null,null,header.AwayTeamName,header.AwayTeamCountryName)+"</span>");html.push("</div>");html.push('<div class="icons-details-container">');html.push('<span class="col12-lg-4 col12-m-4 col12-s-0 col12-xs-0 crest">'+WSTeamHelper.TeamEmblemUrl(header.HomeTeamId)+"</span>");html.push('<span class="col12-lg-0 col12-m-0 col12-s-3 col12-xs-3 crest small-home-crest">'+WSTeamHelper.TeamEmblemUrl(header.HomeTeamId)+"</span>");html.push('<span class="col12-lg-4 col12-m-4 col12-s-6 col12-xs-6">');html.push('<div class="info-block cleared">');html.push("<dl>");var matchHasTerminatedUnExpectedly=WSMatchHelper.matchTerminatedUnexpectedly(header.Elapsed);if(header.Elapsed){html.push('<dt>{0}:</dt><dd class="status">'.format(WSLocalizer.dbRes("MatchCentre","dt_mc_header_elapsed")));if(!matchHasTerminatedUnExpectedly)html.push('<span class="'+(header.Finished?"finished":"inplay")+'" rc">'+header.Elapsed+"</span>");else html.push("<span>"+header.Elapsed+"</span>");html.push("</dd>")}html.push("</dl>");html.push("</div>");html.push('<div class="info-block cleared">');html.push("<dl>");if(header.HalftimeScore){html.push("<dt>{0}:</dt><dd>".format(WSLocalizer.dbRes("MatchCentre","dt_mc_header_half_time"))+header.HalftimeScore+"</dd>")}if(header.FulltimeScore){html.push("<dt>{0}:</dt><dd>".format(WSLocalizer.dbRes("MatchCentre","dt_mc_header_full_time"))+header.FulltimeScore+"</dd>")}if(header.ExtratimeScore){html.push("<dt>{0}:</dt><dd>".format(WSLocalizer.dbRes("MatchCentre","dt_mc_header_extra_time"))+header.ExtratimeScore+"</dd>")}if(header.PenaltyShootout){html.push("<dt>{0}:</dt><dd>".format(WSLocalizer.dbRes("MatchCentre","dt_mc_header_penalty_shootout"))+header.PenaltyShootout+"</dd>")}html.push("</dl>");html.push("</div>");html.push('<div class="info-block cleared">');html.push("<dl>");html.push("<dt>{0}:</dt>".format(WSLocalizer.dbRes("MatchCentre","dt_mc_header_kick_off")));html.push("<dd>"+header.StartTime+"</dd>");html.push("<dt>{0}:</dt>".format(WSLocalizer.dbRes("MatchCentre","dt_mc_header_date")));html.push("<dd>"+header.StartDate+"</dd>");html.push("</dl>");html.push("</div>");html.push("</span>");html.push('<span class="col12-lg-4 col12-m-4 col12-s-0 col12-xs-0 crest">'+WSTeamHelper.TeamEmblemUrl(header.AwayTeamId)+"</span>");html.push('<span class="col12-lg-0 col12-m-0 col12-s-3 col12-xs-3 crest small-away-crest">'+WSTeamHelper.TeamEmblemUrl(header.AwayTeamId)+"</span>");html.push("</div>");html.push("</div>");return html.join("")};matchHeaderModel=function(data){var o={};o.HomeTeamId=data[0];o.AwayTeamId=data[1];o.HomeTeamName=data[2];o.AwayTeamName=data[3];var startTime=moment.utc(data[4],["YYYY-MM-DD HH:mm:SS","DD.MM.YYYY HH:mm:SS"]).format("HH:mm");var startDate=moment.utc(data[5],["YYYY-MM-DD HH:mm:SS","DD.MM.YYYY HH:mm:SS"]).format("ddd, DD-MMM-YY");o.StartTime=startTime;o.StartDate=startDate;o.Status=data[6];o.Finished=6==o.Status;o.Elapsed=data[7];o.HalftimeScore=data[8];o.FulltimeScore=data[9];o.ExtratimeScore=data[10];o.PenaltyShootout=data[11];o.Score=data[12];o.HomeTeamCountryName=data[13];o.AwayTeamCountryName=data[14];return o};return function(config){var $view;init(config);this.load=function(data){var header=matchHeaderModel(data);$view.html(matchHeaderView(header))};function init(config){$view=$("#"+config.view.renderTo)}}});define("mod_matchheader",["params","WS/WS.MatchHeader","jquery"],function(params,WSMatchHeader){return function(){var matchHeader=new WSMatchHeader({view:{renderTo:"match-header"}});matchHeader.load(params.config.matchheader.input);$(document).bind("match-live-header-"+params.config.matchheader.matchId+"-updated",function(options,data){matchHeader.load(data)})}});define("WS/WS.Comments",["WS/WS.Localizer","jquery"],function(WSLocalizer){return function($){return{init:function(){var getCommentsCharacterRemainingText=function(charLimit){return WSLocalizer.dbRes("Comments","info_comments_characters_remaining").format(charLimit)};$(".comments-textarea").each(function(){var $this=$(this),limit=parseInt($this.attr("maxlength"),10);$(".comments-post-count").html(getCommentsCharacterRemainingText(limit));$this.bind("keyup",function(){var value=$this.val();if(limit<=$this.val().length){$this.val(value.substr(0,limit))}$(".comments-post-count").html(getCommentsCharacterRemainingText(limit-$this.val().length))})});$("#comments-post-form").removeAttr("onsubmit").submit(function(){if(0==$(".comments-textarea").val().length){$(".comments-post-result").html(WSLocalizer.dbRes("Comments","info_comments_enter_a_comment_to_post"));return false}var $form=$(this);$(".comments-post-result").html("");$form.find(".post-comment").attr("disabled",true);$form.find(".post-comment").val("Posting..");$.ajax({type:"POST",url:"/Comments/",cache:false,data:$form.serialize(),dataType:"json",success:function(json){if(0==json.ReturnCode){var $newComment=getNewCommentElementFromServerResponseData(json.Data);$(".comments-list").prepend($newComment);$form.find(".comments-textarea").val("").trigger("keyup")}else if(-1==json.ReturnCode){$(".comments-post-result").html("Please sign in to post comments.")}else{$(".comments-post-result").html(jsn.oMessage)}},error:function(){$(".comments-post-result").html(WSLocalizer.dbRes("Comments","info_comments_error_posting"))},complete:function(){$form.find(".post-comment").attr("disabled",false);$form.find(".post-comment").val("Post")}});return false});function rateComment($comment,ratingCount,rating,callback){var $ratingCount=$comment.find(ratingCount);$.ajax({type:"POST",url:"/Comments/"+$comment.attr("data-comment-id")+"/Rate",cache:false,data:{rating:rating},dataType:"json",success:function(json){if(0==json.ReturnCode){callback($comment,$ratingCount)}else if(-1==json.ReturnCode){$comment.find(".authentication-message").show()}},error:function(json){$ratingCount.replaceWith('<span class="error">{0}</span>'.format(WSLocalizer.dbRes("Comments","info_comments_error_rating")))}})}$(".comment .rate-positive").click(function(e){e.preventDefault();var $this=$(this);rateComment($("#comment-"+$(this).attr("data-comment-id")),".rating-positive",1,function($comment,$ratingCount){$this.addClass("done");$ratingCount.addClass("rated").html("+"+((parseInt($ratingCount.html(),10)||0)+1))})});$(".comment .rate-negative").click(function(e){e.preventDefault();var $this=$(this);rateComment($("#comment-"+$(this).attr("data-comment-id")),".rating-negative",-1,function($comment,$ratingCount){$this.addClass("done");$ratingCount.addClass("rated").html((parseInt($ratingCount.html(),10)||0)-1)})});$(".comment .report").click(function(e){e.preventDefault();var $this=$(this),$comment=$("#comment-"+$(this).attr("data-comment-id"));$.ajax({type:"POST",url:"/Comments/"+$comment.attr("data-comment-id")+"/Report",cache:false,dataType:"json",success:function(json){if(0==json.ReturnCode){$this.addClass("done").html("Reported")}else if(-1==json.ReturnCode){$comment.find(".authentication-message").show()}},error:function(json){$this.after('<span class="error">{0}</span>'.format(WSLocalizer.dbRes("Comments","info_comments_error_reporting")))}})});$(".expand,.collapse").click(function(e){e.preventDefault();var commentToToggleId=$(this).attr("data-comment-id");var willShow=$(this).attr("class").indexOf("collapse")<0;var commentToToggleIds=[];commentToToggleIds[0]=commentToToggleId;var numberOfChildrensToHide=$('li[data-reply-to-id="'+commentToToggleId+'"]').length;toggleExpandCollapseButtonHTML(commentToToggleId,willShow,numberOfChildrensToHide);toggleCommentContent(commentToToggleId,willShow);toggleCommentAndItsChildren(commentToToggleIds,willShow)});function toggleCommentContent(commentId,willShow){$("#comment-"+commentId+"-content").toggle(willShow);$("#comment-"+commentId+"-controls").toggle(willShow)}function toggleExpandCollapseButtonHTML(commentId,willShow,numberOfChildrensToHide){var $button=$("#comment-"+commentId+"-toggleButton");var numberOfCommentsToHide=numberOfChildrensToHide+1;if(!willShow){$button.html(numberOfChildrensToHide?"[ +"+numberOfCommentsToHide+" ]":"[ + ]");$button.addClass("expand");$button.removeClass("collapse")}else{$button.html("[ - ]");$button.removeClass("expand");$button.addClass("collapse")}}function toggleCommentAndItsChildren(toggledCommentIds,willShow){for(var i=0;i<toggledCommentIds.length;i++){$("li[data-reply-to-id="+toggledCommentIds[i]+"]").each(function(){$(this).toggle(willShow);var toggledCommentId=$(this).attr("data-comment-id");toggledCommentIds[i]=null;toggleExpandCollapseButtonHTML(toggledCommentId,willShow);toggleCommentContent(toggledCommentId,willShow);if(toggledCommentIds.indexOf(toggledCommentId)<0){toggledCommentIds.push(toggledCommentId);toggleCommentAndItsChildren(toggledCommentIds,willShow)}})}}function getNewCommentElementFromServerResponseData(jsonData){var newCommentHTML=jsonData;var $newComment=$(newCommentHTML);$newComment.removeClass("striped");$newComment.css("background-color","#FFFDD6");$newComment.find("[data-display-for-only-existing]").hide();return $newComment}$(".reply").click(function(e){e.preventDefault();var replyToId=$(this).attr("data-comment-id");var parentCommentLiElement=$("#comment-"+replyToId);var entityId=$("input[name=entityId]").val();var replyElementUniqueId=Date.now();var parentCommentDepth=$("#comment-"+replyToId+"-depth").val();var maxDepth=1;var marginLeft=parentCommentDepth>=maxDepth?maxDepth*2:parentCommentDepth+2;var $div=$('<div id="comment-div-reply-to-'+replyElementUniqueId+'" style="margin-left: '+marginLeft+'em; position: relative"></div>');var $form=$('<form id="comment-form-reply-to-'+replyElementUniqueId+'"></form>');$form.append('<input type="hidden" name="replyToId" value="'+replyToId+'">');$form.append('<textarea id="comment-'+replyElementUniqueId+'-text" name="commentText" class="comments-textarea" style="width:99%" maxlength="1000"></textarea>');$form.append('<input type="hidden" name="entityId" value="'+entityId+'">');$form.append('<button id="replyToButton'+replyElementUniqueId+'" type="button" class="post-comment">'+WSLocalizer.dbRes("Comments","btn_comments_reply_to")+"</button>");$form.append('<span class="comments-post-result-'+replyElementUniqueId+'"></span>');$div.append($form);var $closeButton=$('<div id="comment-'+replyElementUniqueId+'-close-button" class="comment-close-button" style="position: absolute; top: 0.5em; right: 0.5em;" > x </div>');$div.append($closeButton);parentCommentLiElement.append($div);$("#comment-"+replyElementUniqueId+"-text").val("@"+$("#comment-"+replyToId+"-author").text()+" ");var commentText=$("#comment-"+replyElementUniqueId+"-text").val();$("#comment-"+replyElementUniqueId+"-text").focus().val("").val(commentText);$("#replyToButton"+replyElementUniqueId).on("click",function(e){$form.find(".post-comment").attr("disabled",true);$(this).html("Posting..");var postButton=$(this);$.ajax({type:"POST",url:"/Comments/"+replyToId+"/Reply",cache:false,data:$form.serialize(),dataType:"json",success:function(json){if(0==json.ReturnCode){var $newComment=getNewCommentElementFromServerResponseData(json.Data);$(".comments-post-result-"+replyElementUniqueId).html("Success");$div.prepend($newComment);$form.hide();$closeButton.hide()}else if(-1==json.ReturnCode){postButton.html("Post");var pleaseLoginInfoText=WSLocalizer.dbRes("Comments","info_comments_please_login_to_post");var signInText=WSLocalizer.dbRes("Comments","lnk_comments_sign_in");var joinUsText=WSLocalizer.dbRes("Comments","lnk_comments_join_us");$(".comments-post-result-"+replyElementUniqueId).html(pleaseLoginInfoText+'<a href="/Accounts/Login" target="_blank" style="border-radius: 3px;padding: 3px;font-weight: bold;color: #fff;background-color: #73AC25;">{0}</a>'.format(signInText)+'<a href="/Accounts/Register" target="_blank" style="border-radius: 3px;padding: 3px;font-weight: bold;color: #fff;background-color: #ee4500;">{0}</a>'.format(joinUsText))}else{$(".comments-post-result-"+replyElementUniqueId).html(json.Message)}},error:function(){$(".comments-post-result-"+replyElementUniqueId).html(WSLocalizer.dbRes("Comments","info_comments_error_posting"))},complete:function(){postButton.attr("disabled",false)}})});$("#comment-"+replyElementUniqueId+"-close-button").on("click",function(e){$("#comment-div-reply-to-"+replyElementUniqueId).hide()})})}}}(jQuery)});define("mod_comments",["WS/WS.Comments"],function(WSComments){return function(){WSComments.init()}});define("WS/WS.OddsHelper",["jquery","jquerycookie"],function(){var ConvertDecimalToFractional=function(){var memoOdds={};function convertDecimalToFractional(numToConvert){if(numToConvert<1.15){numToConvert=Math.round(numToConvert*100)/100;numToConvert=numToConvert%.02+numToConvert}else{numToConvert=Math.round(numToConvert*20)/20}var value;if(numToConvert in memoOdds){value=memoOdds[numToConvert]}else{var wholeNumber=parseInt(numToConvert);var decimalPart=Math.round((numToConvert-wholeNumber)*20)/20;var multiple=parseInt(Math.pow(10,decimalPart.toString().substring(2).length));var num=parseInt(multiple*decimalPart);var denom=multiple;if(num>0){while(num%2+denom%2==0){num=num/2;denom=denom/2}while(num%5+denom%5==0){num=num/5;denom=denom/5}value=wholeNumber*denom-denom+num+"/"+denom}else{value=wholeNumber-1+"/1"}memoOdds[numToConvert]=value}return value}return convertDecimalToFractional}();var ChangeAllOddsToFractional=function(){var odt=$.cookie("odt");if(1==odt){$(".odds-numeric").each(function(){$(this).html(ConvertDecimalToFractional($(this).html()))})}};return ChangeAllOddsToFractional});require(["jquery"],function(){$("#breadcrumb-nav select").change(function(){window.location.href=this.value})});define("mod_breadcrumbs",function(){});define("mod_matches-common",["mod_site-common","mod_matchheader","mod_comments","WS/WS.OddsHelper","mod_breadcrumbs","jquery"],function(sc,MatchHeader,ChangeAllOddsToFractional,Comments){return function(){sc();MatchHeader();Comments();$(document).ready(function(){ChangeAllOddsToFractional();if(typeof UpdateFactsLinks=="function"){UpdateFactsLinks()}});require(["ga/match/ga-match-common"])}});!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("underscore",r):(n=n||self,function(){var t=n._,e=n._=r();e.noConflict=function(){return n._=t,e}}())}(this,function(){var n="1.12.0",r="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},t=Array.prototype,e=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,o=t.push,i=t.slice,a=e.toString,f=e.hasOwnProperty,c="undefined"!=typeof ArrayBuffer,l="undefined"!=typeof DataView,s=Array.isArray,p=Object.keys,v=Object.create,h=c&&ArrayBuffer.isView,y=isNaN,g=isFinite,d=!{toString:null}.propertyIsEnumerable("toString"),b=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],m=Math.pow(2,53)-1;function j(n,r){return r=null==r?n.length-1:+r,function(){for(var t=Math.max(arguments.length-r,0),e=Array(t),u=0;u<t;u++)e[u]=arguments[u+r];switch(r){case 0:return n.call(this,e);case 1:return n.call(this,arguments[0],e);case 2:return n.call(this,arguments[0],arguments[1],e)}var o=Array(r+1);for(u=0;u<r;u++)o[u]=arguments[u];return o[r]=e,n.apply(this,o)}}function _(n){var r=typeof n;return"function"===r||"object"===r&&!!n}function w(n){return void 0===n}function A(n){return!0===n||!1===n||"[object Boolean]"===a.call(n)}function x(n){var r="[object "+n+"]";return function(n){return a.call(n)===r}}var S=x("String"),O=x("Number"),M=x("Date"),E=x("RegExp"),B=x("Error"),N=x("Symbol"),I=x("ArrayBuffer"),k=x("Function"),T=r.document&&r.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof T&&(k=function(n){return"function"==typeof n||!1});var D=k,R=x("Object"),F=l&&R(new DataView(new ArrayBuffer(8))),V="undefined"!=typeof Map&&R(new Map),P=x("DataView");var q=F?function(n){return null!=n&&D(n.getInt8)&&I(n.buffer)}:P,U=s||x("Array");function W(n,r){return null!=n&&f.call(n,r)}var z=x("Arguments");!function(){z(arguments)||(z=function(n){return W(n,"callee")})}();var L=z;function C(n){return O(n)&&y(n)}function K(n){return function(){return n}}function J(n){return function(r){var t=n(r);return"number"==typeof t&&t>=0&&t<=m}}function $(n){return function(r){return null==r?void 0:r[n]}}var G=$("byteLength"),H=J(G),Q=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var X=c?function(n){return h?h(n)&&!q(n):H(n)&&Q.test(a.call(n))}:K(!1),Y=$("length");function Z(n,r){r=function(n){for(var r={},t=n.length,e=0;e<t;++e)r[n[e]]=!0;return{contains:function(n){return r[n]},push:function(t){return r[t]=!0,n.push(t)}}}(r);var t=b.length,u=n.constructor,o=D(u)&&u.prototype||e,i="constructor";for(W(n,i)&&!r.contains(i)&&r.push(i);t--;)(i=b[t])in n&&n[i]!==o[i]&&!r.contains(i)&&r.push(i)}function nn(n){if(!_(n))return[];if(p)return p(n);var r=[];for(var t in n)W(n,t)&&r.push(t);return d&&Z(n,r),r}function rn(n,r){var t=nn(r),e=t.length;if(null==n)return!e;for(var u=Object(n),o=0;o<e;o++){var i=t[o];if(r[i]!==u[i]||!(i in u))return!1}return!0}function tn(n){return n instanceof tn?n:this instanceof tn?void(this._wrapped=n):new tn(n)}function en(n){return new Uint8Array(n.buffer||n,n.byteOffset||0,G(n))}tn.VERSION=n,tn.prototype.value=function(){return this._wrapped},tn.prototype.valueOf=tn.prototype.toJSON=tn.prototype.value,tn.prototype.toString=function(){return String(this._wrapped)};var un="[object DataView]";function on(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!=n)return r!=r;var o=typeof n;return("function"===o||"object"===o||"object"==typeof r)&&function n(r,t,e,o){r instanceof tn&&(r=r._wrapped);t instanceof tn&&(t=t._wrapped);var i=a.call(r);if(i!==a.call(t))return!1;if(F&&"[object Object]"==i&&q(r)){if(!q(t))return!1;i=un}switch(i){case"[object RegExp]":case"[object String]":return""+r==""+t;case"[object Number]":return+r!=+r?+t!=+t:0==+r?1/+r==1/t:+r==+t;case"[object Date]":case"[object Boolean]":return+r==+t;case"[object Symbol]":return u.valueOf.call(r)===u.valueOf.call(t);case"[object ArrayBuffer]":case un:return n(en(r),en(t),e,o)}var f="[object Array]"===i;if(!f&&X(r)){if(G(r)!==G(t))return!1;if(r.buffer===t.buffer&&r.byteOffset===t.byteOffset)return!0;f=!0}if(!f){if("object"!=typeof r||"object"!=typeof t)return!1;var c=r.constructor,l=t.constructor;if(c!==l&&!(D(c)&&c instanceof c&&D(l)&&l instanceof l)&&"constructor"in r&&"constructor"in t)return!1}o=o||[];var s=(e=e||[]).length;for(;s--;)if(e[s]===r)return o[s]===t;if(e.push(r),o.push(t),f){if((s=r.length)!==t.length)return!1;for(;s--;)if(!on(r[s],t[s],e,o))return!1}else{var p,v=nn(r);if(s=v.length,nn(t).length!==s)return!1;for(;s--;)if(p=v[s],!W(t,p)||!on(r[p],t[p],e,o))return!1}return e.pop(),o.pop(),!0}(n,r,t,e)}function an(n){if(!_(n))return[];var r=[];for(var t in n)r.push(t);return d&&Z(n,r),r}function fn(n){var r=Y(n);return function(t){if(null==t)return!1;var e=an(t);if(Y(e))return!1;for(var u=0;u<r;u++)if(!D(t[n[u]]))return!1;return n!==hn||!D(t[cn])}}var cn="forEach",ln="has",sn=["clear","delete"],pn=["get",ln,"set"],vn=sn.concat(cn,pn),hn=sn.concat(pn),yn=["add"].concat(sn,cn,ln),gn=V?fn(vn):x("Map"),dn=V?fn(hn):x("WeakMap"),bn=V?fn(yn):x("Set"),mn=x("WeakSet");function jn(n){for(var r=nn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e}function _n(n){for(var r={},t=nn(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r}function wn(n){var r=[];for(var t in n)D(n[t])&&r.push(t);return r.sort()}function An(n,r){return function(t){var e=arguments.length;if(r&&(t=Object(t)),e<2||null==t)return t;for(var u=1;u<e;u++)for(var o=arguments[u],i=n(o),a=i.length,f=0;f<a;f++){var c=i[f];r&&void 0!==t[c]||(t[c]=o[c])}return t}}var xn=An(an),Sn=An(nn),On=An(an,!0);function Mn(n){if(!_(n))return{};if(v)return v(n);var r=function(){};r.prototype=n;var t=new r;return r.prototype=null,t}function En(n){return _(n)?U(n)?n.slice():xn({},n):n}function Bn(n){return U(n)?n:[n]}function Nn(n){return tn.toPath(n)}function In(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0}function kn(n,r,t){var e=In(n,Nn(r));return w(e)?t:e}function Tn(n){return n}function Dn(n){return n=Sn({},n),function(r){return rn(r,n)}}function Rn(n){return n=Nn(n),function(r){return In(r,n)}}function Fn(n,r,t){if(void 0===r)return n;switch(null==t?3:t){case 1:return function(t){return n.call(r,t)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,o){return n.call(r,t,e,u,o)}}return function(){return n.apply(r,arguments)}}function Vn(n,r,t){return null==n?Tn:D(n)?Fn(n,r,t):_(n)&&!U(n)?Dn(n):Rn(n)}function Pn(n,r){return Vn(n,r,1/0)}function qn(n,r,t){return tn.iteratee!==Pn?tn.iteratee(n,r):Vn(n,r,t)}function Un(){}function Wn(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))}tn.toPath=Bn,tn.iteratee=Pn;var zn=Date.now||function(){return(new Date).getTime()};function Ln(n){var r=function(r){return n[r]},t="(?:"+nn(n).join("|")+")",e=RegExp(t),u=RegExp(t,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,r):n}}var Cn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Kn=Ln(Cn),Jn=Ln(_n(Cn)),$n=tn.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Gn=/(.)^/,Hn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Qn=/\\|'|\r|\n|\u2028|\u2029/g;function Xn(n){return"\\"+Hn[n]}var Yn=0;function Zn(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var o=Mn(n.prototype),i=n.apply(o,u);return _(i)?i:o}var nr=j(function(n,r){var t=nr.placeholder,e=function(){for(var u=0,o=r.length,i=Array(o),a=0;a<o;a++)i[a]=r[a]===t?arguments[u++]:r[a];for(;u<arguments.length;)i.push(arguments[u++]);return Zn(n,e,this,this,i)};return e});nr.placeholder=tn;var rr=j(function(n,r,t){if(!D(n))throw new TypeError("Bind must be called on a function");var e=j(function(u){return Zn(n,e,r,this,t.concat(u))});return e}),tr=J(Y);function er(n,r,t,e){if(e=e||[],r||0===r){if(r<=0)return e.concat(n)}else r=1/0;for(var u=e.length,o=0,i=Y(n);o<i;o++){var a=n[o];if(tr(a)&&(U(a)||L(a)))if(r>1)er(a,r-1,t,e),u=e.length;else for(var f=0,c=a.length;f<c;)e[u++]=a[f++];else t||(e[u++]=a)}return e}var ur=j(function(n,r){var t=(r=er(r,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var e=r[t];n[e]=rr(n[e],n)}return n});var or=j(function(n,r,t){return setTimeout(function(){return n.apply(null,t)},r)}),ir=nr(or,tn,1);function ar(n){return function(){return!n.apply(this,arguments)}}function fr(n,r){var t;return function(){return--n>0&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}}var cr=nr(fr,2);function lr(n,r,t){r=qn(r,t);for(var e,u=nn(n),o=0,i=u.length;o<i;o++)if(r(n[e=u[o]],e,n))return e}function sr(n){return function(r,t,e){t=qn(t,e);for(var u=Y(r),o=n>0?0:u-1;o>=0&&o<u;o+=n)if(t(r[o],o,r))return o;return-1}}var pr=sr(1),vr=sr(-1);function hr(n,r,t,e){for(var u=(t=qn(t,e,1))(r),o=0,i=Y(n);o<i;){var a=Math.floor((o+i)/2);t(n[a])<u?o=a+1:i=a}return o}function yr(n,r,t){return function(e,u,o){var a=0,f=Y(e);if("number"==typeof o)n>0?a=o>=0?o:Math.max(o+f,a):f=o>=0?Math.min(o+1,f):o+f+1;else if(t&&o&&f)return e[o=t(e,u)]===u?o:-1;if(u!=u)return(o=r(i.call(e,a,f),C))>=0?o+a:-1;for(o=n>0?a:f-1;o>=0&&o<f;o+=n)if(e[o]===u)return o;return-1}}var gr=yr(1,pr,hr),dr=yr(-1,vr);function br(n,r,t){var e=(tr(n)?pr:lr)(n,r,t);if(void 0!==e&&-1!==e)return n[e]}function mr(n,r,t){var e,u;if(r=Fn(r,t),tr(n))for(e=0,u=n.length;e<u;e++)r(n[e],e,n);else{var o=nn(n);for(e=0,u=o.length;e<u;e++)r(n[o[e]],o[e],n)}return n}function jr(n,r,t){r=qn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=Array(u),i=0;i<u;i++){var a=e?e[i]:i;o[i]=r(n[a],a,n)}return o}function _r(n){var r=function(r,t,e,u){var o=!tr(r)&&nn(r),i=(o||r).length,a=n>0?0:i-1;for(u||(e=r[o?o[a]:a],a+=n);a>=0&&a<i;a+=n){var f=o?o[a]:a;e=t(e,r[f],f,r)}return e};return function(n,t,e,u){var o=arguments.length>=3;return r(n,Fn(t,u,4),e,o)}}var wr=_r(1),Ar=_r(-1);function xr(n,r,t){var e=[];return r=qn(r,t),mr(n,function(n,t,u){r(n,t,u)&&e.push(n)}),e}function Sr(n,r,t){r=qn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(!r(n[i],i,n))return!1}return!0}function Or(n,r,t){r=qn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(r(n[i],i,n))return!0}return!1}function Mr(n,r,t,e){return tr(n)||(n=jn(n)),("number"!=typeof t||e)&&(t=0),gr(n,r,t)>=0}var Er=j(function(n,r,t){var e,u;return D(r)?u=r:(r=Nn(r),e=r.slice(0,-1),r=r[r.length-1]),jr(n,function(n){var o=u;if(!o){if(e&&e.length&&(n=In(n,e)),null==n)return;o=n[r]}return null==o?o:o.apply(n,t)})});function Br(n,r){return jr(n,Rn(r))}function Nr(n,r,t){var e,u,o=-1/0,i=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=tr(n)?n:jn(n)).length;a<f;a++)null!=(e=n[a])&&e>o&&(o=e);else r=qn(r,t),mr(n,function(n,t,e){((u=r(n,t,e))>i||u===-1/0&&o===-1/0)&&(o=n,i=u)});return o}function Ir(n,r,t){if(null==r||t)return tr(n)||(n=jn(n)),n[Wn(n.length-1)];var e=tr(n)?En(n):jn(n),u=Y(e);r=Math.max(Math.min(r,u),0);for(var o=u-1,i=0;i<r;i++){var a=Wn(i,o),f=e[i];e[i]=e[a],e[a]=f}return e.slice(0,r)}function kr(n,r){return function(t,e,u){var o=r?[[],[]]:{};return e=qn(e,u),mr(t,function(r,u){var i=e(r,u,t);n(o,r,i)}),o}}var Tr=kr(function(n,r,t){W(n,t)?n[t].push(r):n[t]=[r]}),Dr=kr(function(n,r,t){n[t]=r}),Rr=kr(function(n,r,t){W(n,t)?n[t]++:n[t]=1}),Fr=kr(function(n,r,t){n[t?0:1].push(r)},!0),Vr=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Pr(n,r,t){return r in t}var qr=j(function(n,r){var t={},e=r[0];if(null==n)return t;D(e)?(r.length>1&&(e=Fn(e,r[1])),r=an(n)):(e=Pr,r=er(r,!1,!1),n=Object(n));for(var u=0,o=r.length;u<o;u++){var i=r[u],a=n[i];e(a,i,n)&&(t[i]=a)}return t}),Ur=j(function(n,r){var t,e=r[0];return D(e)?(e=ar(e),r.length>1&&(t=r[1])):(r=jr(er(r,!1,!1),String),e=function(n,t){return!Mr(r,t)}),qr(n,e,t)});function Wr(n,r,t){return i.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))}function zr(n,r,t){return null==n||n.length<1?null==r||t?void 0:[]:null==r||t?n[0]:Wr(n,n.length-r)}function Lr(n,r,t){return i.call(n,null==r||t?1:r)}var Cr=j(function(n,r){return r=er(r,!0,!0),xr(n,function(n){return!Mr(r,n)})}),Kr=j(function(n,r){return Cr(n,r)});function Jr(n,r,t,e){A(r)||(e=t,t=r,r=!1),null!=t&&(t=qn(t,e));for(var u=[],o=[],i=0,a=Y(n);i<a;i++){var f=n[i],c=t?t(f,i,n):f;r&&!t?(i&&o===c||u.push(f),o=c):t?Mr(o,c)||(o.push(c),u.push(f)):Mr(u,f)||u.push(f)}return u}var $r=j(function(n){return Jr(er(n,!0,!0))});function Gr(n){for(var r=n&&Nr(n,Y).length||0,t=Array(r),e=0;e<r;e++)t[e]=Br(n,e);return t}var Hr=j(Gr);function Qr(n,r){return n._chain?tn(r).chain():r}function Xr(n){return mr(wn(n),function(r){var t=tn[r]=n[r];tn.prototype[r]=function(){var n=[this._wrapped];return o.apply(n,arguments),Qr(this,t.apply(tn,n))}}),tn}mr(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var r=t[n];tn.prototype[n]=function(){var t=this._wrapped;return null!=t&&(r.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0]),Qr(this,t)}}),mr(["concat","join","slice"],function(n){var r=t[n];tn.prototype[n]=function(){var n=this._wrapped;return null!=n&&(n=r.apply(n,arguments)),Qr(this,n)}});var Yr=Xr({__proto__:null,VERSION:n,restArguments:j,isObject:_,isNull:function(n){return null===n},isUndefined:w,isBoolean:A,isElement:function(n){return!(!n||1!==n.nodeType)},isString:S,isNumber:O,isDate:M,isRegExp:E,isError:B,isSymbol:N,isArrayBuffer:I,isDataView:q,isArray:U,isFunction:D,isArguments:L,isFinite:function(n){return!N(n)&&g(n)&&!isNaN(parseFloat(n))},isNaN:C,isTypedArray:X,isEmpty:function(n){if(null==n)return!0;var r=Y(n);return"number"==typeof r&&(U(n)||S(n)||L(n))?0===r:0===Y(nn(n))},isMatch:rn,isEqual:function(n,r){return on(n,r)},isMap:gn,isWeakMap:dn,isSet:bn,isWeakSet:mn,keys:nn,allKeys:an,values:jn,pairs:function(n){for(var r=nn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},invert:_n,functions:wn,methods:wn,extend:xn,extendOwn:Sn,assign:Sn,defaults:On,create:function(n,r){var t=Mn(n);return r&&Sn(t,r),t},clone:En,tap:function(n,r){return r(n),n},get:kn,has:function(n,r){for(var t=(r=Nn(r)).length,e=0;e<t;e++){var u=r[e];if(!W(n,u))return!1;n=n[u]}return!!t},mapObject:function(n,r,t){r=qn(r,t);for(var e=nn(n),u=e.length,o={},i=0;i<u;i++){var a=e[i];o[a]=r(n[a],a,n)}return o},identity:Tn,constant:K,noop:Un,toPath:Bn,property:Rn,propertyOf:function(n){return null==n?Un:function(r){return kn(n,r)}},matcher:Dn,matches:Dn,times:function(n,r,t){var e=Array(Math.max(0,n));r=Fn(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},random:Wn,now:zn,escape:Kn,unescape:Jn,templateSettings:$n,template:function(n,r,t){!r&&t&&(r=t),r=On({},r,tn.templateSettings);var e,u=RegExp([(r.escape||Gn).source,(r.interpolate||Gn).source,(r.evaluate||Gn).source].join("|")+"|$","g"),o=0,i="__p+='";n.replace(u,function(r,t,e,u,a){return i+=n.slice(o,a).replace(Qn,Xn),o=a+r.length,t?i+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":u&&(i+="';\n"+u+"\n__p+='"),r}),i+="';\n",r.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{e=new Function(r.variable||"obj","_",i)}catch(n){throw n.source=i,n}var a=function(n){return e.call(this,n,tn)},f=r.variable||"obj";return a.source="function("+f+"){\n"+i+"}",a},result:function(n,r,t){var e=(r=Nn(r)).length;if(!e)return D(t)?t.call(n):t;for(var u=0;u<e;u++){var o=null==n?void 0:n[r[u]];void 0===o&&(o=t,u=e),n=D(o)?o.call(n):o}return n},uniqueId:function(n){var r=++Yn+"";return n?n+r:r},chain:function(n){var r=tn(n);return r._chain=!0,r},iteratee:Pn,partial:nr,bind:rr,bindAll:ur,memoize:function(n,r){var t=function(e){var u=t.cache,o=""+(r?r.apply(this,arguments):e);return W(u,o)||(u[o]=n.apply(this,arguments)),u[o]};return t.cache={},t},delay:or,defer:ir,throttle:function(n,r,t){var e,u,o,i,a=0;t||(t={});var f=function(){a=!1===t.leading?0:zn(),e=null,i=n.apply(u,o),e||(u=o=null)},c=function(){var c=zn();a||!1!==t.leading||(a=c);var l=r-(c-a);return u=this,o=arguments,l<=0||l>r?(e&&(clearTimeout(e),e=null),a=c,i=n.apply(u,o),e||(u=o=null)):e||!1===t.trailing||(e=setTimeout(f,l)),i};return c.cancel=function(){clearTimeout(e),a=0,e=u=o=null},c},debounce:function(n,r,t){var e,u,o=function(r,t){e=null,t&&(u=n.apply(r,t))},i=j(function(i){if(e&&clearTimeout(e),t){var a=!e;e=setTimeout(o,r),a&&(u=n.apply(this,i))}else e=or(o,r,this,i);return u});return i.cancel=function(){clearTimeout(e),e=null},i},wrap:function(n,r){return nr(r,n)},negate:ar,compose:function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},after:function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},before:fr,once:cr,findKey:lr,findIndex:pr,findLastIndex:vr,sortedIndex:hr,indexOf:gr,lastIndexOf:dr,find:br,detect:br,findWhere:function(n,r){return br(n,Dn(r))},each:mr,forEach:mr,map:jr,collect:jr,reduce:wr,foldl:wr,inject:wr,reduceRight:Ar,foldr:Ar,filter:xr,select:xr,reject:function(n,r,t){return xr(n,ar(qn(r)),t)},every:Sr,all:Sr,some:Or,any:Or,contains:Mr,includes:Mr,include:Mr,invoke:Er,pluck:Br,where:function(n,r){return xr(n,Dn(r))},max:Nr,min:function(n,r,t){var e,u,o=1/0,i=1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=tr(n)?n:jn(n)).length;a<f;a++)null!=(e=n[a])&&e<o&&(o=e);else r=qn(r,t),mr(n,function(n,t,e){((u=r(n,t,e))<i||u===1/0&&o===1/0)&&(o=n,i=u)});return o},shuffle:function(n){return Ir(n,1/0)},sample:Ir,sortBy:function(n,r,t){var e=0;return r=qn(r,t),Br(jr(n,function(n,t,u){return{value:n,index:e++,criteria:r(n,t,u)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(t>e||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index}),"value")},groupBy:Tr,indexBy:Dr,countBy:Rr,partition:Fr,toArray:function(n){return n?U(n)?i.call(n):S(n)?n.match(Vr):tr(n)?jr(n,Tn):jn(n):[]},size:function(n){return null==n?0:tr(n)?n.length:nn(n).length},pick:qr,omit:Ur,first:zr,head:zr,take:zr,initial:Wr,last:function(n,r,t){return null==n||n.length<1?null==r||t?void 0:[]:null==r||t?n[n.length-1]:Lr(n,Math.max(0,n.length-r))},rest:Lr,tail:Lr,drop:Lr,compact:function(n){return xr(n,Boolean)},flatten:function(n,r){return er(n,r,!1)},without:Kr,uniq:Jr,unique:Jr,union:$r,intersection:function(n){for(var r=[],t=arguments.length,e=0,u=Y(n);e<u;e++){var o=n[e];if(!Mr(r,o)){var i;for(i=1;i<t&&Mr(arguments[i],o);i++);i===t&&r.push(o)}}return r},difference:Cr,unzip:Gr,transpose:Gr,zip:Hr,object:function(n,r){for(var t={},e=0,u=Y(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t},range:function(n,r,t){null==r&&(r=n||0,n=0),t||(t=r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),o=0;o<e;o++,n+=t)u[o]=n;return u},chunk:function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(i.call(n,e,e+=r));return t},mixin:Xr,default:tn});return Yr._=Yr,Yr});(function(factory){var root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;if(typeof define==="function"&&define.amd){define("backbone",["underscore","jquery","exports"],function(_,$,exports){root.Backbone=factory(root,exports,_,$)})}else if(typeof exports!=="undefined"){var _=require("underscore"),$;try{$=require("jquery")}catch(e){}factory(root,exports,_,$)}else{root.Backbone=factory(root,{},root._,root.jQuery||root.Zepto||root.ender||root.$)}})(function(root,Backbone,_,$){var previousBackbone=root.Backbone;var slice=Array.prototype.slice;Backbone.VERSION="1.4.0";Backbone.$=$;Backbone.noConflict=function(){root.Backbone=previousBackbone;return this};Backbone.emulateHTTP=false;Backbone.emulateJSON=false;var Events=Backbone.Events={};var eventSplitter=/\s+/;var _listening;var eventsApi=function(iteratee,events,name,callback,opts){var i=0,names;if(name&&typeof name==="object"){if(callback!==void 0&&"context"in opts&&opts.context===void 0)opts.context=callback;for(names=_.keys(name);i<names.length;i++){events=eventsApi(iteratee,events,names[i],name[names[i]],opts)}}else if(name&&eventSplitter.test(name)){for(names=name.split(eventSplitter);i<names.length;i++){events=iteratee(events,names[i],callback,opts)}}else{events=iteratee(events,name,callback,opts)}return events};Events.on=function(name,callback,context){this._events=eventsApi(onApi,this._events||{},name,callback,{context:context,ctx:this,listening:_listening});if(_listening){var listeners=this._listeners||(this._listeners={});listeners[_listening.id]=_listening;_listening.interop=false}return this};Events.listenTo=function(obj,name,callback){if(!obj)return this;var id=obj._listenId||(obj._listenId=_.uniqueId("l"));var listeningTo=this._listeningTo||(this._listeningTo={});var listening=_listening=listeningTo[id];if(!listening){this._listenId||(this._listenId=_.uniqueId("l"));listening=_listening=listeningTo[id]=new Listening(this,obj)}var error=tryCatchOn(obj,name,callback,this);_listening=void 0;if(error)throw error;if(listening.interop)listening.on(name,callback);return this};var onApi=function(events,name,callback,options){if(callback){var handlers=events[name]||(events[name]=[]);var context=options.context,ctx=options.ctx,listening=options.listening;if(listening)listening.count++;handlers.push({callback:callback,context:context,ctx:context||ctx,listening:listening})}return events};var tryCatchOn=function(obj,name,callback,context){try{obj.on(name,callback,context)}catch(e){return e}};Events.off=function(name,callback,context){if(!this._events)return this;this._events=eventsApi(offApi,this._events,name,callback,{context:context,listeners:this._listeners});return this};Events.stopListening=function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var ids=obj?[obj._listenId]:_.keys(listeningTo);for(var i=0;i<ids.length;i++){var listening=listeningTo[ids[i]];if(!listening)break;listening.obj.off(name,callback,this);if(listening.interop)listening.off(name,callback)}if(_.isEmpty(listeningTo))this._listeningTo=void 0;return this};var offApi=function(events,name,callback,options){if(!events)return;var context=options.context,listeners=options.listeners;var i=0,names;if(!name&&!context&&!callback){for(names=_.keys(listeners);i<names.length;i++){listeners[names[i]].cleanup()}return}names=name?[name]:_.keys(events);for(;i<names.length;i++){name=names[i];var handlers=events[name];if(!handlers)break;var remaining=[];for(var j=0;j<handlers.length;j++){var handler=handlers[j];if(callback&&callback!==handler.callback&&callback!==handler.callback._callback||context&&context!==handler.context){remaining.push(handler)}else{var listening=handler.listening;if(listening)listening.off(name,callback)}}if(remaining.length){events[name]=remaining}else{delete events[name]}}return events};Events.once=function(name,callback,context){var events=eventsApi(onceMap,{},name,callback,this.off.bind(this));if(typeof name==="string"&&context==null)callback=void 0;return this.on(events,callback,context)};Events.listenToOnce=function(obj,name,callback){var events=eventsApi(onceMap,{},name,callback,this.stopListening.bind(this,obj));return this.listenTo(obj,events)};var onceMap=function(map,name,callback,offer){if(callback){var once=map[name]=_.once(function(){offer(name,once);callback.apply(this,arguments)});once._callback=callback}return map};Events.trigger=function(name){if(!this._events)return this;var length=Math.max(0,arguments.length-1);var args=Array(length);for(var i=0;i<length;i++)args[i]=arguments[i+1];eventsApi(triggerApi,this._events,name,void 0,args);return this};var triggerApi=function(objEvents,name,callback,args){if(objEvents){var events=objEvents[name];var allEvents=objEvents.all;if(events&&allEvents)allEvents=allEvents.slice();if(events)triggerEvents(events,args);if(allEvents)triggerEvents(allEvents,[name].concat(args))}return objEvents};var triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:while(++i<l)(ev=events[i]).callback.call(ev.ctx);return;case 1:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:while(++i<l)(ev=events[i]).callback.apply(ev.ctx,args);return}};var Listening=function(listener,obj){this.id=listener._listenId;this.listener=listener;this.obj=obj;this.interop=true;this.count=0;this._events=void 0};Listening.prototype.on=Events.on;Listening.prototype.off=function(name,callback){var cleanup;if(this.interop){this._events=eventsApi(offApi,this._events,name,callback,{context:void 0,listeners:void 0});cleanup=!this._events}else{this.count--;cleanup=this.count===0}if(cleanup)this.cleanup()};Listening.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId];if(!this.interop)delete this.obj._listeners[this.id]};Events.bind=Events.on;Events.unbind=Events.off;_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={});this.preinitialize.apply(this,arguments);this.cid=_.uniqueId(this.cidPrefix);this.attributes={};if(options.collection)this.collection=options.collection;if(options.parse)attrs=this.parse(attrs,options)||{};var defaults=_.result(this,"defaults");attrs=_.defaults(_.extend({},defaults,attrs),defaults);this.set(attrs,options);this.changed={};this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return this.get(attr)!=null},matches:function(attrs){return!!_.iteratee(attrs,this)(this.attributes)},set:function(key,val,options){if(key==null)return this;var attrs;if(typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}options||(options={});if(!this._validate(attrs,options))return false;var unset=options.unset;var silent=options.silent;var changes=[];var changing=this._changing;this._changing=true;if(!changing){this._previousAttributes=_.clone(this.attributes);this.changed={}}var current=this.attributes;var changed=this.changed;var prev=this._previousAttributes;for(var attr in attrs){val=attrs[attr];if(!_.isEqual(current[attr],val))changes.push(attr);if(!_.isEqual(prev[attr],val)){changed[attr]=val}else{delete changed[attr]}unset?delete current[attr]:current[attr]=val}if(this.idAttribute in attrs)this.id=this.get(this.idAttribute);if(!silent){if(changes.length)this._pending=options;for(var i=0;i<changes.length;i++){this.trigger("change:"+changes[i],this,current[changes[i]],options)}}if(changing)return this;if(!silent){while(this._pending){options=this._pending;this._pending=false;this.trigger("change",this,options)}}this._pending=false;this._changing=false;return this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:true}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:true}))},hasChanged:function(attr){if(attr==null)return!_.isEmpty(this.changed);return _.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):false;var old=this._changing?this._previousAttributes:this.attributes;var changed={};var hasChanged;for(var attr in diff){var val=diff[attr];if(_.isEqual(old[attr],val))continue;changed[attr]=val;hasChanged=true}return hasChanged?changed:false},previous:function(attr){if(attr==null||!this._previousAttributes)return null;return this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=_.extend({parse:true},options);var model=this;var success=options.success;options.success=function(resp){var serverAttrs=options.parse?model.parse(resp,options):resp;if(!model.set(serverAttrs,options))return false;if(success)success.call(options.context,model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);return this.sync("read",this,options)},save:function(key,val,options){var attrs;if(key==null||typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}options=_.extend({validate:true,parse:true},options);var wait=options.wait;if(attrs&&!wait){if(!this.set(attrs,options))return false}else if(!this._validate(attrs,options)){return false}var model=this;var success=options.success;var attributes=this.attributes;options.success=function(resp){model.attributes=attributes;var serverAttrs=options.parse?model.parse(resp,options):resp;if(wait)serverAttrs=_.extend({},attrs,serverAttrs);if(serverAttrs&&!model.set(serverAttrs,options))return false;if(success)success.call(options.context,model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);if(attrs&&wait)this.attributes=_.extend({},attributes,attrs);var method=this.isNew()?"create":options.patch?"patch":"update";if(method==="patch"&&!options.attrs)options.attrs=attrs;var xhr=this.sync(method,this,options);this.attributes=attributes;return xhr},destroy:function(options){options=options?_.clone(options):{};var model=this;var success=options.success;var wait=options.wait;var destroy=function(){model.stopListening();model.trigger("destroy",model,model.collection,options)};options.success=function(resp){if(wait)destroy();if(success)success.call(options.context,model,resp,options);if(!model.isNew())model.trigger("sync",model,resp,options)};var xhr=false;if(this.isNew()){_.defer(options.success)}else{wrapError(this,options);xhr=this.sync("delete",this,options)}if(!wait)destroy();return xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();if(this.isNew())return base;var id=this.get(this.idAttribute);return base.replace(/[^\/]$/,"$&/")+encodeURIComponent(id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(options){return this._validate({},_.extend({},options,{validate:true}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return true;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;if(!error)return true;this.trigger("invalid",this,error,_.extend(options,{validationError:error}));return false}});var Collection=Backbone.Collection=function(models,options){options||(options={});this.preinitialize.apply(this,arguments);if(options.model)this.model=options.model;if(options.comparator!==void 0)this.comparator=options.comparator;this._reset();this.initialize.apply(this,arguments);if(models)this.reset(models,_.extend({silent:true},options))};var setOptions={add:true,remove:true,merge:true};var addOptions={add:true,remove:false};var splice=function(array,insert,at){at=Math.min(Math.max(at,0),array.length);var tail=Array(array.length-at);var length=insert.length;var i;for(i=0;i<tail.length;i++)tail[i]=array[i+at];for(i=0;i<length;i++)array[i+at]=insert[i];for(i=0;i<tail.length;i++)array[i+length+at]=tail[i]};_.extend(Collection.prototype,Events,{model:Model,preinitialize:function(){},initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:false},options,addOptions))},remove:function(models,options){options=_.extend({},options);var singular=!_.isArray(models);models=singular?[models]:models.slice();var removed=this._removeModels(models,options);if(!options.silent&&removed.length){options.changes={added:[],merged:[],removed:removed};this.trigger("update",this,options)}return singular?removed[0]:removed},set:function(models,options){if(models==null)return;options=_.extend({},setOptions,options);if(options.parse&&!this._isModel(models)){models=this.parse(models,options)||[]}var singular=!_.isArray(models);models=singular?[models]:models.slice();var at=options.at;if(at!=null)at=+at;if(at>this.length)at=this.length;if(at<0)at+=this.length+1;var set=[];var toAdd=[];var toMerge=[];var toRemove=[];var modelMap={};var add=options.add;var merge=options.merge;var remove=options.remove;var sort=false;var sortable=this.comparator&&at==null&&options.sort!==false;var sortAttr=_.isString(this.comparator)?this.comparator:null;var model,i;for(i=0;i<models.length;i++){model=models[i];var existing=this.get(model);if(existing){if(merge&&model!==existing){var attrs=this._isModel(model)?model.attributes:model;if(options.parse)attrs=existing.parse(attrs,options);existing.set(attrs,options);toMerge.push(existing);if(sortable&&!sort)sort=existing.hasChanged(sortAttr)}if(!modelMap[existing.cid]){modelMap[existing.cid]=true;set.push(existing)}models[i]=existing}else if(add){model=models[i]=this._prepareModel(model,options);if(model){toAdd.push(model);this._addReference(model,options);modelMap[model.cid]=true;set.push(model)}}}if(remove){for(i=0;i<this.length;i++){model=this.models[i];if(!modelMap[model.cid])toRemove.push(model)}if(toRemove.length)this._removeModels(toRemove,options)}var orderChanged=false;var replace=!sortable&&add&&remove;if(set.length&&replace){orderChanged=this.length!==set.length||_.some(this.models,function(m,index){return m!==set[index]});this.models.length=0;splice(this.models,set,0);this.length=this.models.length}else if(toAdd.length){if(sortable)sort=true;splice(this.models,toAdd,at==null?this.length:at);this.length=this.models.length}if(sort)this.sort({silent:true});if(!options.silent){for(i=0;i<toAdd.length;i++){if(at!=null)options.index=at+i;model=toAdd[i];model.trigger("add",model,this,options)}if(sort||orderChanged)this.trigger("sort",this,options);if(toAdd.length||toRemove.length||toMerge.length){options.changes={added:toAdd,removed:toRemove,merged:toMerge};this.trigger("update",this,options)}}return singular?models[0]:models},reset:function(models,options){options=options?_.clone(options):{};for(var i=0;i<this.models.length;i++){this._removeReference(this.models[i],options)}options.previousModels=this.models;this._reset();models=this.add(models,_.extend({silent:true},options));if(!options.silent)this.trigger("reset",this,options);return models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options)},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options)},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){if(obj==null)return void 0;return this._byId[obj]||this._byId[this.modelId(this._isModel(obj)?obj.attributes:obj)]||obj.cid&&this._byId[obj.cid]},has:function(obj){return this.get(obj)!=null},at:function(index){if(index<0)index+=this.length;return this.models[index]},where:function(attrs,first){return this[first?"find":"filter"](attrs)},findWhere:function(attrs){return this.where(attrs,true)},sort:function(options){var comparator=this.comparator;if(!comparator)throw new Error("Cannot sort a set without a comparator");options||(options={});var length=comparator.length;if(_.isFunction(comparator))comparator=comparator.bind(this);if(length===1||_.isString(comparator)){this.models=this.sortBy(comparator)}else{this.models.sort(comparator)}if(!options.silent)this.trigger("sort",this,options);return this},pluck:function(attr){return this.map(attr+"")},fetch:function(options){options=_.extend({parse:true},options);var success=options.success;var collection=this;options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options);if(success)success.call(options.context,collection,resp,options);collection.trigger("sync",collection,resp,options)};wrapError(this,options);return this.sync("read",this,options)},create:function(model,options){options=options?_.clone(options):{};var wait=options.wait;model=this._prepareModel(model,options);if(!model)return false;if(!wait)this.add(model,options);var collection=this;var success=options.success;options.success=function(m,resp,callbackOpts){if(wait)collection.add(m,callbackOpts);if(success)success.call(callbackOpts.context,m,resp,callbackOpts)};model.save(null,options);return model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(attrs){return attrs[this.model.prototype.idAttribute||"id"]},values:function(){return new CollectionIterator(this,ITERATOR_VALUES)},keys:function(){return new CollectionIterator(this,ITERATOR_KEYS)},entries:function(){return new CollectionIterator(this,ITERATOR_KEYSVALUES)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(attrs,options){if(this._isModel(attrs)){if(!attrs.collection)attrs.collection=this;return attrs}options=options?_.clone(options):{};options.collection=this;var model=new this.model(attrs,options);if(!model.validationError)return model;this.trigger("invalid",this,model.validationError,options);return false},_removeModels:function(models,options){var removed=[];for(var i=0;i<models.length;i++){var model=this.get(models[i]);if(!model)continue;var index=this.indexOf(model);this.models.splice(index,1);this.length--;delete this._byId[model.cid];var id=this.modelId(model.attributes);if(id!=null)delete this._byId[id];if(!options.silent){options.index=index;model.trigger("remove",model,this,options)}removed.push(model);this._removeReference(model,options)}return removed},_isModel:function(model){return model instanceof Model},_addReference:function(model,options){this._byId[model.cid]=model;var id=this.modelId(model.attributes);if(id!=null)this._byId[id]=model;model.on("all",this._onModelEvent,this)},_removeReference:function(model,options){delete this._byId[model.cid];var id=this.modelId(model.attributes);if(id!=null)delete this._byId[id];if(this===model.collection)delete model.collection;model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){if(model){if((event==="add"||event==="remove")&&collection!==this)return;if(event==="destroy")this.remove(model,options);if(event==="change"){var prevId=this.modelId(model.previousAttributes());var id=this.modelId(model.attributes);if(prevId!==id){if(prevId!=null)delete this._byId[prevId];if(id!=null)this._byId[id]=model}}}this.trigger.apply(this,arguments)}});var $$iterator=typeof Symbol==="function"&&Symbol.iterator;if($$iterator){Collection.prototype[$$iterator]=Collection.prototype.values}var CollectionIterator=function(collection,kind){this._collection=collection;this._kind=kind;this._index=0};var ITERATOR_VALUES=1;var ITERATOR_KEYS=2;var ITERATOR_KEYSVALUES=3;if($$iterator){CollectionIterator.prototype[$$iterator]=function(){return this}}CollectionIterator.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var model=this._collection.at(this._index);this._index++;var value;if(this._kind===ITERATOR_VALUES){value=model}else{var id=this._collection.modelId(model.attributes);if(this._kind===ITERATOR_KEYS){value=id}else{value=[id,model]}}return{value:value,done:false}}this._collection=void 0}return{value:void 0,done:true}};var View=Backbone.View=function(options){this.cid=_.uniqueId("view");this.preinitialize.apply(this,arguments);_.extend(this,_.pick(options,viewOptions));this._ensureElement();this.initialize.apply(this,arguments)};var delegateEventSplitter=/^(\S+)\s*(.*)$/;var viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(element){this.undelegateEvents();this._setElement(element);this.delegateEvents();return this},_setElement:function(el){this.$el=el instanceof Backbone.$?el:Backbone.$(el);this.el=this.$el[0]},delegateEvents:function(events){events||(events=_.result(this,"events"));if(!events)return this;this.undelegateEvents();for(var key in events){var method=events[key];if(!_.isFunction(method))method=this[method];if(!method)continue;var match=key.match(delegateEventSplitter);this.delegate(match[1],match[2],method.bind(this))}return this},delegate:function(eventName,selector,listener){this.$el.on(eventName+".delegateEvents"+this.cid,selector,listener);return this},undelegateEvents:function(){if(this.$el)this.$el.off(".delegateEvents"+this.cid);return this},undelegate:function(eventName,selector,listener){this.$el.off(eventName+".delegateEvents"+this.cid,selector,listener);return this},_createElement:function(tagName){return document.createElement(tagName)},_ensureElement:function(){if(!this.el){var attrs=_.extend({},_.result(this,"attributes"));if(this.id)attrs.id=_.result(this,"id");if(this.className)attrs["class"]=_.result(this,"className");this.setElement(this._createElement(_.result(this,"tagName")));this._setAttributes(attrs)}else{this.setElement(_.result(this,"el"))}},_setAttributes:function(attributes){this.$el.attr(attributes)}});var addMethod=function(base,length,method,attribute){switch(length){case 1:return function(){return base[method](this[attribute])};case 2:return function(value){return base[method](this[attribute],value)};case 3:return function(iteratee,context){return base[method](this[attribute],cb(iteratee,this),context)};case 4:return function(iteratee,defaultVal,context){return base[method](this[attribute],cb(iteratee,this),defaultVal,context)};default:return function(){var args=slice.call(arguments);args.unshift(this[attribute]);return base[method].apply(base,args)}}};var addUnderscoreMethods=function(Class,base,methods,attribute){_.each(methods,function(length,method){if(base[method])Class.prototype[method]=addMethod(base,length,method,attribute)})};var cb=function(iteratee,instance){if(_.isFunction(iteratee))return iteratee;if(_.isObject(iteratee)&&!instance._isModel(iteratee))return modelMatcher(iteratee);if(_.isString(iteratee))return function(model){return model.get(iteratee)};return iteratee};var modelMatcher=function(attrs){var matcher=_.matches(attrs);return function(model){return matcher(model.attributes)}};var collectionMethods={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};var modelMethods={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};_.each([[Collection,collectionMethods,"models"],[Model,modelMethods,"attributes"]],function(config){var Base=config[0],methods=config[1],attribute=config[2];Base.mixin=function(obj){var mappings=_.reduce(_.functions(obj),function(memo,name){memo[name]=0;return memo},{});addUnderscoreMethods(Base,obj,mappings,attribute)};addUnderscoreMethods(Base,_,methods,attribute)});Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(!options.url){params.url=_.result(model,"url")||urlError()}if(options.data==null&&model&&(method==="create"||method==="update"||method==="patch")){params.contentType="application/json";params.data=JSON.stringify(options.attrs||model.toJSON(options))}if(options.emulateJSON){params.contentType="application/x-www-form-urlencoded";params.data=params.data?{model:params.data}:{}}if(options.emulateHTTP&&(type==="PUT"||type==="DELETE"||type==="PATCH")){params.type="POST";if(options.emulateJSON)params.data._method=type;var beforeSend=options.beforeSend;options.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type);if(beforeSend)return beforeSend.apply(this,arguments)}}if(params.type!=="GET"&&!options.emulateJSON){params.processData=false}var error=options.error;options.error=function(xhr,textStatus,errorThrown){options.textStatus=textStatus;options.errorThrown=errorThrown;if(error)error.call(options.context,xhr,textStatus,errorThrown)};var xhr=options.xhr=Backbone.ajax(_.extend(params,options));model.trigger("request",model,xhr,options);return xhr};var methodMap={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={});this.preinitialize.apply(this,arguments);if(options.routes)this.routes=options.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var optionalParam=/\((.*?)\)/g;var namedParam=/(\(\?)?:\w+/g;var splatParam=/\*\w+/g;var escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{preinitialize:function(){},initialize:function(){},route:function(route,name,callback){if(!_.isRegExp(route))route=this._routeToRegExp(route);if(_.isFunction(name)){callback=name;name=""}if(!callback)callback=this[name];var router=this;Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);if(router.execute(callback,args,name)!==false){router.trigger.apply(router,["route:"+name].concat(args));router.trigger("route",name,args);Backbone.history.trigger("route",router,name,args)}});return this},execute:function(callback,args,name){if(callback)callback.apply(this,args)},navigate:function(fragment,options){Backbone.history.navigate(fragment,options);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=_.result(this,"routes");var route,routes=_.keys(this.routes);while((route=routes.pop())!=null){this.route(route,this.routes[route])}},_routeToRegExp:function(route){route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/?]+)"}).replace(splatParam,"([^?]*?)");return new RegExp("^"+route+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param,i){if(i===params.length-1)return param||null;return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[];this.checkUrl=this.checkUrl.bind(this);if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var routeStripper=/^[#\/]|\s+$/g;var rootStripper=/^\/+|\/+$/g;var pathStripper=/#.*$/;History.started=false;_.extend(History.prototype,Events,{interval:50,atRoot:function(){var path=this.location.pathname.replace(/[^\/]$/,"$&/");return path===this.root&&!this.getSearch()},matchRoot:function(){var path=this.decodeFragment(this.location.pathname);var rootPath=path.slice(0,this.root.length-1)+"/";return rootPath===this.root},decodeFragment:function(fragment){return decodeURI(fragment.replace(/%25/g,"%2525"))},getSearch:function(){var match=this.location.href.replace(/#.*/,"").match(/\?.+/);return match?match[0]:""},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getPath:function(){var path=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return path.charAt(0)==="/"?path.slice(1):path},getFragment:function(fragment){if(fragment==null){if(this._usePushState||!this._wantsHashChange){fragment=this.getPath()}else{fragment=this.getHash()}}return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=true;this.options=_.extend({root:"/"},this.options,options);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7);this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(rootStripper,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var rootPath=this.root.slice(0,-1)||"/";this.location.replace(rootPath+"#"+this.getPath());return true}else if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");this.iframe.src="javascript:0";this.iframe.style.display="none";this.iframe.tabIndex=-1;var body=document.body;var iWindow=body.insertBefore(this.iframe,body.firstChild).contentWindow;iWindow.document.open();iWindow.document.close();iWindow.location.hash="#"+this.fragment}var addEventListener=window.addEventListener||function(eventName,listener){return attachEvent("on"+eventName,listener)};if(this._usePushState){addEventListener("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){addEventListener("hashchange",this.checkUrl,false)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}if(!this.options.silent)return this.loadUrl()},stop:function(){var removeEventListener=window.removeEventListener||function(eventName,listener){return detachEvent("on"+eventName,listener)};if(this._usePushState){removeEventListener("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){removeEventListener("hashchange",this.checkUrl,false)}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);History.started=false},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe){current=this.getHash(this.iframe.contentWindow)}if(current===this.fragment)return false;if(this.iframe)this.navigate(current);this.loadUrl()},loadUrl:function(fragment){if(!this.matchRoot())return false;fragment=this.fragment=this.getFragment(fragment);return _.some(this.handlers,function(handler){if(handler.route.test(fragment)){handler.callback(fragment);return true}})},navigate:function(fragment,options){if(!History.started)return false;if(!options||options===true)options={trigger:!!options};fragment=this.getFragment(fragment||"");var rootPath=this.root;if(fragment===""||fragment.charAt(0)==="?"){rootPath=rootPath.slice(0,-1)||"/"}var url=rootPath+fragment;fragment=fragment.replace(pathStripper,"");var decodedFragment=this.decodeFragment(fragment);if(this.fragment===decodedFragment)return;this.fragment=decodedFragment;if(this._usePushState){this.history[options.replace?"replaceState":"pushState"]({},document.title,url)}else if(this._wantsHashChange){this._updateHash(this.location,fragment,options.replace);if(this.iframe&&fragment!==this.getHash(this.iframe.contentWindow)){var iWindow=this.iframe.contentWindow;if(!options.replace){iWindow.document.open();iWindow.document.close()}this._updateHash(iWindow.location,fragment,options.replace)}}else{return this.location.assign(url)}if(options.trigger)return this.loadUrl(fragment)},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else{location.hash="#"+fragment}}});Backbone.history=new History;var extend=function(protoProps,staticProps){var parent=this;var child;if(protoProps&&_.has(protoProps,"constructor")){child=protoProps.constructor}else{child=function(){return parent.apply(this,arguments)}}_.extend(child,parent,staticProps);child.prototype=_.create(parent.prototype,protoProps);child.prototype.constructor=child;child.__super__=parent.prototype;return child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')};var wrapError=function(model,options){var error=options.error;options.error=function(resp){if(error)error.call(options.context,model,resp,options);model.trigger("error",model,resp,options)}};return Backbone});!function(root){function Context(a,b,c,d){this.stack=a,this.global=b,this.blocks=c,this.templateName=d}function Stack(a,b,c,d){this.tail=b,this.isObject=a&&"object"==typeof a,this.head=a,this.index=c,this.of=d}function Stub(a){this.head=new Chunk(this),this.callback=a,this.out=""}function Stream(){this.head=new Chunk(this)}function Chunk(a,b,c){this.root=a,this.next=b,this.data=[],this.flushable=!1,this.taps=c}function Tap(a,b){this.head=a,this.tail=b}var dust={},NONE="NONE",ERROR="ERROR",WARN="WARN",INFO="INFO",DEBUG="DEBUG",loggingLevels=[DEBUG,INFO,WARN,ERROR,NONE],EMPTY_FUNC=function(){},logger={},originalLog,loggerContext;dust.debugLevel=NONE,dust.config={whitespace:!1},dust._aliases={write:"w",end:"e",map:"m",render:"r",reference:"f",section:"s",exists:"x",notexists:"nx",block:"b",partial:"p",helper:"h"},root&&root.console&&root.console.log&&(loggerContext=root.console,originalLog=root.console.log),logger.log=loggerContext?function(){logger.log="function"==typeof originalLog?function(){originalLog.apply(loggerContext,arguments)}:function(){var a=Array.prototype.slice.apply(arguments).join(" ");originalLog(a)},logger.log.apply(this,arguments)}:function(){},dust.log=function(a,b){b=b||INFO,dust.debugLevel!==NONE&&dust.indexInArray(loggingLevels,b)>=dust.indexInArray(loggingLevels,dust.debugLevel)&&(dust.logQueue||(dust.logQueue=[]),dust.logQueue.push({message:a,type:b}),logger.log("[DUST "+b+"]: "+a))},dust.helpers={},dust.cache={},dust.register=function(a,b){a&&(dust.cache[a]=b)},dust.render=function(a,b,c){var d=new Stub(c).head;try{dust.load(a,d,Context.wrap(b,a)).end()}catch(e){d.setError(e)}},dust.stream=function(a,b){var c=new Stream,d=c.head;return dust.nextTick(function(){try{dust.load(a,c.head,Context.wrap(b,a)).end()}catch(e){d.setError(e)}}),c},dust.renderSource=function(a,b,c){return dust.compileFn(a)(b,c)},dust.compileFn=function(a,b){b=b||null;var c=dust.loadSource(dust.compile(a,b));return function(a,d){var e=d?new Stub(d):new Stream;return dust.nextTick(function(){"function"==typeof c?c(e.head,Context.wrap(a,b)).end():dust.log(new Error("Template ["+b+"] cannot be resolved to a Dust function"),ERROR)}),e}},dust.load=function(a,b,c){var d=dust.cache[a];return d?d(b,c):dust.onLoad?b.map(function(b){dust.onLoad(a,function(d,e){return d?b.setError(d):(dust.cache[a]||dust.loadSource(dust.compile(e,a)),void dust.cache[a](b,c).end())})}):b.setError(new Error("Template Not Found: "+a))},dust.loadSource=function(source,path){return eval(source)},dust.isArray=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},dust.indexInArray=function(a,b,c){if(c=+c||0,Array.prototype.indexOf)return a.indexOf(b,c);if(void 0===a||null===a)throw new TypeError('cannot call method "indexOf" of null');var d=a.length;for(1/0===Math.abs(c)&&(c=0),0>c&&(c+=d,0>c&&(c=0));d>c;c++)if(a[c]===b)return c;return-1},dust.nextTick=function(){return function(a){setTimeout(a,0)}}(),dust.isEmpty=function(a){return dust.isArray(a)&&!a.length?!0:0===a?!1:!a},dust.filter=function(a,b,c){if(c)for(var d=0,e=c.length;e>d;d++){var f=c[d];"s"===f?b=null:"function"==typeof dust.filters[f]?a=dust.filters[f](a):dust.log("Invalid filter ["+f+"]",WARN)}return b&&(a=dust.filters[b](a)),a},dust.filters={h:function(a){return dust.escapeHtml(a)},j:function(a){return dust.escapeJs(a)},u:encodeURI,uc:encodeURIComponent,js:function(a){return JSON?JSON.stringify(a):(dust.log("JSON is undefined.  JSON stringify has not been used on ["+a+"]",WARN),a)},jp:function(a){return JSON?JSON.parse(a):(dust.log("JSON is undefined.  JSON parse has not been used on ["+a+"]",WARN),a)}},dust.makeBase=function(a){return new Context(new Stack,a)},Context.wrap=function(a,b){return a instanceof Context?a:new Context(new Stack(a),{},null,b)},Context.prototype.get=function(a,b){return"string"==typeof a&&("."===a[0]&&(b=!0,a=a.substr(1)),a=a.split(".")),this._get(b,a)},Context.prototype._get=function(a,b){var c,d,e,f,g,h=this.stack,i=1;if(d=b[0],e=b.length,a&&0===e)f=h,h=h.head;else{if(a)h&&(h=h.head?h.head[d]:void 0);else{for(;h&&(!h.isObject||(f=h.head,c=h.head[d],void 0===c));)h=h.tail;h=void 0!==c?c:this.global?this.global[d]:void 0}for(;h&&e>i;)f=h,h=h[b[i]],i++}return"function"==typeof h?(g=function(){try{return h.apply(f,arguments)}catch(a){throw dust.log(a,ERROR),a}},g.__dustBody=!!h.__dustBody,g):(void 0===h&&dust.log("Cannot find the value for reference [{"+b.join(".")+"}] in template ["+this.getTemplateName()+"]"),h)},Context.prototype.getPath=function(a,b){return this._get(a,b)},Context.prototype.push=function(a,b,c){return new Context(new Stack(a,this.stack,b,c),this.global,this.blocks,this.getTemplateName())},Context.prototype.rebase=function(a){return new Context(new Stack(a),this.global,this.blocks,this.getTemplateName())},Context.prototype.current=function(){return this.stack.head},Context.prototype.getBlock=function(a){if("function"==typeof a){var b=new Chunk;a=a(b,this).data.join("")}var c=this.blocks;if(!c)return void dust.log("No blocks for context[{"+a+"}] in template ["+this.getTemplateName()+"]",DEBUG);for(var d,e=c.length;e--;)if(d=c[e][a])return d},Context.prototype.shiftBlocks=function(a){var b,c=this.blocks;return a?(b=c?c.concat([a]):[a],new Context(this.stack,this.global,b,this.getTemplateName())):this},Context.prototype.getTemplateName=function(){return this.templateName},Stub.prototype.flush=function(){for(var a=this.head;a;){if(!a.flushable)return a.error?(this.callback(a.error),dust.log("Chunk error ["+a.error+"] thrown. Ceasing to render this template.",WARN),void(this.flush=EMPTY_FUNC)):void 0;this.out+=a.data.join(""),a=a.next,this.head=a}this.callback(null,this.out)},Stream.prototype.flush=function(){for(var a=this.head;a;){if(!a.flushable)return a.error?(this.emit("error",a.error),dust.log("Chunk error ["+a.error+"] thrown. Ceasing to render this template.",WARN),void(this.flush=EMPTY_FUNC)):void 0;this.emit("data",a.data.join("")),a=a.next,this.head=a}this.emit("end")},Stream.prototype.emit=function(a,b){if(!this.events)return dust.log("No events to emit",INFO),!1;var c=this.events[a];if(!c)return dust.log("Event type ["+a+"] does not exist",WARN),!1;if("function"==typeof c)c(b);else if(dust.isArray(c))for(var d=c.slice(0),e=0,f=d.length;f>e;e++)d[e](b);else dust.log("Event Handler ["+c+"] is not of a type that is handled by emit",WARN)},Stream.prototype.on=function(a,b){return this.events||(this.events={}),this.events[a]?"function"==typeof this.events[a]?this.events[a]=[this.events[a],b]:this.events[a].push(b):b?this.events[a]=b:dust.log("Callback for type ["+a+"] does not exist. Listener not registered.",WARN),this},Stream.prototype.pipe=function(a){return this.on("data",function(b){try{a.write(b,"utf8")}catch(c){dust.log(c,ERROR)}}).on("end",function(){try{return a.end()}catch(b){dust.log(b,ERROR)}}).on("error",function(b){a.error(b)}),this},Chunk.prototype.write=function(a){var b=this.taps;return b&&(a=b.go(a)),this.data.push(a),this},Chunk.prototype.end=function(a){return a&&this.write(a),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(a){var b=new Chunk(this.root,this.next,this.taps),c=new Chunk(this.root,b,this.taps);this.next=c,this.flushable=!0;try{a(c)}catch(d){dust.log(d,ERROR),c.setError(d)}return b},Chunk.prototype.tap=function(a){var b=this.taps;return this.taps=b?b.push(a):new Tap(a),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(a,b){return a(this,b)},Chunk.prototype.reference=function(a,b,c,d){return"function"==typeof a&&(a=a.apply(b.current(),[this,b,null,{auto:c,filters:d}]),a instanceof Chunk)?a:dust.isEmpty(a)?this:this.write(dust.filter(a,c,d))},Chunk.prototype.section=function(a,b,c,d){if("function"==typeof a&&!a.__dustBody){try{a=a.apply(b.current(),[this,b,c,d])}catch(e){return dust.log(e,ERROR),this.setError(e)}if(a instanceof Chunk)return a}var f=c.block,g=c["else"];if(d&&(b=b.push(d)),dust.isArray(a)){if(f){var h=a.length,i=this;if(h>0){b.stack.head&&(b.stack.head.$len=h);for(var j=0;h>j;j++)b.stack.head&&(b.stack.head.$idx=j),i=f(i,b.push(a[j],j,h));return b.stack.head&&(b.stack.head.$idx=void 0,b.stack.head.$len=void 0),i}if(g)return g(this,b)}}else if(a===!0){if(f)return f(this,b)}else if(a||0===a){if(f)return f(this,b.push(a))}else if(g)return g(this,b);return dust.log("Not rendering section (#) block in template ["+b.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.exists=function(a,b,c){var d=c.block,e=c["else"];if(dust.isEmpty(a)){if(e)return e(this,b)}else if(d)return d(this,b);return dust.log("Not rendering exists (?) block in template ["+b.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.notexists=function(a,b,c){var d=c.block,e=c["else"];if(dust.isEmpty(a)){if(d)return d(this,b)}else if(e)return e(this,b);return dust.log("Not rendering not exists (^) block check in template ["+b.getTemplateName()+"], because above key was found",DEBUG),this},Chunk.prototype.block=function(a,b,c){var d=c.block;return a&&(d=a),d?d(this,b):this},Chunk.prototype.partial=function(a,b,c){var d;d=dust.makeBase(b.global),d.blocks=b.blocks,b.stack&&b.stack.tail&&(d.stack=b.stack.tail),c&&(d=d.push(c)),"string"==typeof a&&(d.templateName=a),d=d.push(b.stack.head);var e;return e="function"==typeof a?this.capture(a,d,function(a,b){d.templateName=d.templateName||a,dust.load(a,b,d).end()}):dust.load(a,this,d)},Chunk.prototype.helper=function(a,b,c,d){var e=this;if(!dust.helpers[a])return dust.log("Invalid helper ["+a+"]",WARN),e;try{return dust.helpers[a](e,b,c,d)}catch(f){return dust.log("Error in "+a+" helper: "+f,ERROR),e.setError(f)}},Chunk.prototype.capture=function(a,b,c){return this.map(function(d){var e=new Stub(function(a,b){a?d.setError(a):c(b,d)});a(e.head,b).end()})},Chunk.prototype.setError=function(a){return this.error=a,this.root.flush(),this};for(var f in Chunk.prototype)dust._aliases[f]&&(Chunk.prototype[dust._aliases[f]]=Chunk.prototype[f]);Tap.prototype.push=function(a){return new Tap(a,this)},Tap.prototype.go=function(a){for(var b=this;b;)a=b.head(a),b=b.tail;return a};var HCHARS=/[&<>"']/,AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(a){return"string"==typeof a&&HCHARS.test(a)?a.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):a};var BS=/\\/g,FS=/\//g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(a){return"string"==typeof a?a.replace(BS,"\\\\").replace(FS,"\\/").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):a},"object"==typeof exports?module.exports=dust:root.dust=dust}(function(){return this}()),function(a,b){"object"==typeof exports?module.exports=b(require("./dust")):b(a.dust)}(this,function(dust){var a=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(){return f(nd).line}function d(){return f(nd).column}function e(a){throw h(a,null,nd)}function f(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return od!==b&&(od>b&&(od=0,pd={line:1,column:1,seenCR:!1}),c(pd,od,b),od=b),pd}function g(a){qd>md||(md>qd&&(qd=md,rd=[]),rd.push(a))}function h(c,d,e){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=f(e),j=e<a.length?a.charAt(e):null;return null!==d&&g(d),new b(null!==c?c:h(d,j),d,j,e,i.line,i.column)}function i(){var a;return a=j()}function j(){var a,b,c;for(a=md,b=[],c=k();c!==T;)b.push(c),c=k();return b!==T&&(nd=a,b=W(b)),a=b}function k(){var a;return a=I(),a===T&&(a=J(),a===T&&(a=l(),a===T&&(a=s(),a===T&&(a=u(),a===T&&(a=r(),a===T&&(a=F())))))),a}function l(){var b,c,d,e,f,h,i,k;if(sd++,b=md,c=m(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();d!==T?(e=M(),e!==T?(f=j(),f!==T?(h=q(),h!==T?(i=n(),i===T&&(i=Z),i!==T?(nd=md,k=$(c,f,h,i),k=k?_:Y,k!==T?(nd=b,c=ab(c,f,h,i),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;if(b===T)if(b=md,c=m(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();d!==T?(47===a.charCodeAt(md)?(e=bb,md++):(e=T,0===sd&&g(cb)),e!==T?(f=M(),f!==T?(nd=b,c=db(c),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(X)),b}function m(){var b,c,d,e,f,h,i;if(b=md,c=L(),c!==T)if(eb.test(a.charAt(md))?(d=a.charAt(md),md++):(d=T,0===sd&&g(fb)),d!==T){for(e=[],f=Q();f!==T;)e.push(f),f=Q();e!==T?(f=v(),f!==T?(h=o(),h!==T?(i=p(),i!==T?(nd=b,c=gb(d,f,h,i),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;else md=b,b=Y;return b}function n(){var b,c,d,e,f,h,i;if(sd++,b=md,c=L(),c!==T)if(47===a.charCodeAt(md)?(d=bb,md++):(d=T,0===sd&&g(cb)),d!==T){for(e=[],f=Q();f!==T;)e.push(f),f=Q();if(e!==T)if(f=v(),f!==T){for(h=[],i=Q();i!==T;)h.push(i),i=Q();h!==T?(i=M(),i!==T?(nd=b,c=ib(f),b=c):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;else md=b,b=Y}else md=b,b=Y;else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(hb)),b}function o(){var b,c,d,e;return b=md,c=md,58===a.charCodeAt(md)?(d=jb,md++):(d=T,0===sd&&g(kb)),d!==T?(e=v(),e!==T?(nd=c,d=lb(e),c=d):(md=c,c=Y)):(md=c,c=Y),c===T&&(c=Z),c!==T&&(nd=b,c=mb(c)),b=c}function p(){var b,c,d,e,f,h,i;if(sd++,b=md,c=[],d=md,e=[],f=Q(),f!==T)for(;f!==T;)e.push(f),f=Q();else e=Y;for(e!==T?(f=A(),f!==T?(61===a.charCodeAt(md)?(h=ob,md++):(h=T,0===sd&&g(pb)),h!==T?(i=w(),i===T&&(i=v(),i===T&&(i=D())),i!==T?(nd=d,e=qb(f,i),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y);d!==T;){if(c.push(d),d=md,e=[],f=Q(),f!==T)for(;f!==T;)e.push(f),f=Q();else e=Y;e!==T?(f=A(),f!==T?(61===a.charCodeAt(md)?(h=ob,md++):(h=T,0===sd&&g(pb)),h!==T?(i=w(),i===T&&(i=v(),i===T&&(i=D())),i!==T?(nd=d,e=qb(f,i),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)}return c!==T&&(nd=b,c=rb(c)),b=c,sd--,b===T&&(c=T,0===sd&&g(nb)),b}function q(){var b,c,d,e,f,h,i,k;for(sd++,b=md,c=[],d=md,e=L(),e!==T?(58===a.charCodeAt(md)?(f=jb,md++):(f=T,0===sd&&g(kb)),f!==T?(h=A(),h!==T?(i=M(),i!==T?(k=j(),k!==T?(nd=d,e=qb(h,k),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y);d!==T;)c.push(d),d=md,e=L(),e!==T?(58===a.charCodeAt(md)?(f=jb,md++):(f=T,0===sd&&g(kb)),f!==T?(h=A(),h!==T?(i=M(),i!==T?(k=j(),k!==T?(nd=d,e=qb(h,k),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y);return c!==T&&(nd=b,c=tb(c)),b=c,sd--,b===T&&(c=T,0===sd&&g(sb)),b}function r(){var a,b,c,d,e;return sd++,a=md,b=L(),b!==T?(c=v(),c!==T?(d=t(),d!==T?(e=M(),e!==T?(nd=a,b=vb(c,d),a=b):(md=a,a=Y)):(md=a,a=Y)):(md=a,a=Y)):(md=a,a=Y),sd--,a===T&&(b=T,0===sd&&g(ub)),a}function s(){var b,c,d,e,f,h,i,j,k,l;if(sd++,b=md,c=L(),c!==T)if(62===a.charCodeAt(md)?(d=xb,md++):(d=T,0===sd&&g(yb)),d===T&&(43===a.charCodeAt(md)?(d=zb,md++):(d=T,0===sd&&g(Ab))),d!==T){for(e=[],f=Q();f!==T;)e.push(f),f=Q();if(e!==T)if(f=md,h=A(),h!==T&&(nd=f,h=Bb(h)),f=h,f===T&&(f=D()),f!==T)if(h=o(),h!==T)if(i=p(),i!==T){for(j=[],k=Q();k!==T;)j.push(k),k=Q();j!==T?(47===a.charCodeAt(md)?(k=bb,md++):(k=T,0===sd&&g(cb)),k!==T?(l=M(),l!==T?(nd=b,c=Cb(d,f,h,i),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;else md=b,b=Y;else md=b,b=Y;else md=b,b=Y}else md=b,b=Y;else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(wb)),b}function t(){var b,c,d,e,f;for(sd++,b=md,c=[],d=md,124===a.charCodeAt(md)?(e=Eb,md++):(e=T,0===sd&&g(Fb)),e!==T?(f=A(),f!==T?(nd=d,e=lb(f),d=e):(md=d,d=Y)):(md=d,d=Y);d!==T;)c.push(d),d=md,124===a.charCodeAt(md)?(e=Eb,md++):(e=T,0===sd&&g(Fb)),e!==T?(f=A(),f!==T?(nd=d,e=lb(f),d=e):(md=d,d=Y)):(md=d,d=Y);return c!==T&&(nd=b,c=Gb(c)),b=c,sd--,b===T&&(c=T,0===sd&&g(Db)),b}function u(){var b,c,d,e,f;return sd++,b=md,c=L(),c!==T?(126===a.charCodeAt(md)?(d=Ib,md++):(d=T,0===sd&&g(Jb)),d!==T?(e=A(),e!==T?(f=M(),f!==T?(nd=b,c=Kb(e),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y),sd--,b===T&&(c=T,0===sd&&g(Hb)),b}function v(){var a,b;return sd++,a=md,b=z(),b!==T&&(nd=a,b=Mb(b)),a=b,a===T&&(a=md,b=A(),b!==T&&(nd=a,b=Nb(b)),a=b),sd--,a===T&&(b=T,0===sd&&g(Lb)),a}function w(){var a,b;return sd++,a=md,b=x(),b===T&&(b=y()),b!==T&&(nd=a,b=Pb(b)),a=b,sd--,a===T&&(b=T,0===sd&&g(Ob)),a}function x(){var b,c,d,e,f;if(sd++,b=md,c=y(),c!==T)if(46===a.charCodeAt(md)?(d=Rb,md++):(d=T,0===sd&&g(Sb)),d!==T){if(e=[],f=y(),f!==T)for(;f!==T;)e.push(f),f=y();else e=Y;e!==T?(nd=b,c=Tb(c,e),b=c):(md=b,b=Y)}else md=b,b=Y;else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(Qb)),b}function y(){var b,c,d;if(sd++,b=md,c=[],Vb.test(a.charAt(md))?(d=a.charAt(md),md++):(d=T,0===sd&&g(Wb)),d!==T)for(;d!==T;)c.push(d),Vb.test(a.charAt(md))?(d=a.charAt(md),md++):(d=T,0===sd&&g(Wb));else c=Y;return c!==T&&(nd=b,c=Xb(c)),b=c,sd--,b===T&&(c=T,0===sd&&g(Ub)),b}function z(){var b,c,d,e;if(sd++,b=md,c=A(),c===T&&(c=Z),c!==T){if(d=[],e=C(),e===T&&(e=B()),e!==T)for(;e!==T;)d.push(e),e=C(),e===T&&(e=B());else d=Y;d!==T?(nd=b,c=Zb(c,d),b=c):(md=b,b=Y)}else md=b,b=Y;if(b===T)if(b=md,46===a.charCodeAt(md)?(c=Rb,md++):(c=T,0===sd&&g(Sb)),c!==T){for(d=[],e=C(),e===T&&(e=B());e!==T;)d.push(e),e=C(),e===T&&(e=B());d!==T?(nd=b,c=$b(d),b=c):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(Yb)),b}function A(){var b,c,d,e;if(sd++,b=md,ac.test(a.charAt(md))?(c=a.charAt(md),md++):(c=T,0===sd&&g(bc)),c!==T){for(d=[],cc.test(a.charAt(md))?(e=a.charAt(md),md++):(e=T,0===sd&&g(dc));e!==T;)d.push(e),cc.test(a.charAt(md))?(e=a.charAt(md),md++):(e=T,0===sd&&g(dc));d!==T?(nd=b,c=ec(c,d),b=c):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(_b)),b}function B(){var b,c,d,e,f,h;if(sd++,b=md,c=md,d=N(),d!==T){if(e=md,f=[],Vb.test(a.charAt(md))?(h=a.charAt(md),md++):(h=T,0===sd&&g(Wb)),h!==T)for(;h!==T;)f.push(h),Vb.test(a.charAt(md))?(h=a.charAt(md),md++):(h=T,0===sd&&g(Wb));else f=Y;f!==T&&(nd=e,f=gc(f)),e=f,e===T&&(e=v()),e!==T?(f=O(),f!==T?(nd=c,d=hc(e),c=d):(md=c,c=Y)):(md=c,c=Y)}else md=c,c=Y;return c!==T?(d=C(),d===T&&(d=Z),d!==T?(nd=b,c=ic(c,d),b=c):(md=b,b=Y)):(md=b,b=Y),sd--,b===T&&(c=T,0===sd&&g(fc)),b}function C(){var b,c,d,e,f;if(sd++,b=md,c=[],d=md,46===a.charCodeAt(md)?(e=Rb,md++):(e=T,0===sd&&g(Sb)),e!==T?(f=A(),f!==T?(nd=d,e=kc(f),d=e):(md=d,d=Y)):(md=d,d=Y),d!==T)for(;d!==T;)c.push(d),d=md,46===a.charCodeAt(md)?(e=Rb,md++):(e=T,0===sd&&g(Sb)),e!==T?(f=A(),f!==T?(nd=d,e=kc(f),d=e):(md=d,d=Y)):(md=d,d=Y);else c=Y;return c!==T?(d=B(),d===T&&(d=Z),d!==T?(nd=b,c=lc(c,d),b=c):(md=b,b=Y)):(md=b,b=Y),sd--,b===T&&(c=T,0===sd&&g(jc)),b}function D(){var b,c,d,e;if(sd++,b=md,34===a.charCodeAt(md)?(c=nc,md++):(c=T,0===sd&&g(oc)),c!==T?(34===a.charCodeAt(md)?(d=nc,md++):(d=T,0===sd&&g(oc)),d!==T?(nd=b,c=pc(),b=c):(md=b,b=Y)):(md=b,b=Y),b===T&&(b=md,34===a.charCodeAt(md)?(c=nc,md++):(c=T,0===sd&&g(oc)),c!==T?(d=G(),d!==T?(34===a.charCodeAt(md)?(e=nc,md++):(e=T,0===sd&&g(oc)),e!==T?(nd=b,c=qc(d),b=c):(md=b,b=Y)):(md=b,b=Y)):(md=b,b=Y),b===T))if(b=md,34===a.charCodeAt(md)?(c=nc,md++):(c=T,0===sd&&g(oc)),c!==T){if(d=[],e=E(),e!==T)for(;e!==T;)d.push(e),e=E();else d=Y;d!==T?(34===a.charCodeAt(md)?(e=nc,md++):(e=T,0===sd&&g(oc)),e!==T?(nd=b,c=rc(d),b=c):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(mc)),b}function E(){var a,b;return a=u(),a===T&&(a=r(),a===T&&(a=md,b=G(),b!==T&&(nd=a,b=sc(b)),a=b)),a}function F(){var b,c,d,e,f,h,i,j;if(sd++,b=md,c=P(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();d!==T?(nd=b,c=uc(c,d),b=c):(md=b,b=Y)}else md=b,b=Y;if(b===T){if(b=md,c=[],d=md,e=md,sd++,f=K(),sd--,f===T?e=_:(md=e,e=Y),e!==T?(f=md,sd++,h=I(),sd--,h===T?f=_:(md=f,f=Y),f!==T?(h=md,sd++,i=J(),sd--,i===T?h=_:(md=h,h=Y),h!==T?(i=md,sd++,j=P(),sd--,j===T?i=_:(md=i,i=Y),i!==T?(a.length>md?(j=a.charAt(md),md++):(j=T,0===sd&&g(vc)),j!==T?(nd=d,e=wc(j),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y),d!==T)for(;d!==T;)c.push(d),d=md,e=md,sd++,f=K(),sd--,f===T?e=_:(md=e,e=Y),e!==T?(f=md,sd++,h=I(),sd--,h===T?f=_:(md=f,f=Y),f!==T?(h=md,sd++,i=J(),sd--,i===T?h=_:(md=h,h=Y),h!==T?(i=md,sd++,j=P(),sd--,j===T?i=_:(md=i,i=Y),i!==T?(a.length>md?(j=a.charAt(md),md++):(j=T,0===sd&&g(vc)),j!==T?(nd=d,e=wc(j),d=e):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y)):(md=d,d=Y);else c=Y;c!==T&&(nd=b,c=xc(c)),b=c}return sd--,b===T&&(c=T,0===sd&&g(tc)),b}function G(){var b,c,d,e,f;if(sd++,b=md,c=[],d=md,e=md,sd++,f=K(),sd--,f===T?e=_:(md=e,e=Y),e!==T?(f=H(),f===T&&(zc.test(a.charAt(md))?(f=a.charAt(md),md++):(f=T,0===sd&&g(Ac))),f!==T?(nd=d,e=wc(f),d=e):(md=d,d=Y)):(md=d,d=Y),d!==T)for(;d!==T;)c.push(d),d=md,e=md,sd++,f=K(),sd--,f===T?e=_:(md=e,e=Y),e!==T?(f=H(),f===T&&(zc.test(a.charAt(md))?(f=a.charAt(md),md++):(f=T,0===sd&&g(Ac))),f!==T?(nd=d,e=wc(f),d=e):(md=d,d=Y)):(md=d,d=Y);else c=Y;return c!==T&&(nd=b,c=Bc(c)),b=c,sd--,b===T&&(c=T,0===sd&&g(yc)),b}function H(){var b,c;return b=md,a.substr(md,2)===Cc?(c=Cc,md+=2):(c=T,0===sd&&g(Dc)),c!==T&&(nd=b,c=Ec()),b=c}function I(){var b,c,d,e,f,h;if(sd++,b=md,a.substr(md,2)===Gc?(c=Gc,md+=2):(c=T,0===sd&&g(Hc)),c!==T){for(d=[],e=md,f=md,sd++,a.substr(md,2)===Ic?(h=Ic,md+=2):(h=T,0===sd&&g(Jc)),sd--,h===T?f=_:(md=f,f=Y),f!==T?(a.length>md?(h=a.charAt(md),md++):(h=T,0===sd&&g(vc)),h!==T?(nd=e,f=Kc(h),e=f):(md=e,e=Y)):(md=e,e=Y);e!==T;)d.push(e),e=md,f=md,sd++,a.substr(md,2)===Ic?(h=Ic,md+=2):(h=T,0===sd&&g(Jc)),sd--,h===T?f=_:(md=f,f=Y),f!==T?(a.length>md?(h=a.charAt(md),md++):(h=T,0===sd&&g(vc)),h!==T?(nd=e,f=Kc(h),e=f):(md=e,e=Y)):(md=e,e=Y);d!==T?(a.substr(md,2)===Ic?(e=Ic,md+=2):(e=T,0===sd&&g(Jc)),e!==T?(nd=b,c=Lc(d),b=c):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(Fc)),b}function J(){var b,c,d,e,f,h;if(sd++,b=md,a.substr(md,2)===Nc?(c=Nc,md+=2):(c=T,0===sd&&g(Oc)),c!==T){for(d=[],e=md,f=md,sd++,a.substr(md,2)===Pc?(h=Pc,md+=2):(h=T,0===sd&&g(Qc)),sd--,h===T?f=_:(md=f,f=Y),f!==T?(a.length>md?(h=a.charAt(md),md++):(h=T,0===sd&&g(vc)),h!==T?(nd=e,f=wc(h),e=f):(md=e,e=Y)):(md=e,e=Y);e!==T;)d.push(e),e=md,f=md,sd++,a.substr(md,2)===Pc?(h=Pc,md+=2):(h=T,0===sd&&g(Qc)),sd--,h===T?f=_:(md=f,f=Y),f!==T?(a.length>md?(h=a.charAt(md),md++):(h=T,0===sd&&g(vc)),h!==T?(nd=e,f=wc(h),e=f):(md=e,e=Y)):(md=e,e=Y);d!==T?(a.substr(md,2)===Pc?(e=Pc,md+=2):(e=T,0===sd&&g(Qc)),e!==T?(nd=b,c=Rc(d),b=c):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y;return sd--,b===T&&(c=T,0===sd&&g(Mc)),b}function K(){var b,c,d,e,f,h,i,j,k,l;if(b=md,c=L(),c!==T){for(d=[],e=Q();e!==T;)d.push(e),e=Q();if(d!==T)if(Sc.test(a.charAt(md))?(e=a.charAt(md),md++):(e=T,0===sd&&g(Tc)),e!==T){for(f=[],h=Q();h!==T;)f.push(h),h=Q();if(f!==T){if(h=[],i=md,j=md,sd++,k=M(),sd--,k===T?j=_:(md=j,j=Y),j!==T?(k=md,sd++,l=P(),sd--,l===T?k=_:(md=k,k=Y),k!==T?(a.length>md?(l=a.charAt(md),md++):(l=T,0===sd&&g(vc)),l!==T?(j=[j,k,l],i=j):(md=i,i=Y)):(md=i,i=Y)):(md=i,i=Y),i!==T)for(;i!==T;)h.push(i),i=md,j=md,sd++,k=M(),sd--,k===T?j=_:(md=j,j=Y),j!==T?(k=md,sd++,l=P(),sd--,l===T?k=_:(md=k,k=Y),k!==T?(a.length>md?(l=a.charAt(md),md++):(l=T,0===sd&&g(vc)),l!==T?(j=[j,k,l],i=j):(md=i,i=Y)):(md=i,i=Y)):(md=i,i=Y);else h=Y;if(h!==T){for(i=[],j=Q();j!==T;)i.push(j),j=Q();i!==T?(j=M(),j!==T?(c=[c,d,e,f,h,i,j],b=c):(md=b,b=Y)):(md=b,b=Y)}else md=b,b=Y}else md=b,b=Y}else md=b,b=Y;else md=b,b=Y}else md=b,b=Y;return b===T&&(b=r()),b}function L(){var b;return 123===a.charCodeAt(md)?(b=Uc,md++):(b=T,0===sd&&g(Vc)),b}function M(){var b;return 125===a.charCodeAt(md)?(b=Wc,md++):(b=T,0===sd&&g(Xc)),b}function N(){var b;return 91===a.charCodeAt(md)?(b=Yc,md++):(b=T,0===sd&&g(Zc)),b}function O(){var b;return 93===a.charCodeAt(md)?(b=$c,md++):(b=T,0===sd&&g(_c)),b}function P(){var b;return 10===a.charCodeAt(md)?(b=ad,md++):(b=T,0===sd&&g(bd)),b===T&&(a.substr(md,2)===cd?(b=cd,md+=2):(b=T,0===sd&&g(dd)),b===T&&(13===a.charCodeAt(md)?(b=ed,md++):(b=T,0===sd&&g(fd)),b===T&&(8232===a.charCodeAt(md)?(b=gd,md++):(b=T,0===sd&&g(hd)),b===T&&(8233===a.charCodeAt(md)?(b=id,md++):(b=T,0===sd&&g(jd)))))),b}function Q(){var b;return kd.test(a.charAt(md))?(b=a.charAt(md),md++):(b=T,0===sd&&g(ld)),b===T&&(b=P()),b}var R,S=arguments.length>1?arguments[1]:{},T={},U={start:i},V=i,W=function(a){return["body"].concat(a).concat([["line",c()],["col",d()]])},X={type:"other",description:"section"},Y=T,Z=null,$=function(a,b,c,d){return d&&a[1].text===d.text||e("Expected end tag for "+a[1].text+" but it was not found."),!0},_=void 0,ab=function(a,b,e){return e.push(["param",["literal","block"],b]),a.push(e),a.concat([["line",c()],["col",d()]])},bb="/",cb={type:"literal",value:"/",description:'"/"'},db=function(a){return a.push(["bodies"]),a.concat([["line",c()],["col",d()]])},eb=/^[#?\^<+@%]/,fb={type:"class",value:"[#?\\^<+@%]",description:"[#?\\^<+@%]"},gb=function(a,b,c,d){return[a,b,c,d]},hb={type:"other",description:"end tag"},ib=function(a){return a},jb=":",kb={type:"literal",value:":",description:'":"'},lb=function(a){return a},mb=function(a){return a?["context",a]:["context"]},nb={type:"other",description:"params"},ob="=",pb={type:"literal",value:"=",description:'"="'},qb=function(a,b){return["param",["literal",a],b]},rb=function(a){return["params"].concat(a)},sb={type:"other",description:"bodies"},tb=function(a){return["bodies"].concat(a)},ub={type:"other",description:"reference"},vb=function(a,b){return["reference",a,b].concat([["line",c()],["col",d()]])},wb={type:"other",description:"partial"},xb=">",yb={type:"literal",value:">",description:'">"'},zb="+",Ab={type:"literal",value:"+",description:'"+"'},Bb=function(a){return["literal",a]},Cb=function(a,b,e,f){var g=">"===a?"partial":a;return[g,b,e,f].concat([["line",c()],["col",d()]])},Db={type:"other",description:"filters"},Eb="|",Fb={type:"literal",value:"|",description:'"|"'},Gb=function(a){return["filters"].concat(a)},Hb={type:"other",description:"special"},Ib="~",Jb={type:"literal",value:"~",description:'"~"'},Kb=function(a){return["special",a].concat([["line",c()],["col",d()]])},Lb={type:"other",description:"identifier"},Mb=function(a){var b=["path"].concat(a);return b.text=a[1].join(".").replace(/,line,\d+,col,\d+/g,""),b},Nb=function(a){var b=["key",a];return b.text=a,b},Ob={type:"other",description:"number"},Pb=function(a){return["literal",a]},Qb={type:"other",description:"float"},Rb=".",Sb={type:"literal",value:".",description:'"."'},Tb=function(a,b){return parseFloat(a+"."+b.join(""))},Ub={type:"other",description:"integer"},Vb=/^[0-9]/,Wb={type:"class",value:"[0-9]",description:"[0-9]"},Xb=function(a){return parseInt(a.join(""),10)},Yb={type:"other",description:"path"},Zb=function(a,b){return b=b[0],a&&b?(b.unshift(a),[!1,b].concat([["line",c()],["col",d()]])):[!0,b].concat([["line",c()],["col",d()]])},$b=function(a){return a.length>0?[!0,a[0]].concat([["line",c()],["col",d()]]):[!0,[]].concat([["line",c()],["col",d()]])},_b={type:"other",description:"key"},ac=/^[a-zA-Z_$]/,bc={type:"class",value:"[a-zA-Z_$]",description:"[a-zA-Z_$]"},cc=/^[0-9a-zA-Z_$\-]/,dc={type:"class",value:"[0-9a-zA-Z_$\\-]",description:"[0-9a-zA-Z_$\\-]"},ec=function(a,b){return a+b.join("")},fc={type:"other",description:"array"},gc=function(a){return a.join("")},hc=function(a){return a},ic=function(a,b){return b?b.unshift(a):b=[a],b},jc={type:"other",description:"array_part"},kc=function(a){return a},lc=function(a,b){return b?a.concat(b):a},mc={type:"other",description:"inline"},nc='"',oc={type:"literal",value:'"',description:'"\\""'},pc=function(){return["literal",""].concat([["line",c()],["col",d()]])},qc=function(a){return["literal",a].concat([["line",c()],["col",d()]])},rc=function(a){return["body"].concat(a).concat([["line",c()],["col",d()]])},sc=function(a){return["buffer",a]},tc={type:"other",description:"buffer"},uc=function(a,b){return["format",a,b.join("")].concat([["line",c()],["col",d()]])},vc={type:"any",description:"any character"},wc=function(a){return a},xc=function(a){return["buffer",a.join("")].concat([["line",c()],["col",d()]])},yc={type:"other",description:"literal"},zc=/^[^"]/,Ac={type:"class",value:'[^"]',description:'[^"]'},Bc=function(a){return a.join("")},Cc='\\"',Dc={type:"literal",value:'\\"',description:'"\\\\\\""'},Ec=function(){return'"'},Fc={type:"other",description:"raw"},Gc="{`",Hc={type:"literal",value:"{`",description:'"{`"'},Ic="`}",Jc={type:"literal",value:"`}",description:'"`}"'},Kc=function(a){return a},Lc=function(a){return["raw",a.join("")].concat([["line",c()],["col",d()]])},Mc={type:"other",description:"comment"},Nc="{!",Oc={type:"literal",value:"{!",description:'"{!"'},Pc="!}",Qc={type:"literal",value:"!}",description:'"!}"'},Rc=function(a){return["comment",a.join("")].concat([["line",c()],["col",d()]])},Sc=/^[#?\^><+%:@\/~%]/,Tc={type:"class",value:"[#?\\^><+%:@\\/~%]",description:"[#?\\^><+%:@\\/~%]"},Uc="{",Vc={type:"literal",value:"{",description:'"{"'},Wc="}",Xc={type:"literal",value:"}",description:'"}"'},Yc="[",Zc={type:"literal",value:"[",description:'"["'},$c="]",_c={type:"literal",value:"]",description:'"]"'},ad="\n",bd={type:"literal",value:"\n",description:'"\\n"'},cd="\r\n",dd={type:"literal",value:"\r\n",description:'"\\r\\n"'},ed="\r",fd={type:"literal",value:"\r",description:'"\\r"'},gd="\u2028",hd={type:"literal",value:"\u2028",description:'"\\u2028"'},id="\u2029",jd={type:"literal",value:"\u2029",description:'"\\u2029"'},kd=/^[\t\x0B\f \xA0\uFEFF]/,ld={type:"class",value:"[\\t\\x0B\\f \\xA0\\uFEFF]",description:"[\\t\\x0B\\f \\xA0\\uFEFF]"},md=0,nd=0,od=0,pd={line:1,column:1,seenCR:!1},qd=0,rd=[],sd=0;if("startRule"in S){if(!(S.startRule in U))throw new Error("Can't start parsing from rule \""+S.startRule+'".');V=U[S.startRule]}if(R=V(),R!==T&&md===a.length)return R;throw R!==T&&md<a.length&&g({type:"end",description:"end of input"}),h(null,rd,qd)}return a(b,Error),{SyntaxError:b,parse:c}}();return dust.parse=a.parse,a}),function(a,b){"object"==typeof exports?module.exports=b(require("./parser").parse,require("./dust")):b(a.dust.parse,a.dust)}(this,function(a,dust){function b(a){var b={};return o.filterNode(b,a)}function c(a,b){var c,d,e,f=[b[0]];for(c=1,d=b.length;d>c;c++)e=o.filterNode(a,b[c]),e&&f.push(e);return f}function d(a,b){var c,d,e,f,g=[b[0]];for(d=1,e=b.length;e>d;d++)f=o.filterNode(a,b[d]),f&&("buffer"===f[0]||"format"===f[0]?c?(c[0]="buffer"===f[0]?"buffer":c[0],c[1]+=f.slice(1,-2).join("")):(c=f,g.push(f)):(c=null,g.push(f)));return g}function e(a,b){return["buffer",q[b[1]],b[2],b[3]]}function f(a,b){return b}function g(){}function h(a,b){return dust.config.whitespace?b:null}function i(a,b){var c={name:b,bodies:[],blocks:{},index:0,auto:"h"};return"(function(){dust.register("+(b?'"'+b+'"':"null")+","+o.compileNode(c,a)+");"+j(c)+k(c)+"return body_0;})();"}function j(a){var b,c=[],d=a.blocks;for(b in d)c.push('"'+b+'":'+d[b]);return c.length?(a.blocks="ctx=ctx.shiftBlocks(blocks);","var blocks={"+c.join(",")+"};"):a.blocks=""}function k(a){var b,c,d=[],e=a.bodies,f=a.blocks;for(b=0,c=e.length;c>b;b++)d[b]="function body_"+b+"(chk,ctx){"+f+"return chk"+e[b]+";}body_"+b+".__dustBody=!0;";return d.join("")}function l(a,b){var c,d,e="";for(c=1,d=b.length;d>c;c++)e+=o.compileNode(a,b[c]);return e}function m(a,b,c){return"."+(dust._aliases[c]||c)+"("+o.compileNode(a,b[1])+","+o.compileNode(a,b[2])+","+o.compileNode(a,b[4])+","+o.compileNode(a,b[3])+")"}function n(a){return a.replace(r,"\\\\").replace(s,'\\"').replace(t,"\\f").replace(u,"\\n").replace(v,"\\r").replace(w,"\\t")}var o={},p=dust.isArray;o.compile=function(c,d){if(!d&&null!==d)throw new Error("Template name parameter cannot be undefined when calling dust.compile");try{var e=b(a(c));return i(e,d)}catch(f){if(!f.line||!f.column)throw f;throw new SyntaxError(f.message+" At line : "+f.line+", column : "+f.column)}},o.filterNode=function(a,b){return o.optimizers[b[0]](a,b)},o.optimizers={body:d,buffer:f,special:e,format:h,reference:c,"#":c,"?":c,"^":c,"<":c,"+":c,"@":c,"%":c,partial:c,context:c,params:c,bodies:c,param:c,filters:f,key:f,path:f,literal:f,raw:f,comment:g,line:g,col:g},o.pragmas={esc:function(a,b,c){var d,e=a.auto;return b||(b="h"),a.auto="s"===b?"":b,d=l(a,c.block),a.auto=e,d}};var q={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};o.compileNode=function(a,b){return o.nodes[b[0]](a,b)},o.nodes={body:function(a,b){var c=a.index++,d="body_"+c;return a.bodies[c]=l(a,b),d},buffer:function(a,b){return".w("+x(b[1])+")"},format:function(a,b){return".w("+x(b[1]+b[2])+")"},reference:function(a,b){return".f("+o.compileNode(a,b[1])+",ctx,"+o.compileNode(a,b[2])+")"},"#":function(a,b){return m(a,b,"section")},"?":function(a,b){return m(a,b,"exists")},"^":function(a,b){return m(a,b,"notexists")},"<":function(a,b){for(var c=b[4],d=1,e=c.length;e>d;d++){var f=c[d],g=f[1][1];if("block"===g)return a.blocks[b[1].text]=o.compileNode(a,f[2]),""}return""},"+":function(a,b){return"undefined"==typeof b[1].text&&"undefined"==typeof b[4]?".block(ctx.getBlock("+o.compileNode(a,b[1])+",chk, ctx),"+o.compileNode(a,b[2])+", {},"+o.compileNode(a,b[3])+")":".block(ctx.getBlock("+x(b[1].text)+"),"+o.compileNode(a,b[2])+","+o.compileNode(a,b[4])+","+o.compileNode(a,b[3])+")"},"@":function(a,b){return".h("+x(b[1].text)+","+o.compileNode(a,b[2])+","+o.compileNode(a,b[4])+","+o.compileNode(a,b[3])+")"},"%":function(a,b){var c,d,e,f,g,h,i,j,k,l=b[1][1];if(!o.pragmas[l])return"";for(c=b[4],d={},j=1,k=c.length;k>j;j++)h=c[j],d[h[1][1]]=h[2];for(e=b[3],f={},j=1,k=e.length;k>j;j++)i=e[j],f[i[1][1]]=i[2][1];return g=b[2][1]?b[2][1].text:null,o.pragmas[l](a,g,d,f)},partial:function(a,b){return".p("+o.compileNode(a,b[1])+","+o.compileNode(a,b[2])+","+o.compileNode(a,b[3])+")"},context:function(a,b){return b[1]?"ctx.rebase("+o.compileNode(a,b[1])+")":"ctx"},params:function(a,b){for(var c=[],d=1,e=b.length;e>d;d++)c.push(o.compileNode(a,b[d]));return c.length?"{"+c.join(",")+"}":"{}"},bodies:function(a,b){for(var c=[],d=1,e=b.length;e>d;d++)c.push(o.compileNode(a,b[d]));return"{"+c.join(",")+"}"},param:function(a,b){return o.compileNode(a,b[1])+":"+o.compileNode(a,b[2])},filters:function(a,b){for(var c=[],d=1,e=b.length;e>d;d++){var f=b[d];c.push('"'+f+'"')}return'"'+a.auto+'"'+(c.length?",["+c.join(",")+"]":"")},key:function(a,b){return'ctx.get(["'+b[1]+'"], false)'},path:function(a,b){for(var c=b[1],d=b[2],e=[],f=0,g=d.length;g>f;f++)e.push(p(d[f])?o.compileNode(a,d[f]):'"'+d[f]+'"');return"ctx.getPath("+c+", ["+e.join(",")+"])"},literal:function(a,b){return x(b[1])},raw:function(a,b){return".w("+x(b[1])+")"}};var r=/\\/g,s=/"/g,t=/\f/g,u=/\n/g,v=/\r/g,w=/\t/g,x="undefined"==typeof JSON?function(a){return'"'+n(a)+'"'}:JSON.stringify;return dust.compile=o.compile,dust.filterNode=o.filterNode,dust.optimizers=o.optimizers,dust.pragmas=o.pragmas,dust.compileNode=o.compileNode,dust.nodes=o.nodes,o});define("dust",function(){});define("views/BaseView",["params","underscore","backbone","dust"],function(params,_){var BaseView=function(options){if(this.beforeInitialize)this.beforeInitialize();if(this.defaults){_.extend(this,this.defaults)}Backbone.View.apply(this,[options]);if(this.afterInitialize)this.afterInitialize();if(this.model){this.model.on("before-fetch",_.bind(this.beforeModelFetch,this));this.model.on("after-fetch",_.bind(this.afterModelFetch,this));this.model.on("fetched-with-success",_.bind(this.modelFetchedWithSucess,this));this.model.on("fetched-with-error",_.bind(this.modelFetchedWithError,this));this.model.on("is-not-valid",_.bind(this.modelFetchedWithError,this))}};_.extend(BaseView.prototype,Backbone.View.prototype,{setModel:function(model){this.model=model;this.bindTo(this.model,"change",_.bind(function(){if(!this.isActive)return;if(this.onModelChange){this.lastTimeStamp=this.model.get("timeStamp");setTimeout(_.bind(function(){this.onModelChange()},this),0)}},this))},activate:function(){if(this.isActive)return;this.isActive=true;this.activated=true;var versionChanged=true;var currentTimeStamp=this.model.get("timeStamp");if(this.lastTimeStamp){versionChanged=this.lastTimeStamp<currentTimeStamp}if(this.onModelChange&&versionChanged){this.onModelChange();this.lastTimeStamp=this.model.get("timeStamp")}},deactivate:function(){this.isActive=false},close:function(){this.closeSubviews();this.unbindFromAll();this.off();this.remove();if(this.onClose)this.onClose()},beforeModelFetch:function(){if(this.$el){this.trigger("model-updating");this.$el.addClass("is-updating").removeClass("model-updated-with-error")}},afterModelFetch:function(){if(this.$el){this.$el.removeClass("is-updating");this.trigger("model-updated")}},modelFetchedWithError:function(){if(this.$el){this.$el.addClass("model-updated-with-error");this.trigger("model-updated-with-error")}},modelFetchedWithSucess:function(){if(this.$el){this.$el.removeClass("model-updated-with-error");var fetchSucessCount=this.$el.attr("data-fwsc");if(!fetchSucessCount){fetchSucessCount=0}this.trigger("model-updated-with-success");this.$el.attr("data-fwsc",++fetchSucessCount)}},renderQueue:[],bindTo:function(object,e,callback,context){context||(context=this);object.on(e,callback,context);this.bindings||(this.bindings=[]);this.bindings.push({object:object,event:e,callback:callback})},$bindTo:function(object,e,callback){object.off(e,callback);object.on(e,callback);this.bindings||(this.bindings=[]);this.bindings.push({object:object,event:e,callback:callback})},unbindFromAll:function(){var self=this;_.each(this.bindings,function(binding){binding.object.off(binding.event,binding.callback,self)})},eachSubview:function(iterator){_.each(this.subviews,iterator)},appendSubview:function(view,el){el||(el=this.$el);this.subviews||(this.subviews={});this.subviews[view.cid]=view;el.append(view.el);this.addSubviewToRenderQueue(view)},addSubviewToRenderQueue:function(view){if(!view.selfRenderOnly){this.renderQueue.push({id:view.cid})}},renderSubviews:function(callback){this.eachSubview(_.bind(function(subView){if(!subView.selfRenderOnly){var self=this;subView.$el.bind("render-complete",function(){self.subviewRenderComplete(subView.cid)});subView.render()}},this));if(callback){this.$el.bind("subviews-rendered",callback)}},subviewRenderComplete:function(cid){var view=_.findWhere(this.renderQueue,_.findWhere(this.renderQueue,{id:cid}));if(!view)return;this.renderQueue=_.without(this.renderQueue,_.findWhere(this.renderQueue,{id:cid}));if(0==this.renderQueue.length){this.$el.trigger("subviews-rendered")}},isEmpty:function(obj){for(var key in obj){if(obj.hasOwnProperty(key))return false}return true},closeSubviews:function(){this.eachSubview(function(subview){subview.close()});this.subviews={}},detachSubview:function(view){if(this.subviews){delete this.subviews[view.cid]}view.$el.detach()},templateContext:function(){return this.model?this.model.toJSON():{}},layout:function(context,template){var self=this;template||(template=this.template);if(template){this.closeSubviews();this.$el.empty();context||(context=this.templateContext());var templateName=params.config.site.gIsAssetsSourceLoaded?"text!templates/{0}.dust".format(template):"templates-js/{0}".format(template);require([templateName],function(templateData){if(!dust){console.log("Dust is not loaded.. dust please..");return}var compiled;if(params.config.site.gIsAssetsSourceLoaded){compiled=dust.compile(templateData,template)}else if(!dust.cache[template]){compiled=dust.compile(context,template)}dust.loadSource(compiled);dust.render(template,context,function(err,out){if(err){console.log("Dust render error: {0}".format(err));return}_.bind(function(){this.$el.html(out);if(this.onRender)this.onRender();this.rendered=true;this.$el.trigger("render-complete",[this.cid])},self)()})})}},render:function(context){if(!this.validate())return;this.layout(context);return this},renderError:function(template){this.layout(null,template)},validate:function(){if(!this.model)return true;if(!this.model.isValid()){return false}var subViewsAreValid=true;this.eachSubview(function(subview){subViewsAreValid=subview.validate()});return subViewsAreValid}});BaseView.extend=Backbone.View.extend;return BaseView});define("models/BaseModel",["backbone","underscore"],function(Backbone,_){var fetch=Backbone.Model.prototype.fetch;var BaseModel=Backbone.Model.extend({idAttribute:"matchId",defaults:{},fetch:function(){var args=[];if(arguments){var currentArgs=arguments[0];var newArgs=_.extend({},arguments[0]?arguments[0]:{});this.trigger("before-fetch");var self=this;newArgs.success=function(){if(currentArgs&&currentArgs.success){currentArgs.success()}self.trigger("after-fetch");if(!this.validate||this.validate&&!this.validate()){self.trigger("fetched-with-success")}};newArgs.error=function(){if(currentArgs&&currentArgs.error){currentArgs.error()}self.trigger("after-fetch");self.trigger("fetched-with-error")};args[0]=newArgs}return fetch.apply(this,args)},toJSON:function(){if(this._isSerializing){return this.id||this.cid}this._isSerializing=true;var json=_.clone(this.attributes);_.each(json,function(value,name){if(!value)return;_.isFunction(value.toJSON)&&(json[name]=value.toJSON())});this._isSerializing=false;return json},forward:function(attribute,subModel,options){var self=this;var property=options&&options.property?options.property:attribute;self[property]=subModel;subModel.set(self.get(attribute));self.on("change:"+attribute,function(model,value,options){subModel.set(value,options)});subModel.add=function(model,options){var collection=_.clone(self.get(attribute));collection.push(model.attributes);self.set(attribute,collection)}}});return BaseModel});define("models/MatchCentreTeamModel",["backbone","models/BaseModel","underscore"],function(Backbone,BaseModel,_){var MatchCentreTeamModel=BaseModel.extend({initialize:function(options){},getFormation:function(minMinute,maxMinute,maxLimit,statusCode){var formations=this.get("formations");if(!formations||formations.length<0)return null;if(6==statusCode&&0==minMinute&&maxMinute==maxLimit){return _.first(formations)}var formation=null!=minMinute&&null!=maxMinute?this.getFormationInRange(minMinute,maxMinute):_.last(formations);return formation},getFormationInRange:function(minMinute,maxMinute){var formations=this.get("formations");return _.last(_.filter(formations,function(formation){return formation.startMinuteExpanded<=maxMinute}))},getPlayerWithId:function(playerId){try{return _.findWhere(this.get("players"),{playerId:parseInt(playerId,10)})}catch(e){}return null},getPlayerAtIndex:function(index){var players=this.get("players");if(players&&index<players.length){return players[index]}return null},getDefaultPlayer:function(){return _.findWhere(this.get("players"),{position:"GK"})},validate:function(attrs,options){if(!attrs){return"No team data"}}});return MatchCentreTeamModel});define("models/MatchCentreModel",["models/BaseModel","models/MatchCentreTeamModel","underscore"],function(BaseModel,MatchCentreTeamModel,_){var MatchCentreModel=BaseModel.extend({url:function(){return"/MatchesFeed/"+this.id+"/MatchCentre2"},idAttribute:"matchId",initialize:function(){this.forward("home",new MatchCentreTeamModel);this.forward("away",new MatchCentreTeamModel)},onModelChange:function(){},defaults:{},validate:function(attrs,options){if(!attrs){return"No match data at all"}}});return MatchCentreModel});define("lib/helpers/MatchCentreHelper",["WS/WS.Localizer","underscore"],function(WSLocalizer,_){var MatchCentreHelper={timelineWidth:964,getLeftFromMinute:function(minute,second,maxMinute){var leftFromMinute=100*(minute/maxMinute);var leftFromSecond=second?100*(second/(maxMinute*60)):0;return leftFromMinute+leftFromSecond},getMinuteFromLeft:function(left,maxMinute){var leftAsInt=this.getLeftAsInt(left);return parseInt(maxMinute*(leftAsInt/this.timelineWidth),10)},getLeftAsInt:function(left){if(!left)return;if(left.replace){if(-1!=left.indexOf("px")){return left.replace("px","")}if(-1!=left.indexOf("%")){var leftInPercentage=left.replace("%","");return leftInPercentage*this.timelineWidth/100}}else{return left}},getMinuteFromExpandedMinute:function(minuteExpanded,maxMinute,maxMinuteExpanded){return maxMinute*(minuteExpanded/maxMinuteExpanded)},getExpandedMinute:function(period,minute){var previousExtraTimeMinutes=0;for(var periodEndMinute in this.periodEndMinutes){if(periodEndMinute<period){var extraTime=this.getExtraTimeMinute(periodEndMinute,this.periodEndMinutes[periodEndMinute]);previousExtraTimeMinutes+=extraTime}}return minute+previousExtraTimeMinutes},getExtraTimeMinute:function(period,minute){var periodEndLimit=this.periodMinuteLimits[period];return periodEndLimit?Math.max(minute-periodEndLimit,0):0},periodMinuteLimits:{1:45,2:90,3:105,4:120},getKeyIncidentEventSatisfiers:function(event,eventTypeMappings){if(!event.satisfiedEventsTypes)return null;if(!eventTypeMappings)return null;var satisfiers=[];_.each(event.satisfiedEventsTypes,function(satisfiedEventsTypeId){var satisfiedEventTypeName=eventTypeMappings[satisfiedEventsTypeId];satisfiers.push({id:satisfiedEventsTypeId,name:satisfiedEventTypeName})});return satisfiers},minuteStringExceptions:{2:{45:"46"},3:{90:"91"},4:{105:"106"},5:{120:"121"}},getMinuteStringException:function(period,minute){return this.minuteStringExceptions[period]?this.minuteStringExceptions[minute]:null},getMinuteString:function(minute,extraTimeMinute,period){var minuteStringException=this.getMinuteStringException(period,minute);if(minuteStringException){return minuteStringException}var m=parseInt(minute,10);m=extraTimeMinute?m:m+1;var e=extraTimeMinute?-parseInt(extraTimeMinute,10):0;return m+e+(extraTimeMinute?"+{0}".format(extraTimeMinute):"")},getMinuteInfosFromExpandedMinutes:function(expandedMinutes){var minuteInfos={};for(var period in expandedMinutes){var periodMinutes=expandedMinutes[period];var minutes=_.values(periodMinutes);var lastExpandedMinuteForPeriod=_.last(minutes);for(var minute in periodMinutes){var expandedMinute=periodMinutes[minute];var extraTimeMinute=this.getExtraTimeMinute(period,minute);var minuteString=this.getMinuteString(minute,extraTimeMinute,period);minuteInfos[expandedMinute]={expandedMinute:expandedMinute,minute:minute,extraTime:extraTimeMinute,minuteString:minuteString,isEndOfPeriod:lastExpandedMinuteForPeriod==expandedMinute,period:period}}}return minuteInfos},getShotZoneTypeFromEvent:function(event){var goalMouthY=event.goalMouthY;var goalMouthZ=event.goalMouthZ;if(goalMouthY&&goalMouthZ){if(55.8<=goalMouthY&&goalMouthY<=100&&(40<=goalMouthZ&&goalMouthZ<=100))return"misshighleft";if(44.2<=goalMouthY&&goalMouthY<=55.8&&(42<=goalMouthZ&&goalMouthZ<=100))return"misshighcentre";if(0<=goalMouthY&&goalMouthY<=44.2&&(40<=goalMouthZ&&goalMouthZ<=100))return"misshighright";if(55.8<=goalMouthY&&goalMouthY<=100&&(0<=goalMouthZ&&goalMouthZ<=40))return"missleft";if(0<=goalMouthY&&goalMouthY<=44.2&&(0<=goalMouthZ&&goalMouthZ<=40))return"missright";if(54.8<=goalMouthY&&goalMouthY<=55.8&&(0<=goalMouthZ&&goalMouthZ<=38))return"postleft";if(44.2<=goalMouthY&&goalMouthY<=55.8&&(38<=goalMouthZ&&goalMouthZ<=42))return"postcentre";if(44.2<=goalMouthY&&goalMouthY<=45.2&&(0<=goalMouthZ&&goalMouthZ<=38))return"postright";if(51.8<=goalMouthY&&goalMouthY<=54.8&&(20<=goalMouthZ&&goalMouthZ<=38))return"ontargethighleft";if(48.2<=goalMouthY&&goalMouthY<=51.8&&(20<=goalMouthZ&&goalMouthZ<=38))return"ontargethighcentre";if(45.2<=goalMouthY&&goalMouthY<=48.2&&(20<=goalMouthZ&&goalMouthZ<=38))return"ontargethighright";if(51.8<=goalMouthY&&goalMouthY<=54.8&&(0<=goalMouthZ&&goalMouthZ<=20))return"ontargetlowleft";if(48.2<=goalMouthY&&goalMouthY<=51.8&&(0<=goalMouthZ&&goalMouthZ<=20))return"ontargetlowcentre";if(45.2<=goalMouthY&&goalMouthY<=48.2&&(0<=goalMouthZ&&goalMouthZ<=20))return"ontargetlowright"}return null},getWeatherDisplayNameFromWeatherCode:function(weatherCode){return weatherCode?this.weatherDisplayNames[weatherCode]:""},weatherDisplayNames:{1:WSLocalizer.dbRes("UIComponent","weather_windy"),2:WSLocalizer.dbRes("UIComponent","weather_rain"),3:WSLocalizer.dbRes("UIComponent","weather_fog"),4:WSLocalizer.dbRes("UIComponent","weather_snow_hail"),5:WSLocalizer.dbRes("UIComponent","weather_clear"),6:WSLocalizer.dbRes("UIComponent","weather_sunny"),7:WSLocalizer.dbRes("UIComponent","weather_cloudy"),8:WSLocalizer.dbRes("UIComponent","weather_partly_cloudy"),9:WSLocalizer.dbRes("UIComponent","weather_heavy_rain"),10:WSLocalizer.dbRes("UIComponent","weather_heavy_snow")},keyIncidentSatisfierNames:["assist"],eventSatisfiesAnySatisfier:function(event){var self=this;return event.satisfiers?_.any(event.satisfiers,function(satisfier){return _.contains(self.keyIncidentSatisfierNames,satisfier.name)}):false},keyIncidentEventTypes:[16,17,18,19],eventIsKeyIncident:function(event){return this.eventSatisfiesAnySatisfier(event)||_.contains(this.keyIncidentEventTypes,event.type.value)}};return MatchCentreHelper});define("views/MatchCentreStadiumView",["WS/WS.Localizer","backbone","params","views/BaseView","lib/helpers/MatchCentreHelper","WS/WS.UrlHelper","underscore","dust"],function(WSLocalizer,Backbone,params,BaseView,MatchCentreHelper,WSUrlHelper,_){var MatchCentreStadiumView=BaseView.extend({el:"#stadium",template:"match-centre-stadium",events:{"click .stadium-bench-nav":"navClicked"},formationIndex:0,defaults:{minStatValue:9999,maxStatValue:0,minMinute:0,minMinuteExpanded:0,currentPlayerStatValues:{},selectedPlayers:{}},initialize:function(options){this.eventTypeMappings=options.eventTypeMappings;this.model.on("change",_.bind(function(){this.onModelChange()},this))},countSubPlayers:function(team){return team.get("players").filter(function(player){return Object.keys(player.stats).length&&player.position==="Sub"}).length||0},onModelChange:function(){this.expandedMinutes=this.model.get("expandedMinutes");this.maxMinuteExpanded=this.maxMinuteExpanded?this.maxMinuteExpanded:this.model.get("expandedMaxMinute");this.maxExpandedLimit=this.model.get("minuteExpanded");this.minuteInfos=MatchCentreHelper.getMinuteInfosFromExpandedMinutes(this.expandedMinutes);this.renderStadium()},navClicked:function(element){var el=$(element.currentTarget);var slider=el.parent().find(".substitutes");var matchWidth=slider.find(".player").outerWidth(true);var visibleContentWidth=slider.width();var size=Math.floor(visibleContentWidth/matchWidth);var currentPos=slider.scrollLeft();var positionToMove=currentPos;if(el.hasClass("right")){positionToMove+=size*matchWidth}if(el.hasClass("left")){positionToMove-=size*matchWidth}slider.animate({scrollLeft:positionToMove+"px"},800)},renderStadium:function(){var MCLASS="more-than-three-subs";this.setTeamInfo(this.model.home);this.setTeamInfo(this.model.away);this.ensureDefaultPlayers();this.setPlayerInfo(this.selectedPlayers["home"]);this.setPlayerInfo(this.selectedPlayers["away"]);this.renderMatchInfo();this.renderFormations();if(this.countSubPlayers(this.model["home"])>3){this.$el.find('.bench[data-field="home"] .substitutes').addClass(MCLASS)}if(this.countSubPlayers(this.model["away"])>3){this.$el.find('.bench[data-field="away"] .substitutes').addClass(MCLASS)}this.$el.trigger("rendered")},ensureDefaultPlayers:function(){if(!("home"in this.selectedPlayers)){this.selectedPlayers["home"]=this.model.home.getDefaultPlayer()}if(!("away"in this.selectedPlayers)){this.selectedPlayers["away"]=this.model.away.getDefaultPlayer()}},renderFormations:function(){this.renderFormation(this.model.home);this.renderFormation(this.model.away)},getTeamPlayersCount:function(team){var players=team.get("players");return players?players.length:0},renderMatchInfo:function(){this.renderMatchInfoItem("venueName");this.renderMatchInfoItem("weatherCode",MatchCentreHelper.getWeatherDisplayNameFromWeatherCode(this.model.get("weatherCode")));this.renderMatchInfoItem("attendance",null,this.numberWithCommas);this.renderMatchStatus()},renderMatchStatus:function(){this.renderMatchInfoItem("score");this.renderMatchInfoItem("elapsed")},numberWithCommas:function(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},renderMatchInfoItem:function(name,labelText,format){var value=labelText?labelText:this.model.get(name);var coreValue=this.model.get(name);if(format){value=format(value)}var $value=this.$el.find('[data-for="{0}"]'.format(name));if(value){$value.removeClass("is-empty").attr("data-value",value).attr("data-core-value",coreValue).find(".value").html(value)}else{$value.addClass("is-empty")}},updatePlayerStats:function(newStats){var playerStatValues=newStats.values;var statName=newStats.name;this.setPlayerStatValues(playerStatValues,statName);this.currentPlayerStatValues[statName]=playerStatValues},bindCustomEvents:function(){if(!this.customEventsBound){this.customEventsBound=true;this.$el.on("player-stats-updated",_.bind(function(e,newStats){setTimeout(_.bind(function(){this.updatePlayerStats(newStats)},this),0)},this));this.$el.on("player-event-highlighted",_.bind(function(e,playerId){this.hightlightPlayerOn(playerId)},this));this.$el.on("player-event-highlight-removed",_.bind(function(e,playerId){this.hightlightPlayerOff(playerId)},this));this.$el.on("player-mode-on",_.bind(function(e,player){this.setPlayerInfo(player)},this));this.$el.on("minutes-range-changed-for-stadium",_.bind(function(e,range){this.setMinMaxExpandedMinutesFromRange(range);this.renderStadium()},this))}},setMinMaxExpandedMinutesFromRange:function(range){var range1=range[0];var range2=range[1];this.minMinuteExpanded=Math.min(range1.expandedMinute,range2.expandedMinute);this.maxMinuteExpanded=Math.max(range1.expandedMinute,range2.expandedMinute)},onRender:function(){this.bindCustomEvents()},hightlightPlayerOn:function(playerId){this.$el.addClass("highlight-on").find('.player[data-player-id="{0}"]'.format(playerId)).addClass("highlighted")},hightlightPlayerOff:function(playerId){this.$el.removeClass("highlight-on").find('.player[data-player-id="{0}"]'.format(playerId)).removeClass("highlighted")},validate:function(){return true},setPlayerStatValues:function(playerStatValues,statName){if(!this.$players)return;this.resetPlayerStatValues();this.setStatIncreaseDecreaseStates(playerStatValues,statName);this.sizePlayerStatsRelatively()},setStatIncreaseDecreaseStates:function(playerStatValues,statName){for(var playerId in playerStatValues){var $player=this.$getPlayerWithId(playerId);var statValue=playerStatValues[playerId];var oldStatValue;if(this.currentPlayerStatValues[statName]&&this.currentPlayerStatValues[statName][playerId]){oldStatValue=this.currentPlayerStatValues[statName][playerId]}this.minStatValue=Math.min(this.minStatValue,statValue);this.maxStatValue=Math.max(this.maxStatValue,statValue);$player.find(".player-stat-value").html(statValue);$player.attr("data-has-stat",true).removeAttr("data-stat-increased");if(oldStatValue){if(oldStatValue!=statValue){$player.attr("data-stat-increased",oldStatValue<statValue)}}}},sizePlayerStatsRelatively:function(){var maxFont=14;var minFont=10;var minStatValue=this.minStatValue;var maxStatValue=this.maxStatValue;$(".player-stat-value",this.$el).each(function(){var $value=$(this);var value=parseFloat($value.text());var fontSize=(value-minStatValue)*(maxFont-minFont)/(maxStatValue-minStatValue)+minFont;$value.fontSize=$value.css("font-size",fontSize)})},resetPlayerStatValues:function(){this.$players.removeAttr("data-has-stat").find(".player-stat-value").html("")},renderFormation:function(team){if(!team)return;var formation=team.getFormation(this.minMinuteExpanded,this.maxMinuteExpanded,this.maxExpandedLimit,this.model.get("statusCode"));if(!formation)return;this.$players=this.$el.find(".player[data-player-id]");_.each(team.get("players"),_.bind(function(player){this.positionPlayer(team,player,formation);this.setPlayerKeyIncidents(team,player);this.setPlayerSubbedStatus(team,player)},this))},$getPlayerWithId:function(playerId){return this.$players.filter('[data-player-id="{0}"]'.format(playerId))},positionPlayer:function(team,player,formation){var playerIndex=_.indexOf(formation.playerIds,player.playerId);var formationSlot=formation.formationSlots[playerIndex];if(0<formationSlot&&formationSlot<=11){var formationPosition=formation.formationPositions[formationSlot-1];this.positionPitchPlayer(team,player,formationPosition)}else{this.positionBenchPlayer(player)}},positionPitchPlayer:function(team,player,formationPosition){setTimeout(_.bind(function(){var $player=this.$getPlayerWithId(player.playerId);if(0!=$player.length){var coordinates=this.getFormationCoordinates(formationPosition,team.get("field"));if(!$player.data("is-first-eleven")){var $pitchField=this.$el.find('.pitch-field[data-field="{0}"]'.format(team.get("field")));$player.data("is-first-eleven",true).detach().appendTo($pitchField)}for(var coordinate in coordinates){$player.css(coordinate,coordinates[coordinate]+"%")}}},this),0)},getFormationCoordinates:function(position,field){var x=100*(position.vertical/11);var y=100*(position.horizontal/11);return"home"==field?{left:x,bottom:y,right:"auto",top:"auto"}:{left:"auto",bottom:"auto",right:x,top:y}},$positionBenchPlayer:function($player,field){setTimeout(_.bind(function(){field=field||$player.attr("data-field");var $subs=this.$el.find('.substitutes[data-field="{0}"]'.format(field));$player.data("is-first-eleven",false).detach();$subs.prepend($player)},this),0)},positionBenchPlayer:function(player){if(player.stats.ratings){var $player=this.$getPlayerWithId(player.playerId);this.$positionBenchPlayer($player,player.field)}},getPlayerSubOnMinuteInfo:function(player){var resultMinuteInfo=null;if(player.subbedInExpandedMinute){resultMinuteInfo=this.minuteInfos[player.subbedInExpandedMinute]}return resultMinuteInfo},getPlayerSubOffMinuteInfo:function(player){var resultMinuteInfo=null;if(player.subbedOutExpandedMinute){resultMinuteInfo=this.minuteInfos[player.subbedOutExpandedMinute]}return resultMinuteInfo},getPlayerKeyIncidents:function(team,player){var resultIncidents=[];var self=this;_.each(team.get("incidentEvents"),function(event){if(player.playerId==event.playerId&&self.minMinuteExpanded<=event.expandedMinute&&event.expandedMinute<=self.maxMinuteExpanded&&event.period.value!=5){var incidentEvent=_.extend({},event,{satisfiers:MatchCentreHelper.getKeyIncidentEventSatisfiers(event,self.eventTypeMappings)});resultIncidents.push(incidentEvent)}});return resultIncidents},setPlayerSubbedStatus:function(team,player){var $player=this.$el.find('[data-player-id="{0}"]'.format(player.playerId));if(0==$player.length)return;$player.removeAttr("data-is-subbed-off").removeAttr("data-subbed-in").removeAttr("data-has-key-incidents");var subOnMinuteInfo=this.getPlayerSubOnMinuteInfo(player);var subOffMinuteInfo=this.getPlayerSubOffMinuteInfo(player);if(subOnMinuteInfo){$player.attr("data-subbed-in",true).find('.timeline-event[data-type="19"]').attr("title",subOnMinuteInfo.minuteString)}if(subOffMinuteInfo){$player.attr("data-is-subbed-off",true).find('.timeline-event[data-type="18"]').attr(subOffMinuteInfo.minuteString)}},setPlayerKeyIncidents:function(team,player,$el){var playerKeyIncidents=this.getPlayerKeyIncidents(team,player);var $player=$el?$el:this.$el.find('[data-player-id="{0}"]'.format(player.playerId));if(0==$player.length)return;NG.renderDustTemplate("match-centre-stadium-events",{events:playerKeyIncidents,isManOfTheMatch:player.isManOfTheMatch},_.bind(function(data){$player.find(".player-key-incidents").html(data)},this))},setTeamInfo:function(team){var field=team.get("field");var $teamComparision=this.$el.find(".compared").filter('[data-mode="team"][data-field="{0}"]'.format(field));$teamComparision.find(".team-emblem img").attr("src",params.config.site.gImageUrl+"teams/"+team.get("teamId")+".png");$teamComparision.find(".manager-name").html(team.get("managerName"));$teamComparision.find(".average-age").html(team.get("averageAge"));var formation=team.getFormation(this.minMinuteExpanded,this.maxMinuteExpanded,this.maxExpandedLimit,this.model.get("statusCode"));if(formation){$teamComparision.find(".formation").html(formation.formationName)}},getPlayerShortName:function(fullName){var shortName=[];var fullNameItems=fullName.split(" ");for(var i=0;i<fullNameItems.length;i++){if(i!=fullNameItems.length-1){var firstChar=fullNameItems[i].split("");shortName.push(firstChar[0]+".")}else{shortName.push(fullNameItems[i])}}return shortName.join(" ")},setPlayerInfo:function(player){if(!player)return;var $playerComparision=this.$el.find(".compared").filter('[data-mode="player"][data-field="{0}"]'.format(player.field));$playerComparision.find(".player-avatar img").attr("src",params.config.site.gImageUrl+"players/"+player.playerId+".jpg");if(player.shirtNo){$playerComparision.find(".player-shirt-no").html("{0}.".format(player.shirtNo))}$playerComparision.find(".player-name").html(this.getPlayerShortName(player.name)).attr("href","/Players/{0}/Show/{1}".format(player.playerId,WSUrlHelper.GetSeoTextForPlayer(player.name)));$playerComparision.find(".player-height").html(player.height);$playerComparision.find(".player-weight").html(player.weight);$playerComparision.find(".player-age").html(player.age);$playerComparision.find(".player-position").html(WSLocalizer.dbRes("Positions",player.position));var team=this.model[player.field];this.setPlayerKeyIncidents(team,player,$playerComparision);this.selectedPlayers[player.field]=player}});return MatchCentreStadiumView});define("views/MatchCentreStatsView",["WS/WS.Localizer","backbone","views/BaseView","underscore"],function(WSLocalizer,Backbone,BaseView,_){var MatchCentreStatsView=BaseView.extend({el:"#match-centre-stats",template:"match-centre-stats",defaults:{selectedStat:"ratings",mode:"team",teamRatings:[]},events:{"click .match-centre-stat":"statSelected","click .toggle-stat-details":"toggleStatDetailsClicked","click .close-stat-details":"closeStatDetailsClicked","click .match-centre-sub-stat":"subStatSelected"},initialize:function(){this.model.set("teamStatGroups",this.statGroups,{silent:true});this.model.set("playerStatGroups",_.union(this.statGroups,this.gkStatGroups),{silent:true});this.$el.bind("refresh",_.bind(function(){this.refresh()},this))},refresh:function(){this.setMinuteRange();this.refreshStats()},setMinuteRange:function(){if(!this.maxMinute){this.minMinute=0;this.maxMinute=this.getMaxExpandedMinute()}},getMaxExpandedMinute:function(){return Math.max(this.model.get("minuteExpanded"),this.model.get("expandedMaxMinute"))},onRender:function(){this.$setStats();this.bindCustomEvents()},bindCustomEvents:function(){if(this.customEventsBound)return;this.$el.on("player-selected",_.bind(function(e,player,isSilent){if(!isSilent){this.mode="player"}this.playerSelected(player)},this));this.$el.on("match-centre-stat-changed",_.bind(function(e,statName){this.selectedStat=statName;this.calculateStats()},this));this.$el.on("minutes-range-changed-for-stats",_.bind(function(e,range){var range1=range[0];var range2=range[1];this.minMinute=Math.min(range1.expandedMinute,range2.expandedMinute);this.maxMinute=Math.max(range1.expandedMinute,range2.expandedMinute);if(this.model.get("expandedMaxMinute")==this.maxMinute){this.maxMinute=this.getMaxExpandedMinute()}},this));this.$el.on("team-mode-on",_.bind(function(){this.mode="team";this.ensureModeStatIsSelected()},this));this.customEventsBound=true},markStatAsSelected:function($stat){this.$el.find(".match-centre-stat").removeClass("selected");$stat.addClass("selected")},markSubStatAsSelect:function($subStat){this.$el.find(".match-centre-sub-stat").removeClass("selected");$subStat.addClass("selected")},statSelected:function(e){var $stat=$(e.currentTarget);var $originalTarget=$(e.target);var statFor=$stat.attr("data-for");if($originalTarget.is(".toggle-stat-details")){this.toggleStatDetails(statFor);return}if($stat.is(".match-centre-sub-stat")){this.markSubStatAsSelect($stat);return}if($stat.attr("data-showing-details")){return}this.closeStatDetails();this.markStatAsSelected($stat);$("#match-centre").attr("data-selected-stat",statFor);setTimeout(_.bind(function(){if(this.detailsAreShown){this.showStatDetails(statFor)}else{}},this),0)},subStatSelected:function(e){var $stat=$(e.currentTarget);var statFor=$stat.attr("data-for");this.updateTopPlayersForStat(statFor,true)},showStatDetails:function(statFor){if(this.detailsAreShown)return;var $stat=$(".match-centre-stat[data-for={0}]".format(statFor));$stat.attr("data-showing-details",true);$stat.find(".toggle-stat-details label").html(this.getLocalizedStatDisplayName("stats_info_less"));$stat.find(".toggle-stat-details .ui-icon").attr("class","ui-icon ui-icon-circle-arrow-n");this.$el.addClass("showing-stat-details");this.$el.find('[data-detail-for="{0}"]'.format(statFor)).addClass("visible");this.detailsAreShown=true},toggleStatDetailsClicked:function(e){var $toggleButton=$(e.currentTarget);var $stat=$toggleButton.parents(".match-centre-stat:first");var dataFor=$stat.attr("data-for");var isExpanded=$toggleButton.hasClass("is-expanded");if(!isExpanded){this.$el.find(".toggle-stat-details.is-expanded").removeClass("is-expanded");$toggleButton.addClass("is-expanded")}else{$toggleButton.removeClass("is-expanded")}this.markStatAsSelected($stat);this.toggleStatDetails(dataFor)},toggleStatDetails:function(statFor){if(this.detailsAreShown){this.closeStatDetails()}else{this.showStatDetails(statFor)}},closeStatDetailsClicked:function(){this.closeStatDetails()},closeStatDetails:function(e){if(!this.detailsAreShown)return;this.$el.removeClass("showing-stat-details");this.$el.find("[data-showing-details]").removeAttr("data-showing-details");this.$el.find(".match-centre-stat-details.visible").removeClass("visible");this.$el.find(".toggle-stat-details label").html(this.getLocalizedStatDisplayName("stats_info_more"));this.$el.find(".toggle-stat-details .ui-icon").attr("class","ui-icon ui-icon-circle-arrow-s");this.detailsAreShown=false},checkTeamPossessions:function(){var homeStats=this.model.home.get("stats");var awayStats=this.model.away.get("stats");var homePossessions=homeStats.possession;var awayPossessions=awayStats.possession;var minHomeMinute=_.first(_.keys(homePossessions));var minAwayMinute=_.first(_.keys(awayPossessions));var maxHomeMinute=_.last(_.keys(homePossessions));var maxAwayMinute=_.last(_.keys(awayPossessions));var minMinute=Math.max(minHomeMinute,minAwayMinute);var maxMinute=Math.max(maxHomeMinute,maxAwayMinute);var resultErrors=[];for(var i=minMinute;i<=maxMinute;i++){var homePossession=homePossessions[i];var awayPossession=awayPossessions[i];if(homePossession+awayPossession!=100){resultErrors.push({minute:i,home:homePossession,away:awayPossession,total:homePossession+awayPossession})}}},checkPossessions:function(){this.checkTeamPossessions()},refreshStats:function(){this.calculateStats();this.updateTeamStats();this.ensureSelectedPlayersExists();this.updatePlayerStats(this.selectedPlayers.home);this.updatePlayerStats(this.selectedPlayers.away);setTimeout(_.bind(function(){this.calculateTopPlayers();this.updateTopPlayers()},this),0)},ensureSelectedPlayersExists:function(){if(!this.selectedPlayers){this.selectedPlayers={home:this.model.home.getDefaultPlayer(),away:this.model.away.getDefaultPlayer()}}},calculateStats:function(){var stats={};stats=_.extend({},stats,this.calculatePlayerStatsForTeam(this.model.home));stats=_.extend({},stats,this.calculatePlayerStatsForTeam(this.model.away));setTimeout(_.bind(function(){this.$el.trigger("player-stats-updated-from-stats",[{name:this.selectedStat,values:stats}])},this),0)},updateTopPlayers:function(){setTimeout(_.bind(function(){if(!this.topPlayers)return;for(var statKey in this.topPlayers){this.updateTopPlayersForStat(statKey)}},this),0)},updateTopPlayersForStat:function(statKey,updateSubStat){NG.renderDustTemplate("match-centre-top-players",{players:this.topPlayers[statKey]},_.bind(function(data){var statIdentifier=statKey;if(updateSubStat){var $stat=this.$el.find('.match-centre-stat[data-for="{0}"]'.format(statKey));statIdentifier=$stat.parents("[data-detail-for]").attr("data-detail-for")}var $players=this.$el.find('[data-detail-for="{0}"] .top-players-for-stat'.format(statIdentifier));$players.each(function(){$(this).html(data)})},this))},calculateTopPlayers:function(){var topPlayers={};var players=_.union(this.model.home.get("players"),this.model.away.get("players"));_.each(this.statGroups,_.bind(function(stat){topPlayers[stat.key]=this.calculateTopPlayersForStat(stat.key,players);_.each(stat.stats,_.bind(function(subStat){topPlayers[subStat.key]=this.calculateTopPlayersForStat(subStat.key,players)},this))},this));this.topPlayers=topPlayers;return topPlayers},calculateTopPlayersForStat:function(statKey,players){var topPlayersForStat={};_.each(players,_.bind(function(player){var statsByMinute=player.stats[statKey];if(statsByMinute){topPlayersForStat[player.playerId]={playerId:player.playerId,field:player.field,name:player.name,position:player.position,teamName:"home"==player.field?this.model.home.get("name"):this.model.away.get("name"),teamId:"home"==player.field?this.model.home.get("teamId"):this.model.away.get("teamId"),value:this.getRangeValueForStat(player.stats,statKey)}}},this));return _.take(_.sortBy(topPlayersForStat,function(player){return-player.value+("ratings"==statKey?player.isManOfTheMatch?-1:0:0)}),5)},setMinutesWithStats:function(){this.minutesWithStats=_.extend({},_.invert(this.model.home.get("stats").minutesWithStats));this.minutesWithStats=_.extend(this.minutesWithStats,_.invert(this.model.away.get("stats").minutesWithStats));this.minutesWithStatsByKey={};this.setMinutesWithStatsByKeyForTeams();this.setMinutesWithStatsByKeyForPlayers()},setMinutesWithStatsByKeyForPlayers:function(){this.setMinutesWithStatsByKeyForPlayersOfTeam(this.model.home);this.setMinutesWithStatsByKeyForPlayersOfTeam(this.model.away)},setMinutesWithStatsByKeyForPlayersOfTeam:function(team){var players=team.get("players");var self=this;_.each(players,function(player){var playerStats=player.stats;if(playerStats){self.setMinutesWithStatsByKeyForStatCollection([playerStats])}})},setMinutesWithStatsByKeyForTeams:function(){var statCollection=[this.model.home.get("stats"),this.model.away.get("stats")];this.setMinutesWithStatsByKeyForStatCollection(statCollection)},setMinutesWithStatsByKeyForStatCollection:function(statCollection){var statKeys={};for(var c=0;c<statCollection.length;c++){statKeys=_.extend(statKeys,_.keys(statCollection[c]))}for(var i=0;i<Object.keys(statKeys).length;i++){var statKey=statKeys[i];if("minutesWithStats"==statKey){continue}this.minutesWithStatsByKey[statKey]={};for(var k=0;k<statCollection.length;k++){var statsForKey=statCollection[k][statKey];if(statsForKey){var minutes=_.keys(statsForKey);for(var h=0;h<Object.keys(minutes).length;h++){this.minutesWithStatsByKey[statKey][minutes[h]]=1}}}}},calculatePlayerStatsForTeam:function(team){var teamStats={};_.each(team.get("players"),_.bind(function(player){if(player.stats){var statValue=this.getRangeValueForStat(player.stats,this.selectedStat);if(statValue){teamStats[player.playerId]=statValue}}},this));return teamStats},playerSelected:function(player){this.ensureModeStatIsSelected();this.selectedPlayers[player.field]=player;this.updatePlayerStats(player);this.updateTopPlayers()},ensureModeStatIsSelected:function(){var $modeStat=this.$el.find('[data-mode="{0}"] .match-centre-stat [data-for="{1}"]',this.mode,this.selectedStat);if(0==$modeStat.length){$modeStat=this.$el.find('[data-mode="{0}"] .match-centre-stat',this.mode,this.selectedStat).first()}$modeStat.click();if(this.detailsAreShown){$modeStat.click()}},markGreaterStats:function(mode){var $stats=this.$el.find('.match-centre-stats[data-mode="{0}"] .match-centre-stat'.format(mode));var self=this;$stats.each(function(){var $stat=$(this);var $homeValue=$stat.find('.match-centre-stat-value[data-field="home"]');var $awayValue=$stat.find('.match-centre-stat-value[data-field="away"]');var homeValue=self.getStatValueFromElement($homeValue);var awayValue=self.getStatValueFromElement($awayValue);$homeValue.removeClass("greater");$awayValue.removeClass("greater");if(awayValue<homeValue){$homeValue.addClass("greater")}if(homeValue<awayValue){$awayValue.addClass("greater")}})},getStatValueFromElement:function($statValue){var value=$statValue.html();if(!isNaN(value)){return parseFloat(value)}return 0},updateTeamStats:function(){this.$el.find("[data-sum]").attr("data-sum",0);this.updateTeamStatsForTeam(this.model.home);this.updateTeamStatsForTeam(this.model.away);this.fixPossesionPercentages("team");this.markGreaterStats("team");this.broadCastTeamRatings()},fixPossesionPercentages:function(mode){var $possessions=this.$el.find('.match-centre-stats[data-mode="{0}"] .match-centre-stat[data-for="possession"]'.format(mode));var self=this;$possessions.each(function(){var $stat=$(this);var $homeValue=$stat.find('.match-centre-stat-value[data-field="home"]');var $awayValue=$stat.find('.match-centre-stat-value[data-field="away"]');var homeValue=self.getStatValueFromElement($homeValue);var awayValue=self.getStatValueFromElement($awayValue);$homeValue.removeClass("greater");$awayValue.removeClass("greater");if(awayValue<homeValue){$homeValue.addClass("greater")}if(homeValue<awayValue){$awayValue.addClass("greater")}})},broadCastTeamRatings:function(){this.$el.trigger("team-rating-changed-from-stats",[this.teamRatings])},updateTeamStatsForTeam:function(team){var stats=team.get("stats");var field=team.get("field");this.updateComparisionStats(stats,field,"team")},updatePlayerStats:function(player){this.updateComparisionStats(player.stats,player.field,"player");this.markGreaterStats("player")},$setStats:function(){if(!this.$stats){this.$stats={team:this.$el.find('.match-centre-stats[data-mode="team"] .match-centre-stat'),player:this.$el.find('.match-centre-stats[data-mode="player"] .match-centre-stat')}}},updateComparisionStats:function(stats,field,mode){if(!stats)return;this.resetStats(mode,field);var $stats=this.$stats[mode];var self=this;$stats.each(function(){var $stat=$(this);var sum=parseInt($stat.attr("data-sum"),10);sum=isNaN(sum)?0:sum;var statFor=$stat.attr("data-for");var $statForField=$stat.find("[data-field={0}]".format(field));var statValue=self.getRangeValueForStat(stats,statFor,2);if("ratings"==statFor&&"team"==mode){self.teamRatings[field]=statValue}$stat.attr("data-sum",sum+statValue);$statForField.html(statValue).attr("data-value",statValue)})},resetStats:function(mode,field){$('[data-mode="{0}"] [data-field="{1}"]'.format(mode,field)).html("")},getRangeValueForRatings:function(stats,precision){if(!stats)return null;var minRating=this.getClosestValueForMinuteForRating(stats,this.minMinute);var maxRating=this.getClosestValueForMinuteForRating(stats,this.maxMinute);if(minRating&&maxRating){var minValue=0==this.minMinute?6:minRating;var maxValue=maxRating;var difference=maxValue-minValue;var baseValue=_.find(_.values(stats),function(value){return 0!=value});if(baseValue){baseValue=6;precision=precision||1;var rating=Math.min(10,baseValue+difference);var roundedNumber=NG.roundNumberAsString(rating,precision);return 10!=roundedNumber?roundedNumber:10}}return null},getClosestValueForMinuteForRating:function(stats,minute){for(var i=minute;0<=i;i--){if(stats[i]){return stats[i]}}for(var j=minute;j<=this.maxMinute;j++){if(stats[j]){return stats[j]}}return null},getRangeValueForStat:function(stats,statKey,precision){if(!this.minutesWithStats){this.setMinutesWithStats();this.setMinuteRange()}if(this.customStatCalculations[statKey]){return _.bind(this.customStatCalculations[statKey],this)(stats,precision)}var statsForKey=stats[statKey];if(!statsForKey)return 0;var values=[];var isAverage=_.contains(this.averageStats,statKey);for(var i=this.minMinute;i<=this.maxMinute;i++){if(isAverage&&this.minutesWithStatsByKey[statKey][i]||!isAverage){var minuteStat=statsForKey[i];if(minuteStat){values.push(minuteStat)}else{values.push(0)}}}var rangeValue=_.reduce(values,function(memo,num){return memo+num},0);var resultValue=0;if(isAverage){var valuesLength=Object.keys(values).length;if(0!=valuesLength){rangeValue=rangeValue/parseFloat(valuesLength)}else{rangeValue=0}resultValue=NG.roundNumberAsString(rangeValue,1)}else{resultValue=NG.roundNumber(rangeValue,1)}return resultValue},getRangeValueForPossession:function(stats,statKey){if(!this.minutesWithStats){this.setMinutesWithStats();this.setMinuteRange()}var statsForKey=stats[statKey];if(!statsForKey)return 0;var values=[];for(var i=this.minMinute;i<=this.maxMinute;i++){var minuteStat=statsForKey[i];if(minuteStat){values.push(minuteStat)}else{values.push(0)}}var rangeValue=_.reduce(values,function(memo,num){return memo+num},0);var totalValue=this.getTotalRangeValueForPossession();var resultValue=0;if(0!=totalValue){resultValue=NG.roundNumber(rangeValue/totalValue*100,1)}return resultValue},getTotalRangeValueForPossession:function(){var possesionHome=this.model.get("home").stats.possession;var possesionAway=this.model.get("away").stats.possession;var values=[];for(var i=this.minMinute;i<=this.maxMinute;i++){var homeStat=possesionHome[i];if(homeStat){values.push(homeStat)}else{values.push(0)}var awayStat=possesionAway[i];if(awayStat){values.push(awayStat)}else{values.push(0)}}var rangeValue=_.reduce(values,function(memo,num){return memo+num},0);var resultValue=0;resultValue=NG.roundNumber(rangeValue,1);return resultValue},averageStats:["ratings","passSuccess","aerialSuccess","cornerAccuracy","throwInAccuracy","tackleSuccess"],customStatCalculations:{ratings:function(stats,precision){return this.getRangeValueForRatings(stats.ratings,precision)},dribbleSuccess:function(stats){var dribblesAttempted=this.getRangeValueForStat(stats,"dribblesAttempted");var dribblesWon=this.getRangeValueForStat(stats,"dribblesWon");return NG.getPercentage(dribblesWon,dribblesAttempted)},possession:function(stats){return this.getRangeValueForPossession(stats,"possession")},passSuccess:function(stats){var passesTotal=this.getRangeValueForStat(stats,"passesTotal");var passesAccurate=this.getRangeValueForStat(stats,"passesAccurate");return NG.getPercentage(passesAccurate,passesTotal)},aerialSuccess:function(stats){var aerialsTotal=this.getRangeValueForStat(stats,"aerialsTotal");var aerialsWon=this.getRangeValueForStat(stats,"aerialsWon");return NG.getPercentage(aerialsWon,aerialsTotal)},cornerAccuracy:function(stats){var cornersTotal=this.getRangeValueForStat(stats,"cornersTotal");var cornersAccurate=this.getRangeValueForStat(stats,"cornersAccurate");return NG.getPercentage(cornersAccurate,cornersTotal)},throwInAccuracy:function(stats){var throwInsTotal=this.getRangeValueForStat(stats,"throwInsTotal");var throwInsAccurate=this.getRangeValueForStat(stats,"throwInsAccurate");return NG.getPercentage(throwInsAccurate,throwInsTotal)},tackleSuccess:function(stats){var tacklesTotal=this.getRangeValueForStat(stats,"tacklesTotal");var tackleSuccessful=this.getRangeValueForStat(stats,"tackleSuccessful");return NG.getPercentage(tackleSuccessful,tacklesTotal)}},getLocalizedStatDisplayName:function(statLocalizationKey){return WSLocalizer.dbRes("MatchCentre",statLocalizationKey)},statGroups:[{displayName:"stats_clmn_rating",footNote:"",key:"ratings"},{displayName:"stats_clmn_shot_total",footNote:"",key:"shotsTotal",stats:[{displayName:"stats_clmn_shot_total",key:"shotsTotal"},{displayName:"stats_clmn_shot_post",key:"shotsOnPost"},{displayName:"stats_clmn_shot_on",key:"shotsOnTarget"},{displayName:"stats_clmn_shot_off",key:"shotsOffTarget"},{displayName:"stats_clmn_shot_block",key:"shotsBlocked"}]},{displayName:"stats_clmn_poss_perc",footNote:"",key:"possession",stats:[{displayName:"stats_clmn_poss_perc",key:"possession"},{displayName:"stats_clmn_touch",key:"touches"}]},{displayName:"stats_clmn_pass_succ",footNote:"stats_info_pass_succ",key:"passSuccess",isPercentage:true,stats:[{displayName:"stats_clmn_pass_succ",key:"passSuccess",isPercentage:true},{displayName:"stats_clmn_pass_total",key:"passesTotal"},{displayName:"stats_clmn_pass_acc",key:"passesAccurate"},{displayName:"stats_clmn_pass_key",key:"passesKey"}]},{displayName:"stats_clmn_dribble",footNote:"",key:"dribblesWon",stats:[{displayName:"stats_clmn_dribble_won",key:"dribblesWon"},{displayName:"stats_clmn_dribble_total",key:"dribblesAttempted"},{displayName:"stats_clmn_dribbled_past",key:"dribbledPast"},{displayName:"stats_clmn_dribble_succ",key:"dribbleSuccess",isPercentage:true}]},{displayName:"stats_clmn_aerial_won",footNote:"",key:"aerialsWon",stats:[{displayName:"stats_clmn_aerial_won",key:"aerialsWon"},{displayName:"stats_clmn_aerial_succ",key:"aerialSuccess",isPercentage:true},{displayName:"stats_clmn_aerial_offense",key:"offensiveAerials"},{displayName:"stats_clmn_aerial_defense",key:"defensiveAerials"}]},{displayName:"stats_clmn_tackle",footNote:"",key:"tackleSuccessful",stats:[{displayName:"stats_clmn_tackle_succ",key:"tackleSuccessful"},{displayName:"stats_clmn_tackle_total",key:"tacklesTotal"},{displayName:"stats_clmn_tackle_unsucces",key:"tackleUnsuccesful"},{displayName:"stats_clmn_tackle_perc",key:"tackleSuccess",isPercentage:true},{displayName:"stats_clmn_clear",key:"clearances"},{displayName:"stats_clmn_inter",key:"interceptions"}]},{displayName:"stats_clmn_corner",footNote:"",key:"cornersTotal",stats:[{displayName:"stats_clmn_corner",key:"cornersTotal"},{displayName:"stats_clmn_corner_accu",key:"cornerAccuracy",isPercentage:true}]},{displayName:"stats_clmn_dispossesed",footNote:"",key:"dispossessed",stats:[{displayName:"stats_clmn_dispossesed",key:"dispossessed"},{displayName:"stats_clmn_error",key:"errors"},{displayName:"stats_clmn_foul",key:"foulsCommited"},{displayName:"stats_clmn_offside",key:"offsidesCaught"}]}],gkStatGroups:[{displayName:"stats_clmn_saves",key:"totalSaves",stats:[{displayName:"stats_clmn_saves_total",key:"totalSaves"},{displayName:"stats_clmn_collected",key:"collected"},{displayName:"stats_clmn_parried_safe",key:"parriedSafe"},{displayName:"stats_clmn_parry_danger",key:"parriedDanger"},{displayName:"stats_clmn_goal_conc",key:"goalsConceded"}]},{displayName:"stats_clmn_claim",key:"claimsHigh"}]});return MatchCentreStatsView});define("lib/helpers/EventFilterHelper",["underscore"],function(_){var eventFilterz={init:function(eventTypes){this.eventTypes=eventTypes;this.invertedEventTypes=_.invert(eventTypes)},isSuccessful:function(event){return event.outcomeType&&1==event.outcomeType.value},isAnyOfTypes:function(event,typeIds){var resultSatisfied=false;var self=this;_.each(typeIds,function(typeId){resultSatisfied=resultSatisfied||self.isOfType(event,typeId)});return resultSatisfied},isOfType:function(event,typeId){if(!event.type)return false;return typeId==event.type.value},hasAnySatisfier:function(event,satisfierNames){var resultSatisfied=false;var self=this;_.each(satisfierNames,function(satisfierName){resultSatisfied=resultSatisfied||self.hasSatisfier(event,satisfierName)});return resultSatisfied},hasSatisfier:function(event,satisfierName){var self=this;if(!event.satisfiedEventsTypes)return false;return null!=_.find(event.satisfiedEventsTypes,function(satisfier){return satisfierName==self.invertedEventTypes[satisfier]})}};return{init:function(eventTypes){return eventFilterz.init(eventTypes)},getHelper:function(){return eventFilterz}}});define("commentaryCreator",["lib/helpers/EventFilterHelper","WS/WS.Localizer"],function(EventFilterHelper,WSLocalizer){var EventFilterz=EventFilterHelper.getHelper();var CommentaryCreator=function(playersList,formationsList){var players=playersList;var formations=formationsList;var qualifiersDictionary={1:{Name:"Long Ball",Category:"PassEvents"},2:{Name:"Cross",Category:"PassEvents"},3:{Name:"Headed",Category:"PassEvents"},4:{Name:"Through Ball",Category:"PassEvents"},5:{Name:"Free-kick",Category:"PassEvents"},6:{Name:"Corner",Category:"PassEvents"},8:{Name:"Goal disallowed",Category:"PassEvents"},106:{Name:"Attacking Pass",Category:"PassEvents"},107:{Name:"Throw-in",Category:"PassEvents"},155:{Name:"Off the ground",Category:"PassEvents"},156:{Name:"Lay-off",Category:"PassEvents"},241:{Name:"Indirect",Category:"PassEvents"},11113:{Name:"Key pass",Category:"PassEvents"},210:{Name:"Assist",Category:"AssistEvents"},15:{Name:"Head",Category:"BodyPart"},72:{Name:"Left footed",Category:"BodyPart"},20:{Name:"Right footed",Category:"BodyPart"},21:{Name:"Other body part",Category:"BodyPart"},22:{Name:"Open play",Category:"PatternOfPlay"},23:{Name:"Fast break",Category:"PatternOfPlay"},24:{Name:"Set piece",Category:"PatternOfPlay"},25:{Name:"From corner",Category:"PatternOfPlay"},26:{Name:"Free kick",Category:"PatternOfPlay"},160:{Name:"Throw-in set piece",Category:"PatternOfPlay"},9:{Name:"Penalty",Category:"ShotDescriptors"},28:{Name:"Own goal",Category:"ShotDescriptors"},214:{Name:"Big Chance",Category:"ShotDescriptors"},16:{Name:"6-yard box",Category:"PitchLocation"},17:{Name:"18-yard box",Category:"PitchLocation"},18:{Name:"Out of box",Category:"PitchLocation"},19:{Name:"Out of box",Category:"PitchLocation"},60:{Name:"6-yard box",Category:"PitchLocation"},61:{Name:"6-yard box",Category:"PitchLocation"},62:{Name:"18-yard box",Category:"PitchLocation"},63:{Name:"18-yard box",Category:"PitchLocation"},64:{Name:"18-yard box",Category:"PitchLocation"},65:{Name:"18-yard box",Category:"PitchLocation"},66:{Name:"Out of box",Category:"PitchLocation"},67:{Name:"Out of box",Category:"PitchLocation"},68:{Name:"Out of box",Category:"PitchLocation"},69:{Name:"Out of box",Category:"PitchLocation"},70:{Name:"Out of box",Category:"PitchLocation"},71:{Name:"Out of box",Category:"PitchLocation"},73:{Name:"To the left",Category:"GoalLocation"},74:{Name:"High",Category:"GoalLocation"},75:{Name:"To the right",Category:"GoalLocation"},76:{Name:"Low to the left",Category:"GoalLocation"},77:{Name:"High to the left",Category:"GoalLocation"},78:{Name:"Low to the centre",Category:"GoalLocation"},79:{Name:"High to the centre",Category:"GoalLocation"},80:{Name:"Low to the right",Category:"GoalLocation"},81:{Name:"High to the right",Category:"GoalLocation"},82:{Name:"Blocked",Category:"GoalLocation"},100:{Name:"Six yard blocked",Category:"GoalLocation"},101:{Name:"Saved off line",Category:"GoalLocation"},31:{Name:"Yellow Card",Category:"FoulReason"},32:{Name:"Second yellow",Category:"FoulReason"},33:{Name:"Red card",Category:"FoulReason"},242:{Name:"Obstruction",Category:"FoulReason"},264:{Name:"Aerial Foul",Category:"FoulReason"},190:{Name:"From shot off target",Category:"GKEvents"},88:{Name:"High",Category:"GKEvents"},91:{Name:"Dive and deflect",Category:"GKEvents"},92:{Name:"Catch",Category:"GKEvents"},93:{Name:"Dive and catch",Category:"GKEvents"},123:{Name:"Keeper Throw",Category:"GKEvents"},124:{Name:"Goal Kick",Category:"GKEvents"},173:{Name:"Parried safe",Category:"GKEvents"},174:{Name:"Parried into danger",Category:"GKEvents"},177:{Name:"Collected",Category:"GKEvents"},178:{Name:"Standing",Category:"GKEvents"},179:{Name:"Diving",Category:"GKEvents"},183:{Name:"Feet",Category:"GKEvents"},186:{Name:"Scored",Category:"GKEvents"},187:{Name:"Saved",Category:"GKEvents"},188:{Name:"Missed",Category:"GKEvents"},14:{Name:"Last line",Category:"DefensiveEvents"},169:{Name:"Leading to attempt",Category:"DefensiveEvents"},170:{Name:"Leading to goal",Category:"DefensiveEvents"},185:{Name:"Blocked cross",Category:"DefensiveEvents"},130:{Name:"Formation Name",Text:"formation",Category:"Formations",UseValue:true}};var getSentenceTemplate=function(event){if(!event.type)return"";var eventTypeId=event["type"].value;var periodId=event["period"]?event["period"].value:null;var outcome=event["outcomeType"]?event["outcomeType"].value:true;switch(eventTypeId){case 1:if(EventFilterz.hasSatisfier(event,"assist")){return WSLocalizer.dbRes("CommentarySentences","pass_assist")+" ({GKEvents}{BallTouchEvents}{PassEvents}{BodyPart}{PatternOfPlay})"}if(hasQualifier(event,2)){return WSLocalizer.dbRes("CommentarySentences","pass_cross")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{PassEvents}{BodyPart}{PatternOfPlay})"}return WSLocalizer.dbRes("CommentarySentences","pass")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{PassEvents}{BodyPart}{PatternOfPlay})";case 3:if(outcome==1){return WSLocalizer.dbRes("CommentarySentences","dribble_success")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})"}else return WSLocalizer.dbRes("CommentarySentences","dribble_unsuccess")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";case 4:return WSLocalizer.dbRes("CommentarySentences","foul")+" ({FoulReason})";case 6:if(outcome==1)return WSLocalizer.dbRes("CommentarySentences","corner_won")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";else return null;case 7:if(outcome==1)return WSLocalizer.dbRes("CommentarySentences","tackle_won")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";else return WSLocalizer.dbRes("CommentarySentences","tackle_lost")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";case 8:return WSLocalizer.dbRes("CommentarySentences","interception")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";case 10:if(hasQualifier(event,94)){return WSLocalizer.dbRes("CommentarySentences","block_shot")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})"}return WSLocalizer.dbRes("CommentarySentences","save")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";case 11:return WSLocalizer.dbRes("CommentarySentences","claim")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";case 12:return WSLocalizer.dbRes("CommentarySentences","clearance")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";case 13:return WSLocalizer.dbRes("CommentarySentences","shot_miss")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";case 14:return WSLocalizer.dbRes("CommentarySentences","shot_woodwork")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";case 15:if(hasQualifier(event,82)){return WSLocalizer.dbRes("CommentarySentences","shot_blocked")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})"}else return WSLocalizer.dbRes("CommentarySentences","shot_saved")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay}) {RelatedPlayer}";case 16:if(hasQualifier(event,28)){return WSLocalizer.dbRes("CommentarySentences","own_goal")+" {RelatedPlayer} ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{PassEvents}{BodyPart}{PatternOfPlay})"}return WSLocalizer.dbRes("CommentarySentences","goal")+" {RelatedPlayer} ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";case 17:if(hasQualifier(event,31)){return WSLocalizer.dbRes("CommentarySentences","yellow_card")}if(hasQualifier(event,33)){return WSLocalizer.dbRes("CommentarySentences","red_card")}if(hasQualifier(event,32)){return WSLocalizer.dbRes("CommentarySentences","second_yellow")}case 18:return WSLocalizer.dbRes("CommentarySentences","sub_off");case 19:return WSLocalizer.dbRes("CommentarySentences","sub_on");case 30:if(1==periodId)return WSLocalizer.dbRes("CommentarySentences","first_half_end");if(2==periodId)return WSLocalizer.dbRes("CommentarySentences","second_half_end");if(3==periodId)return WSLocalizer.dbRes("CommentarySentences","first_half_extra_end");if(4==periodId)return WSLocalizer.dbRes("CommentarySentences","second_half_extra_end");if(5==periodId)return WSLocalizer.dbRes("CommentarySentences","pen_shootout_end");case 32:if(1==periodId)return WSLocalizer.dbRes("CommentarySentences","first_half_begin");if(2==periodId)return WSLocalizer.dbRes("CommentarySentences","second_half_begin");if(3==periodId)return WSLocalizer.dbRes("CommentarySentences","first_half_extra_begin");if(4==periodId)return WSLocalizer.dbRes("CommentarySentences","second_half_extra_begin");if(5==periodId)return WSLocalizer.dbRes("CommentarySentences","pen_shootout_begin");case 34:return WSLocalizer.dbRes("CommentarySentences","formation_set")+" {Formations}";case 40:return WSLocalizer.dbRes("CommentarySentences","formation_change")+" {Formations}";case 41:return WSLocalizer.dbRes("CommentarySentences","punch")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay}){RelatedPlayer}";case 44:if(outcome==1){return WSLocalizer.dbRes("CommentarySentences","aerial_duel_won")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{FoulReason}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})"}else if(outcome==0){return WSLocalizer.dbRes("CommentarySentences","aerial_duel_lost")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{FoulReason}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})"}case 45:return WSLocalizer.dbRes("CommentarySentences","is_dribbled_past");case 50:return WSLocalizer.dbRes("CommentarySentences","dispossessed");case 51:return WSLocalizer.dbRes("CommentarySentences","error")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay}){RelatedPlayer}";case 61:if(outcome==0){return WSLocalizer.dbRes("CommentarySentences","unsuccess_touch")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{FoulReason}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})"}case 1e4:return WSLocalizer.dbRes("CommentarySentences","offside");case 74:return WSLocalizer.dbRes("CommentarySentences","block_pass")+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{FoulReason}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})";default:if(event.type.displayName!=undefined)return"{PlayerName} "+event.type.displayName+" ({DefensiveEvents}{GKEvents}{BallTouchEvents}{FoulReason}{GoalLocation}{PitchLocation}{ShotDescriptors}{PassEvents}{BodyPart}{PatternOfPlay})"}return null};var transformTemplateToSentence=function(sentenceTemplate,event,events){if(sentenceTemplate!=null){var result;var dustContext=createDustContext(event);var compiled=dust.compile(sentenceTemplate,"test");dust.loadSource(compiled);dust.render("test",dustContext,function(err,out){result=out});result=result.replace("()","");result=result.replace(", )",")");return result}return""};var relatedEventSentenceTemplates={16:WSLocalizer.dbRes("CommentarySentences","related_assist")};var createDustContext=function(event){var context={};var qualifiers=event.qualifiers;for(var i=0;i<qualifiers.length;i++){var qualifier=qualifiers[i];if(qualifier.type){var item=qualifiersDictionary[qualifier["type"].value];if(item!=undefined){var category=item["Category"];var currentContext=context[category]||"";if(!item.UseValue){context[category]=currentContext.concat(WSLocalizer.dbRes("CommentaryQualifiers",qualifier.type.value.toString())+", ")}else{var qualifierValue=getQualifierValue(qualifier,category);context[category]=currentContext.concat((""!=currentContext?", ":" ")+qualifierValue+"")}}}}context["PlayerName"]=getPlayerName(event.playerId);if(event.relatedPlayerId){var relatedEventSentenceTemplate=relatedEventSentenceTemplates[event.type.value];if(relatedEventSentenceTemplate){var relatedPlayerName=getPlayerName(event.relatedPlayerId);context["RelatedPlayer"]=relatedEventSentenceTemplate.format(relatedPlayerName)}}return context};var getQualifierValue=function(qualifier,category){return"Formations"==category?getFormationName(qualifier.value):qualifier.value};var hasQualifier=function(event,qualifierId){var qualifiers=event.qualifiers;for(var i=0;i<qualifiers.length;i++){var qualifier=qualifiers[i];if(qualifier["type"].value==qualifierId)return true}return false};var getPlayerName=function(playerId){return players[playerId]};var getFormationName=function(formationId){return formations[formationId]};var createSentence=function(event,events){var sentenceTemplate=getSentenceTemplate(event);return transformTemplateToSentence(sentenceTemplate,event,events)};var setPlayers=function(playerList){players=playerList};return{getSentence:createSentence,setPlayers:setPlayers}};return CommentaryCreator});define("lib/helpers/TimelineHelper",[],function(){return{rangeFormatter(){return{from:function(value){return value},to:function(value){return parseInt(Math.round(value))}}},tooltipFormatter(minutes){return{from:function(value){return value},to:function(value){var processed=parseInt(Math.round(value));return minutes[processed]?minutes[processed].minuteString:processed}}},setupMinutes:function(query,minutes){var firstPeriod=Object.values(minutes.expandedMinutes[1]);var secondPeriod=Object.entries(minutes.expandedMinutes[2]);var maxFirstPeriod=Object.values(minutes.expandedMinutes[2])[0];var minutesContainer=document.querySelector(query);firstPeriod.forEach(function(minute){if((minute%5===1||minute===0)&&minute!==1&&minute+4<=maxFirstPeriod){var div=document.createElement("div");div.style.left=(minute/minutes.expandedMaxMinute*100).toString()+"%";minutesContainer.appendChild(div)}});secondPeriod.forEach(function(minute,index){if(minute[0]==45){var div=document.createElement("div");div.dataset["text"]="HT";div.style.left=(minute[1]/minutes.expandedMaxMinute*100).toString()+"%";minutesContainer.appendChild(div);return}if(minute[0]%5===0&&minute[1]+4<=minutes.expandedMaxMinute){var div=document.createElement("div");div.style.left=(minute[1]/minutes.expandedMaxMinute*100).toString()+"%";minutesContainer.appendChild(div);return}if(index===secondPeriod.length-1){var div=document.createElement("div");div.style.left=(minute[1]/minutes.expandedMaxMinute*100).toString()+"%";div.dataset["text"]="FT";minutesContainer.appendChild(div)}})}}});!function(t){"function"==typeof define&&define.amd?define("vendor/nouislider",[],t):"object"==typeof exports?module.exports=t():window.noUiSlider=t()}(function(){"use strict";var lt="14.1.1";function ut(t){t.parentElement.removeChild(t)}function s(t){return null!=t}function ct(t){t.preventDefault()}function i(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function pt(t,e,r){0<r&&(ht(t,e),setTimeout(function(){mt(t,e)},r))}function ft(t){return Math.max(Math.min(t,100),0)}function dt(t){return Array.isArray(t)?t:[t]}function e(t){var e=(t=String(t)).split(".");return 1<e.length?e[1].length:0}function ht(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function mt(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function gt(t){var e=void 0!==window.pageXOffset,r="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:r?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:r?t.documentElement.scrollTop:t.body.scrollTop}}function c(t,e){return 100/(e-t)}function p(t,e){return 100*e/(t[1]-t[0])}function f(t,e){for(var r=1;t>=e[r];)r+=1;return r}function r(t,e,r){if(r>=t.slice(-1)[0])return 100;var n,i,o=f(r,t),a=t[o-1],s=t[o],l=e[o-1],u=e[o];return l+(i=r,p(n=[a,s],n[0]<0?i+Math.abs(n[0]):i-n[0])/c(l,u))}function n(t,e,r,n){if(100===n)return n;var i,o,a=f(n,t),s=t[a-1],l=t[a];return r?(l-s)/2<n-s?l:s:e[a-1]?t[a-1]+(i=n-t[a-1],o=e[a-1],Math.round(i/o)*o):n}function o(t,e,r){var n;if("number"==typeof e&&(e=[e]),!Array.isArray(e))throw new Error("noUiSlider ("+lt+"): 'range' contains invalid value.");if(!i(n="min"===t?0:"max"===t?100:parseFloat(t))||!i(e[0]))throw new Error("noUiSlider ("+lt+"): 'range' value isn't numeric.");r.xPct.push(n),r.xVal.push(e[0]),n?r.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(r.xSteps[0]=e[1]),r.xHighestCompleteStep.push(0)}function a(t,e,r){if(e)if(r.xVal[t]!==r.xVal[t+1]){r.xSteps[t]=p([r.xVal[t],r.xVal[t+1]],e)/c(r.xPct[t],r.xPct[t+1]);var n=(r.xVal[t+1]-r.xVal[t])/r.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),o=r.xVal[t]+r.xNumSteps[t]*i;r.xHighestCompleteStep[t]=o}else r.xSteps[t]=r.xHighestCompleteStep[t]=r.xVal[t]}function l(t,e,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var i=[];for(n in t)t.hasOwnProperty(n)&&i.push([t[n],n]);for(i.length&&"object"==typeof i[0][0]?i.sort(function(t,e){return t[0][0]-e[0][0]}):i.sort(function(t,e){return t[0]-e[0]}),n=0;n<i.length;n++)o(i[n][1],i[n][0],this);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)a(n,this.xNumSteps[n],this)}l.prototype.getMargin=function(t){var e=this.xNumSteps[0];if(e&&t/e%1!=0)throw new Error("noUiSlider ("+lt+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&p(this.xVal,t)},l.prototype.toStepping=function(t){return t=r(this.xVal,this.xPct,t)},l.prototype.fromStepping=function(t){return function(t,e,r){if(100<=r)return t.slice(-1)[0];var n,i=f(r,e),o=t[i-1],a=t[i],s=e[i-1],l=e[i];return n=[o,a],(r-s)*c(s,l)*(n[1]-n[0])/100+n[0]}(this.xVal,this.xPct,t)},l.prototype.getStep=function(t){return t=n(this.xPct,this.xSteps,this.snap,t)},l.prototype.getDefaultStep=function(t,e,r){var n=f(t,this.xPct);return(100===t||e&&t===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/r},l.prototype.getNearbySteps=function(t){var e=f(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},l.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(e);return Math.max.apply(null,t)},l.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var u={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};function d(t){if("object"==typeof(e=t)&&"function"==typeof e.to&&"function"==typeof e.from)return!0;var e;throw new Error("noUiSlider ("+lt+"): 'format' requires 'to' and 'from' methods.")}function h(t,e){if(!i(e))throw new Error("noUiSlider ("+lt+"): 'step' is not numeric.");t.singleStep=e}function m(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider ("+lt+"): 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider ("+lt+"): Missing 'min' or 'max' in 'range'.");if(e.min===e.max)throw new Error("noUiSlider ("+lt+"): 'range' 'min' and 'max' cannot be equal.");t.spectrum=new l(e,t.snap,t.singleStep)}function g(t,e){if(e=dt(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider ("+lt+"): 'start' option is incorrect.");t.handles=e.length,t.start=e}function v(t,e){if("boolean"!=typeof(t.snap=e))throw new Error("noUiSlider ("+lt+"): 'snap' option must be a boolean.")}function b(t,e){if("boolean"!=typeof(t.animate=e))throw new Error("noUiSlider ("+lt+"): 'animate' option must be a boolean.")}function S(t,e){if("number"!=typeof(t.animationDuration=e))throw new Error("noUiSlider ("+lt+"): 'animationDuration' option must be a number.")}function x(t,e){var r,n=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(r=1;r<t.handles;r++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider ("+lt+"): 'connect' option doesn't match handle count.");n=e}t.connect=n}function w(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider ("+lt+"): 'orientation' option is invalid.")}}function y(t,e){if(!i(e))throw new Error("noUiSlider ("+lt+"): 'margin' option must be numeric.");if(0!==e&&(t.margin=t.spectrum.getMargin(e),!t.margin))throw new Error("noUiSlider ("+lt+"): 'margin' option is only supported on linear sliders.")}function E(t,e){if(!i(e))throw new Error("noUiSlider ("+lt+"): 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit||t.handles<2)throw new Error("noUiSlider ("+lt+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function C(t,e){if(!i(e)&&!Array.isArray(e))throw new Error("noUiSlider ("+lt+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&2!==e.length&&!i(e[0])&&!i(e[1]))throw new Error("noUiSlider ("+lt+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==e){if(Array.isArray(e)||(e=[e,e]),!(t.padding=[t.spectrum.getMargin(e[0]),t.spectrum.getMargin(e[1])])===t.padding[0]||!1===t.padding[1])throw new Error("noUiSlider ("+lt+"): 'padding' option is only supported on linear sliders.");if(t.padding[0]<0||t.padding[1]<0)throw new Error("noUiSlider ("+lt+"): 'padding' option must be a positive number(s).");if(100<t.padding[0]+t.padding[1])throw new Error("noUiSlider ("+lt+"): 'padding' option must not exceed 100% of the range.")}}function N(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider ("+lt+"): 'direction' option was not recognized.")}}function U(t,e){if("string"!=typeof e)throw new Error("noUiSlider ("+lt+"): 'behaviour' must be a string containing options.");var r=0<=e.indexOf("tap"),n=0<=e.indexOf("drag"),i=0<=e.indexOf("fixed"),o=0<=e.indexOf("snap"),a=0<=e.indexOf("hover"),s=0<=e.indexOf("unconstrained");if(i){if(2!==t.handles)throw new Error("noUiSlider ("+lt+"): 'fixed' behaviour must be used with 2 handles");y(t,t.start[1]-t.start[0])}if(s&&(t.margin||t.limit))throw new Error("noUiSlider ("+lt+"): 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:r||o,drag:n,fixed:i,snap:o,hover:a,unconstrained:s}}function P(t,e){if(!1!==e)if(!0===e){t.tooltips=[];for(var r=0;r<t.handles;r++)t.tooltips.push(!0)}else{if(t.tooltips=dt(e),t.tooltips.length!==t.handles)throw new Error("noUiSlider ("+lt+"): must pass a formatter for all handles.");t.tooltips.forEach(function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider ("+lt+"): 'tooltips' must be passed a formatter or 'false'.")})}}function V(t,e){d(t.ariaFormat=e)}function k(t,e){d(t.format=e)}function A(t,e){if("boolean"!=typeof(t.keyboardSupport=e))throw new Error("noUiSlider ("+lt+"): 'keyboardSupport' option must be a boolean.")}function M(t,e){t.documentElement=e}function O(t,e){if("string"!=typeof e&&!1!==e)throw new Error("noUiSlider ("+lt+"): 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function L(t,e){if("object"!=typeof e)throw new Error("noUiSlider ("+lt+"): 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix)for(var r in t.cssClasses={},e)e.hasOwnProperty(r)&&(t.cssClasses[r]=t.cssPrefix+e[r]);else t.cssClasses=e}function vt(e){var r={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:u,format:u},n={step:{r:!1,t:h},start:{r:!0,t:g},connect:{r:!0,t:x},direction:{r:!0,t:N},snap:{r:!1,t:v},animate:{r:!1,t:b},animationDuration:{r:!1,t:S},range:{r:!0,t:m},orientation:{r:!1,t:w},margin:{r:!1,t:y},limit:{r:!1,t:E},padding:{r:!1,t:C},behaviour:{r:!0,t:U},ariaFormat:{r:!1,t:V},format:{r:!1,t:k},tooltips:{r:!1,t:P},keyboardSupport:{r:!0,t:A},documentElement:{r:!1,t:M},cssPrefix:{r:!0,t:O},cssClasses:{r:!0,t:L}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(n).forEach(function(t){if(!s(e[t])&&void 0===i[t]){if(n[t].r)throw new Error("noUiSlider ("+lt+"): '"+t+"' is required.");return!0}n[t].t(r,s(e[t])?e[t]:i[t])}),r.pips=e.pips;var t=document.createElement("div"),o=void 0!==t.style.msTransform,a=void 0!==t.style.transform;r.transformRule=a?"transform":o?"msTransform":"webkitTransform";return r.style=[["left","top"],["right","bottom"]][r.dir][r.ort],r}function D(t,v,o){var l,u,a,c,i,s,e,p,f=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},d=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),h=t,y=v.spectrum,b=[],S=[],m=[],g=0,x={},w=t.ownerDocument,E=v.documentElement||w.documentElement,C=w.body,N=-1,U=0,P=1,V=2,k="rtl"===w.dir||1===v.ort?0:100;function A(t,e){var r=w.createElement("div");return e&&ht(r,e),t.appendChild(r),r}function M(t,e){var r=A(t,v.cssClasses.origin),n=A(r,v.cssClasses.handle);return A(n,v.cssClasses.touchArea),n.setAttribute("data-handle",e),v.keyboardSupport&&(n.setAttribute("tabindex","0"),n.addEventListener("keydown",function(t){return function(t,e){if(L()||D(e))return!1;var r=["Left","Right"],n=["Down","Up"],i=["PageDown","PageUp"],o=["Home","End"];v.dir&&!v.ort?r.reverse():v.ort&&!v.dir&&(n.reverse(),i.reverse());var a,s=t.key.replace("Arrow",""),l=s===i[0],u=s===i[1],c=s===n[0]||s===r[0]||l,p=s===n[1]||s===r[1]||u,f=s===o[0],d=s===o[1];if(!(c||p||f||d))return!0;if(t.preventDefault(),p||c){var h=c?0:1,m=st(e),g=m[h];if(null===g)return!1;!1===g&&(g=y.getDefaultStep(S[e],c,10)),(u||l)&&(g*=5),g=Math.max(g,1e-7),g*=c?-1:1,a=b[e]+g}else a=d?v.spectrum.xVal[v.spectrum.xVal.length-1]:v.spectrum.xVal[0];return rt(e,y.toStepping(a),!0,!0),J("slide",e),J("update",e),J("change",e),J("set",e),!1}(t,e)})),n.setAttribute("role","slider"),n.setAttribute("aria-orientation",v.ort?"vertical":"horizontal"),0===e?ht(n,v.cssClasses.handleLower):e===v.handles-1&&ht(n,v.cssClasses.handleUpper),r}function O(t,e){return!!e&&A(t,v.cssClasses.connect)}function r(t,e){return!!v.tooltips[e]&&A(t.firstChild,v.cssClasses.tooltip)}function L(){return h.hasAttribute("disabled")}function D(t){return u[t].hasAttribute("disabled")}function z(){i&&(G("update.tooltips"),i.forEach(function(t){t&&ut(t)}),i=null)}function H(){z(),i=u.map(r),$("update.tooltips",function(t,e,r){if(i[e]){var n=t[e];!0!==v.tooltips[e]&&(n=v.tooltips[e].to(r[e])),i[e].innerHTML=n}})}function j(e,i,o){var a=w.createElement("div"),s=[];s[U]=v.cssClasses.valueNormal,s[P]=v.cssClasses.valueLarge,s[V]=v.cssClasses.valueSub;var l=[];l[U]=v.cssClasses.markerNormal,l[P]=v.cssClasses.markerLarge,l[V]=v.cssClasses.markerSub;var u=[v.cssClasses.valueHorizontal,v.cssClasses.valueVertical],c=[v.cssClasses.markerHorizontal,v.cssClasses.markerVertical];function p(t,e){var r=e===v.cssClasses.value,n=r?s:l;return e+" "+(r?u:c)[v.ort]+" "+n[t]}return ht(a,v.cssClasses.pips),ht(a,0===v.ort?v.cssClasses.pipsHorizontal:v.cssClasses.pipsVertical),Object.keys(e).forEach(function(t){!function(t,e,r){if((r=i?i(e,r):r)!==N){var n=A(a,!1);n.className=p(r,v.cssClasses.marker),n.style[v.style]=t+"%",U<r&&((n=A(a,!1)).className=p(r,v.cssClasses.value),n.setAttribute("data-value",e),n.style[v.style]=t+"%",n.innerHTML=o.to(e))}}(t,e[t][0],e[t][1])}),a}function F(){c&&(ut(c),c=null)}function R(t){F();var m,g,v,b,e,r,S,x,w,n=t.mode,i=t.density||1,o=t.filter||!1,a=function(t,e,r){if("range"===t||"steps"===t)return y.xVal;if("count"===t){if(e<2)throw new Error("noUiSlider ("+lt+"): 'values' (>= 2) required for mode 'count'.");var n=e-1,i=100/n;for(e=[];n--;)e[n]=n*i;e.push(100),t="positions"}return"positions"===t?e.map(function(t){return y.fromStepping(r?y.getStep(t):t)}):"values"===t?r?e.map(function(t){return y.fromStepping(y.getStep(y.toStepping(t)))}):e:void 0}(n,t.values||!1,t.stepped||!1),s=(m=i,g=n,v=a,b={},e=y.xVal[0],r=y.xVal[y.xVal.length-1],x=S=!1,w=0,(v=v.slice().sort(function(t,e){return t-e}).filter(function(t){return!this[t]&&(this[t]=!0)},{}))[0]!==e&&(v.unshift(e),S=!0),v[v.length-1]!==r&&(v.push(r),x=!0),v.forEach(function(t,e){var r,n,i,o,a,s,l,u,c,p,f=t,d=v[e+1],h="steps"===g;if(h&&(r=y.xNumSteps[e]),r||(r=d-f),!1!==f&&void 0!==d)for(r=Math.max(r,1e-7),n=f;n<=d;n=(n+r).toFixed(7)/1){for(u=(a=(o=y.toStepping(n))-w)/m,p=a/(c=Math.round(u)),i=1;i<=c;i+=1)b[(s=w+i*p).toFixed(5)]=[y.fromStepping(s),0];l=-1<v.indexOf(n)?P:h?V:U,!e&&S&&(l=0),n===d&&x||(b[o.toFixed(5)]=[n,l]),w=o}}),b),l=t.format||{to:Math.round};return c=h.appendChild(j(s,o,l))}function T(){var t=l.getBoundingClientRect(),e="offset"+["Width","Height"][v.ort];return 0===v.ort?t.width||l[e]:t.height||l[e]}function B(n,i,o,a){var e=function(t){return!!(t=function(t,e,r){var n,i,o=0===t.type.indexOf("touch"),a=0===t.type.indexOf("mouse"),s=0===t.type.indexOf("pointer");0===t.type.indexOf("MSPointer")&&(s=!0);if(o){var l=function(t){return t.target===r||r.contains(t.target)};if("touchstart"===t.type){var u=Array.prototype.filter.call(t.touches,l);if(1<u.length)return!1;n=u[0].pageX,i=u[0].pageY}else{var c=Array.prototype.find.call(t.changedTouches,l);if(!c)return!1;n=c.pageX,i=c.pageY}}e=e||gt(w),(a||s)&&(n=t.clientX+e.x,i=t.clientY+e.y);return t.pageOffset=e,t.points=[n,i],t.cursor=a||s,t}(t,a.pageOffset,a.target||i))&&(!(L()&&!a.doNotReject)&&(e=h,r=v.cssClasses.tap,!((e.classList?e.classList.contains(r):new RegExp("\\b"+r+"\\b").test(e.className))&&!a.doNotReject)&&(!(n===f.start&&void 0!==t.buttons&&1<t.buttons)&&((!a.hover||!t.buttons)&&(d||t.preventDefault(),t.calcPoint=t.points[v.ort],void o(t,a))))));var e,r},r=[];return n.split(" ").forEach(function(t){i.addEventListener(t,e,!!d&&{passive:!0}),r.push([t,e])}),r}function q(t){var e,r,n,i,o,a,s=100*(t-(e=l,r=v.ort,n=e.getBoundingClientRect(),i=e.ownerDocument,o=i.documentElement,a=gt(i),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(a.x=0),r?n.top+a.y-o.clientTop:n.left+a.x-o.clientLeft))/T();return s=ft(s),v.dir?100-s:s}function X(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&_(t,e)}function Y(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return _(t,e);var r=(v.dir?-1:1)*(t.calcPoint-e.startCalcPoint);Z(0<r,100*r/e.baseSize,e.locations,e.handleNumbers)}function _(t,e){e.handle&&(mt(e.handle,v.cssClasses.active),g-=1),e.listeners.forEach(function(t){E.removeEventListener(t[0],t[1])}),0===g&&(mt(h,v.cssClasses.drag),et(),t.cursor&&(C.style.cursor="",C.removeEventListener("selectstart",ct))),e.handleNumbers.forEach(function(t){J("change",t),J("set",t),J("end",t)})}function I(t,e){if(e.handleNumbers.some(D))return!1;var r;1===e.handleNumbers.length&&(r=u[e.handleNumbers[0]].children[0],g+=1,ht(r,v.cssClasses.active));t.stopPropagation();var n=[],i=B(f.move,E,Y,{target:t.target,handle:r,listeners:n,startCalcPoint:t.calcPoint,baseSize:T(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:S.slice()}),o=B(f.end,E,_,{target:t.target,handle:r,listeners:n,doNotReject:!0,handleNumbers:e.handleNumbers}),a=B("mouseout",E,X,{target:t.target,handle:r,listeners:n,doNotReject:!0,handleNumbers:e.handleNumbers});n.push.apply(n,i.concat(o,a)),t.cursor&&(C.style.cursor=getComputedStyle(t.target).cursor,1<u.length&&ht(h,v.cssClasses.drag),C.addEventListener("selectstart",ct,!1)),e.handleNumbers.forEach(function(t){J("start",t)})}function n(t){t.stopPropagation();var i,o,a,e=q(t.calcPoint),r=(i=e,a=!(o=100),u.forEach(function(t,e){if(!D(e)){var r=S[e],n=Math.abs(r-i);(n<o||n<=o&&r<i||100===n&&100===o)&&(a=e,o=n)}}),a);if(!1===r)return!1;v.events.snap||pt(h,v.cssClasses.tap,v.animationDuration),rt(r,e,!0,!0),et(),J("slide",r,!0),J("update",r,!0),J("change",r,!0),J("set",r,!0),v.events.snap&&I(t,{handleNumbers:[r]})}function W(t){var e=q(t.calcPoint),r=y.getStep(e),n=y.fromStepping(r);Object.keys(x).forEach(function(t){"hover"===t.split(".")[0]&&x[t].forEach(function(t){t.call(s,n)})})}function $(t,e){x[t]=x[t]||[],x[t].push(e),"update"===t.split(".")[0]&&u.forEach(function(t,e){J("update",e)})}function G(t){var n=t&&t.split(".")[0],i=n&&t.substring(n.length);Object.keys(x).forEach(function(t){var e=t.split(".")[0],r=t.substring(e.length);n&&n!==e||i&&i!==r||delete x[t]})}function J(r,n,i){Object.keys(x).forEach(function(t){var e=t.split(".")[0];r===e&&x[t].forEach(function(t){t.call(s,b.map(v.format.to),n,b.slice(),i||!1,S.slice())})})}function K(t,e,r,n,i,o){return 1<u.length&&!v.events.unconstrained&&(n&&0<e&&(r=Math.max(r,t[e-1]+v.margin)),i&&e<u.length-1&&(r=Math.min(r,t[e+1]-v.margin))),1<u.length&&v.limit&&(n&&0<e&&(r=Math.min(r,t[e-1]+v.limit)),i&&e<u.length-1&&(r=Math.max(r,t[e+1]-v.limit))),v.padding&&(0===e&&(r=Math.max(r,v.padding[0])),e===u.length-1&&(r=Math.min(r,100-v.padding[1]))),!((r=ft(r=y.getStep(r)))===t[e]&&!o)&&r}function Q(t,e){var r=v.ort;return(r?e:t)+", "+(r?t:e)}function Z(t,n,r,e){var i=r.slice(),o=[!t,t],a=[t,!t];e=e.slice(),t&&e.reverse(),1<e.length?e.forEach(function(t,e){var r=K(i,t,i[t]+n,o[e],a[e],!1);!1===r?n=0:(n=r-i[t],i[t]=r)}):o=a=[!0];var s=!1;e.forEach(function(t,e){s=rt(t,r[t]+n,o[e],a[e])||s}),s&&e.forEach(function(t){J("update",t),J("slide",t)})}function tt(t,e){return v.dir?100-t-e:t}function et(){m.forEach(function(t){var e=50<S[t]?-1:1,r=3+(u.length+e*t);u[t].style.zIndex=r})}function rt(t,e,r,n){return!1!==(e=K(S,t,e,r,n,!1))&&(function(t,e){S[t]=e,b[t]=y.fromStepping(e);var r="translate("+Q(10*(tt(e,0)-k)+"%","0")+")";u[t].style[v.transformRule]=r,nt(t),nt(t+1)}(t,e),!0)}function nt(t){if(a[t]){var e=0,r=100;0!==t&&(e=S[t-1]),t!==a.length-1&&(r=S[t]);var n=r-e,i="translate("+Q(tt(e,n)+"%","0")+")",o="scale("+Q(n/100,"1")+")";a[t].style[v.transformRule]=i+" "+o}}function it(t,e){return null===t||!1===t||void 0===t?S[e]:("number"==typeof t&&(t=String(t)),t=v.format.from(t),!1===(t=y.toStepping(t))||isNaN(t)?S[e]:t)}function ot(t,e){var r=dt(t),n=void 0===S[0];e=void 0===e||!!e,v.animate&&!n&&pt(h,v.cssClasses.tap,v.animationDuration),m.forEach(function(t){rt(t,it(r[t],t),!0,!1)});for(var i=1===m.length?0:1;i<m.length;++i)m.forEach(function(t){rt(t,S[t],!0,!0)});et(),m.forEach(function(t){J("update",t),null!==r[t]&&e&&J("set",t)})}function at(){var t=b.map(v.format.to);return 1===t.length?t[0]:t}function st(t){var e=S[t],r=y.getNearbySteps(e),n=b[t],i=r.thisStep.step,o=null;if(v.snap)return[n-r.stepBefore.startValue||null,r.stepAfter.startValue-n||null];!1!==i&&n+i>r.stepAfter.startValue&&(i=r.stepAfter.startValue-n),o=n>r.thisStep.startValue?r.thisStep.step:!1!==r.stepBefore.step&&n-r.stepBefore.highestStep,100===e?i=null:0===e&&(o=null);var a=y.countStepDecimals();return null!==i&&!1!==i&&(i=Number(i.toFixed(a))),null!==o&&!1!==o&&(o=Number(o.toFixed(a))),[o,i]}return ht(e=h,v.cssClasses.target),0===v.dir?ht(e,v.cssClasses.ltr):ht(e,v.cssClasses.rtl),0===v.ort?ht(e,v.cssClasses.horizontal):ht(e,v.cssClasses.vertical),ht(e,"rtl"===getComputedStyle(e).direction?v.cssClasses.textDirectionRtl:v.cssClasses.textDirectionLtr),l=A(e,v.cssClasses.base),function(t,e){var r=A(e,v.cssClasses.connects);u=[],(a=[]).push(O(r,t[0]));for(var n=0;n<v.handles;n++)u.push(M(e,n)),m[n]=n,a.push(O(r,t[n+1]))}(v.connect,l),(p=v.events).fixed||u.forEach(function(t,e){B(f.start,t.children[0],I,{handleNumbers:[e]})}),p.tap&&B(f.start,l,n,{}),p.hover&&B(f.move,l,W,{hover:!0}),p.drag&&a.forEach(function(t,e){if(!1!==t&&0!==e&&e!==a.length-1){var r=u[e-1],n=u[e],i=[t];ht(t,v.cssClasses.draggable),p.fixed&&(i.push(r.children[0]),i.push(n.children[0])),i.forEach(function(t){B(f.start,t,I,{handles:[r,n],handleNumbers:[e-1,e]})})}}),ot(v.start),v.pips&&R(v.pips),v.tooltips&&H(),$("update",function(t,e,a,r,s){m.forEach(function(t){var e=u[t],r=K(S,t,0,!0,!0,!0),n=K(S,t,100,!0,!0,!0),i=s[t],o=v.ariaFormat.to(a[t]);r=y.fromStepping(r).toFixed(1),n=y.fromStepping(n).toFixed(1),i=y.fromStepping(i).toFixed(1),e.children[0].setAttribute("aria-valuemin",r),e.children[0].setAttribute("aria-valuemax",n),e.children[0].setAttribute("aria-valuenow",i),e.children[0].setAttribute("aria-valuetext",o)})}),s={destroy:function(){for(var t in v.cssClasses)v.cssClasses.hasOwnProperty(t)&&mt(h,v.cssClasses[t]);for(;h.firstChild;)h.removeChild(h.firstChild);delete h.noUiSlider},steps:function(){return m.map(st)},on:$,off:G,get:at,set:ot,setHandle:function(t,e,r){if(!(0<=(t=Number(t))&&t<m.length))throw new Error("noUiSlider ("+lt+"): invalid handle number, got: "+t);rt(t,it(e,t),!0,!0),J("update",t),r&&J("set",t)},reset:function(t){ot(v.start,t)},__moveHandles:function(t,e,r){Z(t,e,S,r)},options:o,updateOptions:function(e,t){var r=at(),n=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];n.forEach(function(t){void 0!==e[t]&&(o[t]=e[t])});var i=vt(o);n.forEach(function(t){void 0!==e[t]&&(v[t]=i[t])}),y=i.spectrum,v.margin=i.margin,v.limit=i.limit,v.padding=i.padding,v.pips?R(v.pips):F(),v.tooltips?H():z(),S=[],ot(e.start||r,t)},target:h,removePips:F,removeTooltips:z,pips:R}}return{__spectrum:l,version:lt,create:function(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider ("+lt+"): create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider ("+lt+"): Slider was already initialized.");var r=D(t,vt(e),e);return t.noUiSlider=r}}});define("views/MatchCentreTimelineView",["views/BaseView","commentaryCreator","lib/helpers/MatchCentreHelper","lib/helpers/TimelineHelper","vendor/nouislider","underscore"],function(BaseView,CommentaryCreator,MatchCentreHelper,TimelineHelper,noUiSlider,_){var MatchCentreTimelineView=BaseView.extend({el:"#match-centre-timeline",template:"match-centre-timeline",formationIndex:0,defaults:{mode:"team",currentStatName:"ratings",filters:{},minMinute:0,maxMinute:90,minLimit:0,maxLimit:90,maxLimitExpanded:90},initialize:function(options){this.eventTypeMappings=options.eventTypeMappings;this.formationList=options.formationList;this.bindTo(this.model,"change",_.bind(function(){this.onModelChange()},this))},setCommentaryCreator:function(){if(!this.commentaryCreator){this.commentaryCreator=new CommentaryCreator(this.model.get("playerIdNameDictionary"),this.formationList)}},bindCustomEvents:function(){if(!this.customEventsBound){var self=this;this.$el.on("player-mode-on",function(e,players){if(!players.home||!players.away)return;self.mode="player";self.currentPlayers=players;self.filters["data-player-id"]=[players.home.playerId,players.away.playerId];self.setEventVisibilities();self.setTimelineBars()});this.$el.on("team-mode-on",function(e){self.mode="team";self.filters={};self.setEventVisibilities();self.setTimelineBars()});this.$el.on("match-centre-stat-changed",function(e,statName){self.currentStatName=statName;self.onModelChange()});this.customEventsBound=true}},onModelChange:function(){this.expandedMinutes=this.model.get("expandedMinutes");this.minuteInfos=MatchCentreHelper.getMinuteInfosFromExpandedMinutes(this.expandedMinutes);this.expandedMaxMinute=this.model.get("expandedMaxMinute");this.minuteExpanded=this.model.get("minuteExpanded");this.expandedMaxLimit=this.model.get("expandedMaxMinute");if(this.expandedMaxMinute>0){this.setCommentaryCreator();this.setupTimeline();this.$timelineEvents=$(".timeline-event",this.$el);this.bindCustomEvents();this.setTimelineBars()}if(!this.eventsRendered){this.renderEvents();this.eventsRendered=true}},setupTimeline:function(){if(this.$slider)return;var self=this;var timelineInfo=this.getTimelineInfo();var range=timelineInfo.expandedMaxMinute;this.$slider=document.querySelector("#matchcentre-timeline-slider");TimelineHelper.setupMinutes("#matchcentre-timeline-minutes",timelineInfo);noUiSlider.create(this.$slider,{start:[0,range],format:TimelineHelper.rangeFormatter(),connect:true,tooltips:[TimelineHelper.tooltipFormatter(timelineInfo.minuteInfos),TimelineHelper.tooltipFormatter(timelineInfo.minuteInfos)],step:1,range:{min:0,max:range}});this.$slider.noUiSlider.on("set.one",function(values,handle,unencoded,tap,positions){var currentRange={0:timelineInfo.minuteInfos[values[0]],1:timelineInfo.minuteInfos[values[1]]};self.currentRange=currentRange;self.rangeChanged()});this.$timelineEventContainers={home:$('.timeline-events[data-field="home"]',this.$el),away:$('.timeline-events[data-field="away"]',this.$el)};this.$timelineBarsContainers={home:$('.timeline-bars[data-field="home"]',this.$el),away:$('.timeline-bars[data-field="away"]',this.$el)}},getTimelineInfo:function(){return{statusCode:this.model.get("statusCode"),expandedMaxMinute:this.expandedMaxMinute,expandedMinutes:this.expandedMinutes,minuteInfos:this.minuteInfos,minuteExpanded:this.minuteExpanded}},renderEvents:function(){this.renderEventsForTeam("home");this.renderEventsForTeam("away");this.setEventVisibilities()},renderEventsForTeam:function(field){var events=this.prepareEvents(field);NG.renderDustTemplate("match-centre-timeline-events",{events:events},_.bind(function(data){this.$timelineEventContainers[field].html(data)},this))},getStats(teamId){return this.model[teamId].get("stats")[this.currentStatName]},setTimelineBars:function(){var data,home,away;if(this.mode==="team"){if(this.currentStatName==="ratings"){data=this.formatTimelineRatings(this.getStats("home"),this.getStats("away"))}else{data=this.formatTimelineBars(this.getStats("home"),this.getStats("away"))}}else{if(this.currentStatName==="ratings"){data=this.formatTimelineRatings(this.currentPlayers.home.stats["ratings"],this.currentPlayers.away.stats["ratings"])}else{data=this.formatTimelineBars(this.currentPlayers.home.stats[this.currentStatName],this.currentPlayers.away.stats[this.currentStatName])}}home=data["home"];away=data["away"];NG.renderDustTemplate("match-centre-timeline-bars",{events:home},_.bind(function(data){this.$timelineBarsContainers["home"].html(data)},this));NG.renderDustTemplate("match-centre-timeline-bars",{events:away},_.bind(function(data){this.$timelineBarsContainers["away"].html(data)},this))},formatTimelineBars:function(home,away){if(!home||!away)return{};var maxTeam=Math.max.apply(Math,Object.values(home).concat(Object.values(away)));var minutesHome=Object.keys(this.minuteInfos);var maxLeftHome=minutesHome[minutesHome.length-1];var dataHome=Object.keys(home).map(function(key){return{left:key*100/maxLeftHome,height:home[key]}});var minutesAway=Object.keys(this.minuteInfos);var maxLeftAway=minutesAway[minutesAway.length-1];var dataAway=Object.keys(away).map(function(key){return{left:key*100/maxLeftAway,height:away[key]}});dataHome.map(function(item){item["height"]=item["height"]*100/maxTeam;return item});dataAway.map(function(item){item["height"]=item["height"]*100/maxTeam;return item});return{home:dataHome,away:dataAway}},formatTimelineRatings:function(home,away){if(!home||!away)return{};var combined={};var minutes=Object.keys(this.minuteInfos);var maxLeft=minutes[minutes.length-1];var maxHeight=0;Object.keys(home).forEach(function(key){if(!combined[key])combined[key]={};Object.assign(combined[key],{home:home[key]})});Object.keys(away).forEach(function(key){if(!combined[key])combined[key]={};Object.assign(combined[key],{away:away[key]})});var minsWithStats=Object.keys(combined);minsWithStats.forEach(function(key){if(!combined[key].hasOwnProperty("home"))combined[key].home=6;if(!combined[key].hasOwnProperty("away"))combined[key].away=6;var bigger=combined[key].home>combined[key].away?combined[key].home:combined[key].away;if(bigger>maxHeight){maxHeight=bigger}});var homeResults=[];var maxTeam=0;minsWithStats.forEach(function(key){var diff=combined[key].home-combined[key].away;if(diff>0){if(diff>maxTeam)maxTeam=diff;homeResults.push({left:key*100/maxLeft,height:diff})}});var awayResults=[];var maxTeam=0;minsWithStats.forEach(function(key){var diff=combined[key].away-combined[key].home;if(diff>0){if(diff>maxTeam)maxTeam=diff;awayResults.push({left:key*100/maxLeft,height:diff})}});homeResults.map(function(item){item["height"]=item["height"]*100/maxTeam;return item});awayResults.map(function(item){item["height"]=item["height"]*100/maxTeam;return item});return{home:homeResults,away:awayResults}},prepareEvents:function(field){var teamEvents=_.filter(this.model[field].get("incidentEvents"),function(event){return!event.isOwnGoal});var opponentField="home"==field?"away":"home";var opponentTeamOwnGoals=_.filter(this.model[opponentField].get("incidentEvents"),function(event){return event.isOwnGoal});var resultEvents=[];var lastLeft=0;var events=_.union(teamEvents,opponentTeamOwnGoals).sort(function(a,b){return a.expandedMinute-b.expandedMinute});_.each(events,_.bind(function(event){if(event.period){var periodMinutes=this.expandedMinutes[event.period.value];var left=0,expandedMinuteInfo={};if(periodMinutes){var expandedMinute=periodMinutes[event.minute];expandedMinuteInfo=this.minuteInfos[expandedMinute];left=MatchCentreHelper.getLeftFromMinute(expandedMinute,event.second,this.expandedMaxMinute)}if(0!=left&&left<=lastLeft+1.5){left=Math.min(100,Math.max(lastLeft+1.5,left+1.5))}resultEvents.push(_.extend({},event,{left:left,satisfiers:MatchCentreHelper.getKeyIncidentEventSatisfiers(event,this.eventTypeMappings),text:this.commentaryCreator.getSentence(event,events),minuteInfo:expandedMinuteInfo}));lastLeft=left}},this));return resultEvents},getStatValuesForLine:function(stats){var resultStats=[];if(!stats)return resultStats;if(!stats[this.currentStatName])return resultStats;var lastStatValue;for(var i=0;i<=this.expandedMaxMinute;i++){if(stats[this.currentStatName][i]){lastStatValue=stats[this.currentStatName][i];resultStats.push({x:i,y:lastStatValue})}else{if("ratings"==this.currentStatName&&null!=lastStatValue){resultStats.push({x:i,y:lastStatValue})}else{resultStats.push({x:i,y:0,color:"#000"})}}}return resultStats},getMinRatingForTeam:function(team){var ratings=team.get("stats").ratings;return _.min(ratings)},getMaxRatingForTeam:function(team){var ratings=team.get("stats").ratings;return _.max(ratings)},getMinRating:function(){var homeMinRating=this.getMinRatingForTeam(this.model.home);var awayMinRating=this.getMinRatingForTeam(this.model.away);var minRating=Math.min(homeMinRating,awayMinRating);return minRating},getMaxRating:function(){var homeMaxRating=this.getMaxRatingForTeam(this.model.home);var awayMaxRating=this.getMaxRatingForTeam(this.model.away);var maxRating=Math.max(homeMaxRating,awayMaxRating);return maxRating},turnChartOptionsForRatingOn:function(){var options=this.performanceChart.options;var minRating=this.getMinRating();var maxRating=this.getMaxRating();var averageRating=(maxRating+minRating)/2;options.yAxis[0].min=minRating-(averageRating-minRating);options.yAxis[0].max=maxRating+(maxRating-averageRating);this.performanceChart=new Highcharts.Chart(options)},turnChartOptionsForRatingOff:function(){var options=this.performanceChart.options;options.yAxis[0].min=null;options.yAxis[0].max=null;this.performanceChart=new Highcharts.Chart(options)},rangeChanged:function(){this.setEventVisibilities();this.$el.trigger("minutes-range-changed",[this.currentRange])},setEventVisibilities:function(){if(this.currentRange){var range1=this.currentRange[0];var range2=this.currentRange[1];this.minMinute=Math.min(range1.minute,range2.minute);this.maxMinute=Math.max(range1.minute,range2.minute)}else{this.minMinute=0,this.maxMinute=this.model.get("expandedMaxMinute")}var self=this;var $timelineEvents=this.$el.find(".timeline-event");$timelineEvents.each(function(){var $event=$(this);try{$event.removeClass("disabled");if(!self.satisfiesCurrentFilters($event)){$event.addClass("disabled")}}catch(e){}})},satisfiesCurrentFilters:function($event){var minuteFilterSatisfied=this.satisfiesMinuteRange($event);var teamPlayerFilterSatisfied=this.satisfiesTeamPlayerFilters($event);return minuteFilterSatisfied&&teamPlayerFilterSatisfied},satisfiesTeamPlayerFilters:function($event){var filtersSatisfied=true;for(var filter in this.filters){var filtersToSatisfy=this.filters[filter];var filterValue=$event.attr(filter);if(filterValue){filtersSatisfied=filtersSatisfied&&_.contains(filtersToSatisfy,parseInt(filterValue,10))}else{filtersSatisfied=false}}return filtersSatisfied},satisfiesMinuteRange:function($event){var eventMinuteString=$event.attr("data-minute");var eventMinute=parseInt(eventMinuteString,10);var isLessThanMinLimit=eventMinute<this.minMinute;var isMoreThanMaxLimit=this.maxMinute<eventMinute;return!(isLessThanMinLimit||isMoreThanMaxLimit)}});return MatchCentreTimelineView});define("views/MatchCentreCommentaryView",["backbone","views/BaseView","commentaryCreator","lib/helpers/MatchCentreHelper","underscore"],function(Backbone,BaseView,CommentaryCreator,MatchCentreHelper,_){var MatchCentreCommentaryView=BaseView.extend({template:"match-centre-commentary",defaults:{pageSize:20,currentPage:0,expanded:false,commentaryItems:{}},events:{"click .pager-link a":"pageChanged","click .show-more-commentaries":"showMore","click .commentary-item:first-child":"commentaryItemClicked","click #collapsable-toggle":"commentaryItemClicked","click .page-navigation-item":"pageNavigationItemClicked"},initialize:function(options){this.mode=options.mode;this.selfRenderOnly=options.selfRenderOnly;this.eventTypeMappings=options.eventTypeMappings;this.formationList=options.formationList;if(this.selfRenderOnly){this.model.on("change",_.bind(function(){this.onModelChange()},this))}this.setPageName()},onModelChange:function(){this.commentaryEvents=null;this.commentaryItems=[];this.expandedMinutes=this.model.get("expandedMinutes");this.minuteInfos=MatchCentreHelper.getMinuteInfosFromExpandedMinutes(this.expandedMinutes);this.setCommentaryCreator();this.render()},showMore:function(e){this.$el.trigger("show-more-clicked")},setCommentaryCreator:function(){if(!this.commentaryCreator){this.commentaryCreator=new CommentaryCreator(this.model.get("playerIdNameDictionary"),this.formationList)}},pageChanged:function(e){e.preventDefault();e.stopPropagation();var $page=$(e.currentTarget);var page=$page.attr("href");this.$el.find(".pager-link a").removeClass("selected");$page.addClass("selected");this.currentPage=parseInt(page,10);this.render();return false},renderPageInfo:function(){this.$el.find(".current-page").html(this.currentPage+1);this.$el.find(".total-pages").html(this.pageCount+1)},pageNavigationItemClicked:function(e){e.preventDefault();e.stopPropagation();var $page=$(e.currentTarget);var pageName=$page.attr("data-page");if("first-page"==pageName){this.currentPage=0}if("last-page"==pageName){this.currentPage=this.pageCount}if("prev-page"==pageName){this.currentPage=Math.max(0,this.currentPage-1)}if("next-page"==pageName){this.currentPage=Math.min(this.pageCount,this.currentPage+1)}this.setPageName();this.render();return false},setPageName:function(){var pageName=0==this.currentPage?"first-page":this.pageCount==this.currentPage?"last-page":"middle-page";this.$el.attr("data-page-name",pageName).attr("data-page-number",this.currentPage)},templateContext:function(){if(!this.commentaryItems[this.currentPage]){this.generatePageCommentaries()}return{currentPage:this.currentPage,pageSize:this.pageCount,showPager:this.mode!="collapsable",showMore:this.mode=="collapsable",events:this.commentaryItems[this.currentPage]}},ensureCommentaryEventsAreUpdated:function(){if(!this.commentaryEvents){this.commentaryEvents=_.clone(this.model.get("events"));this.commentaryEvents=_.filter(this.commentaryEvents,_.bind(function(event){return this.eventIsIncludedForCommentary(event)},this));this.commentaryEvents=this.commentaryEvents.sort(function(a,b){return-parseInt(a.expandedMinute*60+(a.second||0),10)+parseInt(b.expandedMinute*60+(b.second||0),10)})}},generatePageCommentaries:function(){this.ensureCommentaryEventsAreUpdated();this.pageCount=parseInt(this.commentaryEvents.length/this.pageSize,10);var events=this.commentaryEvents.slice(this.currentPage*this.pageSize,(this.currentPage+1)*this.pageSize);this.commentaryItems[this.currentPage]=this.setCommentaryTexts(events)},setCommentaryTexts:function(events){_.each(events,_.bind(function(event){if(event.teamId){event.field=this.model.home.get("teamId")==event.teamId?1:2}event.satisfiers=MatchCentreHelper.getKeyIncidentEventSatisfiers(event,this.eventTypeMappings);event.text=this.commentaryCreator.getSentence(event,events);event.minuteInfo=5!=event.period.value?this.minuteInfos[event.expandedMinute]:{minuteString:"Pen"}},this));events=events.sort(function(a,b){return-parseInt(a.expandedMinute*60+(a.second||0),10)+parseInt(b.expandedMinute*60+(b.second||0),10)});return events},includedSatisfierTypes:[],excludedSatisfierTypes:["shortPassAccurate","shortPassInaccurate"],excludedEventTypes:[1],includedEventTypes:[30,32,13,14,15,16,6,1e4,10,17,18,19],eventIsIncludedForCommentary:function(event){var includedByType=-1!=this.includedEventTypes.indexOf(event.type.value);var self=this;var includedBySatisfier=false;_.each(event.satisfiedEventsTypes,function(satisfiedEventType){var eventType=self.eventTypeMappings[satisfiedEventType];includedBySatisfier=includedBySatisfier||-1!=self.includedSatisfierTypes.indexOf(eventType)});var isExcludedStartEndEvent=-1!=[30,32].indexOf(event.type.value)&&event.teamId==this.model.away.get("teamId");return(includedByType||includedBySatisfier)&&!isExcludedStartEndEvent},onRender:function(){this.applyMode();this.renderPageInfo();var outerHeight=this.$el.height();this.$el.css("min-height",outerHeight)},applyMode:function(){if(this.mode){this.$el.attr("data-mode",this.mode);_.bind(this.modes[this.mode],this)()}else{this.$el.addClass("full")}},commentaryItemClicked:function(){if("collapsable"==this.mode){this.toggleCollapse()}},toggleCollapse:function(){this.isExpanded=!this.isExpanded;this.$el.toggleClass("collapsed");if(this.isExpanded){var height=this.$el.height();this.$el.css("min-height",height)}else{this.$el.css("min-height","")}},modes:{collapsable:function(){if(this.isExpanded){this.$el.removeClass("collapsed")}else{this.$el.addClass("collapsed")}this.$el.addClass("iconize iconize-icon-right ui-state-transparent-default")}},validate:function(){return true}});return MatchCentreCommentaryView});define("lib/dust.ws",["params","WS/WS.Localizer","WS/WS.UrlHelper","moment","dust","jquery"],function(args,WSLocalizer,WSUrlHelper,moment){dust.helpers.imageUrl=function(chunk,ctx,bodies,params){if(!args.config.site.gImageUrl)return"";var fileName=dust.helpers.tap(params.fileName,chunk,ctx);if(!fileName)return"";return chunk.write(args.config.site.gImageUrl+fileName)};dust.helpers.playerName=function(chunk,ctx,bodies,params){var resultName,fullNameItems;var fullName=dust.helpers.tap(params.fullName,chunk,ctx);if(!fullName)return"";resultName=fullName;fullNameItems=fullName.split(" ");if(params.isShortName){var shortName=[];for(var i=0;i<fullNameItems.length;i++){if(i!=fullNameItems.length-1){var firstChar=fullNameItems[i].split("");shortName.push(firstChar[0]+".")}else{shortName.push(fullNameItems[i])}}resultName=shortName.join(" ")}else if(params.isLastName){resultName=fullNameItems[fullNameItems.length-1]}return chunk.write(resultName)};dust.helpers.valueOfAttribute=function(chunk,ctx,bodies,params){var obj=dust.helpers.tap(params.obj,chunk,ctx);var attribute=dust.helpers.tap(params.attribute,chunk,ctx);var iterate=dust.helpers.tap(params.iterate,chunk,ctx);if(!obj)return chunk.write("");if(!(attribute||iterate))return chunk.write("");var value=!iterate?obj[attribute]:obj[ctx.stack.index];return chunk.write(value)};dust.helpers.toLowerString=function(chunk,ctx,bodies,params){var str=dust.helpers.tap(params.str,chunk,ctx);if(!str)return chunk.write("");var value=str.toLowerCase();return chunk.write(value)};dust.helpers.localize=function(chunk,ctx,bodies,params){var key=dust.helpers.tap(params.key,chunk,ctx);var value=window.localization?localization.dbRes(key):key;return chunk.write(value)};dust.helpers.eq=function(chunk,ctx,bodies,params){var body=bodies.block,skip=bodies["else"];var key=dust.helpers.tap(params.key,chunk,ctx);var value=dust.helpers.tap(params.value,chunk,ctx);if(key&&value&&key==value){chunk=chunk.render(body,ctx)}else if(skip){chunk=chunk.render(skip,ctx)}return chunk};dust.helpers.tap=function(input,chunk,context){var output=input;if(typeof input==="function"){if(input.isFunction===true){output=input()}else{output="";chunk.tap(function(data){output+=data;return""}).render(input,context).untap();if(output===""){output=false}}}return output};dust.helpers.partial=function(chunk,context,bodies,params){var partial={};if(params){var partialTagContext=params.key?params.key:"partial";for(var param in params){if(param!=="key"){partial[param]=params[param]}}}var serverSideHelpersData=context.get(partialTagContext);if(serverSideHelpersData){for(var data in serverSideHelpersData){partial[data]=serverSideHelpersData[data]}}partial.isPartial=true;if(params&&params.template){var template=params.template;if(template.indexOf(":")==-1){return chunk.partial(template,dust.makeBase(partial))}else{var contextIndex=template.indexOf(":");var overrideContext=template.substring(parseInt(contextIndex+1));template=template.substring(0,parseInt(contextIndex));var partialOverrideContext=context.get(overrideContext);if(partialOverrideContext){for(var data in partialOverrideContext){partial[data]=partialOverrideContext[data]}}return chunk.partial(template,dust.makeBase(partial))}}else{return bodies.block(chunk,dust.makeBase(partial))}};dust.helpers.param=function(chunk,context,bodies,params){if(context.global.isPartial){if(params){var key=params.key,defaultVal=params.defaultVal,pKeyValue=context.global[key];if(key&&!pKeyValue&&defaultVal){context.global[key]=defaultVal}}}return chunk};dust.helpers.statColumns=function(chunk,context,bodies,params){params=params||{};var stats=params["columns"]||context.current();var category=params["category"];var subcategory=params["subcategory"];var isMatchCentre=params["isMatchCentre"];var displayDiscipline=params["displayDiscipline"]||false;var displayApps=params["displayApps"]||false;var exclude=params["exclude"]?params["exclude"].split(","):[];var index=0;if(!displayApps){exclude.push("Apps")}if(displayDiscipline){exclude.push("RedCard")}if(category=="tackles"){var index=exclude.indexOf("TackleWonTotal");if(index>-1){exclude.splice(index,1)}}if(stats instanceof Array){for(var k in stats){if(stats.hasOwnProperty(k)&&k.indexOf("$")!==0){var stat=stats[k];if(exclude&&exclude.indexOf(stat.capitaliseFirstLetter())===-1){var column={index:index++,value:stat,title:getTitleOfStat(stat)};column.columnName=getColumnNameFromStat(category,subcategory,stat,isMatchCentre);chunk=chunk.render(bodies.block,context.push(column))}}}}return chunk};dust.helpers.columnLegend=function(chunk,context,bodies,params){params=params||{};var stats=params["columns"]||context.current();var category=params["category"];var subcategory=params["subcategory"];var isMatchCentre=params["isMatchCentre"];var displayDiscipline=params["displayDiscipline"]||false;var exclude=params["exclude"]?params["exclude"].split(","):[];var index=0;if(displayDiscipline){exclude.push("RedCard")}if(stats instanceof Array){for(var k in stats){if(stats.hasOwnProperty(k)&&k.indexOf("$")!==0){var stat=stats[k];var title=getStatNameLongForm(stat);if(exclude&&exclude.indexOf(stat.capitaliseFirstLetter())===-1&&title){var column={index:index++,value:stat,title:title};column.columnName=getColumnNameFromStat(category,subcategory,stat,isMatchCentre);if(!areStringsTooSimilar(column.columnName,column.title)){chunk=chunk.render(bodies.block,context.push(column))}}}}}return chunk};dust.helpers.footnotes=function(chunk,context,bodies,params){params=params||{};var stats=params["columns"]||context.current();var category=params["category"];var subcategory=params["subcategory"];var footnotes=[];if(stats.indexOf("AssistCross")&&category==="assists"){footnotes.push(WSLocalizer.dbRes("UIComponent","stats_info_corner_not_cross"))}return chunk.render(bodies.block,context.push(footnotes))};dust.helpers.stats=function(chunk,context,bodies,params){params=params||{};var columns=params["statNamesToDisplay"]||context.current();var reference=params["reference"];var object=params["object"];var uniqueRender=params["uniqueRender"];var displayDiscipline=params["displayDiscipline"]||false;var displayApps=params["displayApps"]||false;var exclude=params["exclude"]?params["exclude"].split(","):[];var category=params["category"];if(!displayApps){exclude.push("Apps")}if(displayDiscipline){exclude.push("RedCard")}if(category=="tackles"){var index=exclude.indexOf("TackleWonTotal");if(index>-1){exclude.splice(index,1)}}var transformedObject;if(object){if(columns instanceof Object&&Array.isArray(columns)){for(var i=0;i<columns.length;i++){var column=columns[i];var stat=object[column]||object[column.lowercaseFirstLetter()];if(!exclude||exclude&&exclude.indexOf(column.capitaliseFirstLetter())===-1){if(column===uniqueRender){if(column==="yellowCard"){transformedObject={key:column,value:stat,yellowCard:stat,redCard:object["redCard"],sortBy:reference}}}else{transformedObject={key:column,value:stat,title:getTitleOfStat(column),sortBy:reference}}chunk=chunk.render(bodies.block,context.push(transformedObject))}}}}return chunk};dust.helpers.statsAsPercentage=function(chunk,context,bodies,params){params=params||{};var column;var stat;if(params["key"]){column=params["key"];stat=params["stats"][0][column]}else{column=context.stack.head.key;stat=context.stack.head.value}var highStatQuality=setStatPositivity(column);var maxStats=params["maxStats"];var highestStatValue=maxStats[column];var defaultPerc=15;var transformedObject;if(highestStatValue>0){var perc;if(stat==highestStatValue){perc=100}else{perc=100*stat/highestStatValue}if(perc<defaultPerc){perc=defaultPerc}var backgroundStyle="";if(stat==0){backgroundStyle="background-color:inherit;"}transformedObject={key:column,value:stat,valueAsPercentage:perc,background:backgroundStyle,qualityOfHighStat:highStatQuality}}else{transformedObject={key:column,value:stat,valueAsPercentage:defaultPerc,background:"background-color:inherit;",qualityOfHighStat:highStatQuality}}var minStats=params["minStats"];var lowestStatValue=minStats[column];if(highStatQuality=="negative"){if(lowestStatValue==stat){transformedObject.bestStat=true;if(stat==0&&highestStatValue>0){transformedObject.background=""}}}else{if(highestStatValue==stat){transformedObject.bestStat=true}}chunk=chunk.render(bodies.block,context.push(transformedObject));return chunk};function setStatPositivity(column){var highStatQuality="positive";var negativeStats=["yellowCard","redCard","foulsPerGame","wasDribbledPerGame","goalOwn","dispossessedPerGame","turnoverPerGame","offsideGivenPerGame"];for(var i=0;i<negativeStats.length;i++){if(negativeStats[i]==column){highStatQuality="negative"}}return highStatQuality}dust.helpers.statTotalsAndAveragesForTeam=function(chunk,context,bodies,params){params=params||{};var columns=params["statNamesToDisplay"]||context.current();var objects=params["objects"];var displayDiscipline=params["displayDiscipline"]||false;var exclude=params["exclude"]?params["exclude"].split(","):[];if(displayDiscipline){exclude.push("RedCard")}var category=params["category"];var accumulationTypeNumber=params["accumulationType"];var accumulationType=null;if(accumulationTypeNumber==0){accumulationType="apps"}if(accumulationTypeNumber==1||accumulationTypeNumber==4){accumulationType="minsPlayed"}var statSums={};var denominatorSums={};if(columns instanceof Object&&Array.isArray(columns)){for(var i=0;i<columns.length;i++){var column=columns[i];for(var j=objects.length-1;j>=0;j--){var tableStat=objects[j];if(tableStat.isOpta||isAllLeaguesStat(column)){if(!denominatorSums[column]){denominatorSums[column]=0}if(!statSums[column]){statSums[column]=0}denominatorSums[column]+=tableStat[accumulationType];if(doesTeamStatNeedToBeAveraged(column,category,accumulationType)){if(accumulationTypeNumber==4){if(tableStat[column]!=0){statSums[column]+=tableStat[accumulationType]/tableStat[column]}}else{statSums[column]+=tableStat[column]*tableStat[accumulationType]}}else{statSums[column]+=tableStat[column]}}}if(!exclude||exclude&&exclude.indexOf(column.capitaliseFirstLetter())===-1){var total=statSums[column];var entryType="cell";var spanCssClass="";if(category=="summaryteam"){if(column=="redCard"){entryType="secondHalfCell",spanCssClass="red-card-box"}if(column=="yellowCard"){entryType="firstHalfCell",spanCssClass="yellow-card-box"}}if(doesTeamStatNeedToBeAveraged(column,category,accumulationType)){var average=statSums[column]/denominatorSums[column];if(accumulationTypeNumber==4){average=1/average}average=percentifyTeamTableStat(column,average);chunk=chunk.render(bodies.block,context.push({value:average,entryType:entryType,spanCssClass:spanCssClass}))}else{total=percentifyTeamTableStat(column,total);chunk=chunk.render(bodies.block,context.push({value:total,entryType:entryType,spanCssClass:spanCssClass}))}}}}return chunk};dust.helpers.statTotalsAndAveragesForPlayer=function(chunk,context,bodies,params){params=params||{};var columns=params["statNamesToDisplay"]||context.current();var objects=params["objects"];var displayDiscipline=params["displayDiscipline"]||false;var exclude=params["exclude"]?params["exclude"].split(","):[];if(displayDiscipline){exclude.push("RedCard")}var category=params["category"];var accumulationTypeNumber=params["accumulationType"];var accumulationType=null;if(accumulationTypeNumber==0){accumulationType="apps"}if(accumulationTypeNumber==1||accumulationTypeNumber==4){accumulationType="minsPlayed"}var statSums={};var denominatorSums={};if(columns instanceof Object&&Array.isArray(columns)){for(var i=0;i<columns.length;i++){var column=columns[i];for(var j=objects.length-1;j>=0;j--){var tableStat=objects[j];if(tableStat.isOpta||isAllLeaguesStat(column)){if(!denominatorSums[column]){denominatorSums[column]=0}if(!statSums[column]){statSums[column]=0}denominatorSums[column]+=tableStat[accumulationType];if(doesPlayerStatNeedToBeAveraged(column,category,accumulationType)){if(accumulationTypeNumber==4){if(tableStat[column]!=0){statSums[column]+=tableStat[accumulationType]/tableStat[column]}}else{statSums[column]+=tableStat[column]*tableStat[accumulationType]}}else{statSums[column]+=tableStat[column]}}}if(!exclude||exclude&&exclude.indexOf(column.capitaliseFirstLetter())===-1){var total=statSums[column];if(doesPlayerStatNeedToBeAveraged(column,category,accumulationType)){var average=statSums[column]/denominatorSums[column];if(accumulationTypeNumber==4){average=1/average}chunk=chunk.render(bodies.block,context.push({value:average}))}else{chunk=chunk.render(bodies.block,context.push({value:total}))}}}}return chunk};function doesTeamStatNeedToBeAveraged(stat,category,accumulationType){if(category=="summaryteam"){return stat.indexOf("PerGame")>0||stat==="passSuccess"||stat==="possession"}if(stat==="apps"){return false}else{var typesToAverageBy=["apps","minsPlayed"];return typesToAverageBy.indexOf(accumulationType)>-1}}function doesPlayerStatNeedToBeAveraged(stat,category,accumulationType){if(category=="summary"){return stat.indexOf("PerGame")>0||stat==="passSuccess"||stat==="possession"}if(stat==="apps"||stat==="minsPlayed"){return false}else{var typesToAverageBy=["apps","minsPlayed"];return typesToAverageBy.indexOf(accumulationType)>-1}}function percentifyTeamTableStat(stat,value){var percentStats=["possession","passSuccess"];if(percentStats.indexOf(stat)>-1){return value*100}return value}function isAllLeaguesStat(statName){var allLeaguesStats=["apps","subOn","goal","yellowcard","redcard"];return allLeaguesStats.indexOf(statName.toLowerCase())!=-1}dust.helpers.calculateAverageRating=function(chunk,context,bodies,params){params=params||{};var playerTableStats=params["players"];var totalApps=0;var statSums={};statSums.Rating=0;for(var k=playerTableStats.length-1;k>=0;k--){var playerTableStat=playerTableStats[k];if(playerTableStat.rating!=0&&playerTableStat.apps!=0){statSums.Rating+=playerTableStat.rating*playerTableStat.apps;totalApps+=playerTableStat.apps}}if(totalApps){statSums.Rating=statSums.Rating/totalApps}chunk=chunk.render(bodies.block,context.push(statSums.Rating));return chunk};dust.helpers.iterateOnObject=function(chunk,context,bodies,params){params=params||{};var obj=params["on"]||context.current();var exclude=params["exclude"];var reference=params["reference"];if(obj instanceof Object){for(var k in obj){if(obj.hasOwnProperty(k)&&k.indexOf("$")!==0&&(!exclude||exclude&&k!==exclude)){var transformedObject={key:k,value:obj[k],title:getTitleOfStat(k),sortBy:reference};chunk=chunk.render(bodies.block,context.push(transformedObject))}}}return chunk};dust.helpers.nestedArray=function(chunk,context,bodies,params){params=params||{};var array=params["on"]||context.current();var exclude=params["exclude"];for(var i=0;i<array.length;i++){chunk=chunk.render(bodies.block,context.push({value:array[i][0],displayValue:array[i][1]}))}return chunk};dust.helpers.round=function(chunk,context,bodies,params){params=params||{};var number=params.number;var precision=params.precision||2;var displayDashInsteadOfZero=params["displayDashInsteadOfZero"]&&params["displayDashInsteadOfZero"]!="false"||false;var keepDotsAndZeros=params["keepDotsAndZeros"]&&params["keepDotsAndZeros"]==="true"&&number!==10?true:false;number=dust.helpers.tap(params.number,chunk,context);var numberRoundedToPrecision=NG.roundNumber(number,precision,keepDotsAndZeros);var zeroRoundedToPrecision=NG.roundNumber(0,precision,keepDotsAndZeros);if(displayDashInsteadOfZero&&numberRoundedToPrecision===zeroRoundedToPrecision){numberRoundedToPrecision="-"}return chunk.write(numberRoundedToPrecision)};dust.helpers.wrap=function(chunk,context,bodies,params){params=params||{};var word=params.word;var maxChars=params.maxChars;word=dust.helpers.tap(params.word,chunk,context);if(maxChars<word.length){word=word.substring(0,maxChars);word+=".."}return chunk.write(word)};dust.helpers.math=function(chunk,context,bodies,params){if(params&&typeof params.key!=="undefined"&&params.method){var key=params.key,method=params.method,operand=params.operand,round=params.round,mathOut=null,ignoreTrailingZeros=params.ignoreTrailingZeros,operError=function(){console.log("operand is required for this math method");return null};key=dust.helpers.tap(key,chunk,context);operand=dust.helpers.tap(operand,chunk,context);switch(method){case"mod":if(operand===0||operand===-0){console.log("operand for divide operation is 0/-0: expect Nan!")}mathOut=parseFloat(key)%parseFloat(operand);break;case"add":mathOut=parseFloat(key)+parseFloat(operand);break;case"subtract":mathOut=parseFloat(key)-parseFloat(operand);break;case"multiply":mathOut=parseFloat(key)*parseFloat(operand);break;case"divide":if(operand===0||operand===-0){console.log("operand for divide operation is 0/-0: expect Nan/Infinity!")}mathOut=parseFloat(key)/parseFloat(operand);break;case"ceil":mathOut=Math.ceil(parseFloat(key));break;case"floor":mathOut=Math.floor(parseFloat(key));break;case"round":mathOut=parseFloat(key).toFixed(operand);break;case"abs":mathOut=Math.abs(parseFloat(key));break;default:console.log("method passed is not supported")}if(mathOut!==null){if(round){mathOut=parseFloat(mathOut).toFixed(round?round:0)}if(bodies&&bodies.block){return chunk.render(bodies.block,context.push({isSelect:true,isResolved:false,selectKey:mathOut}))}else{if(ignoreTrailingZeros){mathOut=parseFloat(Number(mathOut).toFixed(4))}return chunk.write(mathOut)}}else{return chunk}}else{console.log("Key is a required parameter for math helper along with method/operand!")}return chunk};dust.helpers.if=function(chunk,context,bodies,params){var body=bodies.block,skip=bodies["else"];if(params&&params.cond){var cond=params.cond;cond=dust.helpers.tap(cond,chunk,context);try{if(eval(cond)){if(body){return chunk.render(bodies.block,context)}else{console.log("Missing body block in the if helper!");return chunk}}}catch(e){console.error(e)}if(skip){return chunk.render(bodies["else"],context)}}else{console.log("No condition given in the if helper!")}return chunk};function getStatNameLongForm(stat){stat=stat.capitaliseFirstLetter();return WSLocalizer.dbRes("StatisticsTableLongNames",stat)}function getTitleOfStat(stat){return getStatNameLongForm(stat)?getStatNameLongForm(stat):stat.capitaliseFirstLetter().insertSpacesBetweenWords()}function getColumnNameFromStat(category,subcategory,stat,isMatchCentre){stat=stat.capitaliseFirstLetter();return transformStatPerSpecialCases(stat,category,subcategory,isMatchCentre)}function transformStatPerSpecialCases(stat,category,subcategory,isMatchCentre){var key=stat;switch(stat){case"PassSuccess":if(category==="summaryteam"){key+="_"+category}break;case"AssistTotal":if(category==="assists"){key+="_"+category}break;case"YellowCard":if(category==="cards"){key+="_"+category}else if(category==="summaryteam"){key+="_"+category}break;case"ShotsPerGame":if(category==="summaryteam"){key+="_"+category}break;case"TacklePerGame":if(category==="summaryteam"){key+="_"+category}break;case"InterceptionPerGame":if(category==="summaryteam"){key+="_"+category}break;case"FoulsPerGame":if(category==="summaryteam"){key+="_"+category}break;case"FoulCommitted":if(category==="player-matches"){key+="_"+category}break;case"TackleWon":if(category==="player-matches"){key+="_"+category}break;case"FoulGiven":if(category==="player-matches"){key+="_"+category}break;case"GoalOwn":if(category==="goals"){key+="_"+category}break;case"DribbleWonPerGame":if(category==="summaryteam"){key+="_"+category}break;case"FoulGivenPerGame":if(category==="summaryteam"){key+="_"+category}break;case"OffsideGivenPerGame":if(category==="summaryteam"){key+="_"+category}break;case"Turnover":if(isMatchCentre){key+="_matchcentre"}else if(category==="player-matches"){key+="_"+category}break;case"ShotOnTarget":if(isMatchCentre){key+="_matchcentre"}break;case"ShotsTotal":if(isMatchCentre){key+="_matchcentre"}else if(category==="player-matches"){key+="_"+category}break;case"ShotBlocked":if(isMatchCentre){key+="_matchcentre"}break;case"ShotsConcededPerGame":if(category==="summaryteam"){key+="_"+category}break;case"DuelAerialWon":if(isMatchCentre){key+="_matchcentre"}else if(category==="player-matches"){key+="_"+category}break;case"PassThroughBallTotal":if(isMatchCentre){key+="_matchcentre"}break;case"PassCrossAccurate":if(isMatchCentre){key+="_matchcentre"}if(category==="player-matches"){key+="_"+category}break;case"PassLongBallAccurate":if(category==="player-matches"){key+="_"+category}break;case"PassThroughBallAccurate":if(category==="player-matches"){key+="_"+category}break;case"PassLongBallTotal":if(isMatchCentre){key+="_matchcentre"}break;case"InterceptionAll":if(isMatchCentre){key+="_matchcentre"}if(category==="player-matches"){key+="_"+category}break;case"OffsideGiven":if(isMatchCentre){key+="_matchcentre"}if(category==="player-matches"){key+="_"+category}break;case"ClearanceTotal":if(isMatchCentre){key+="_matchcentre"}if(category==="player-matches"){key+="_"+category}break;case"DribbleWon":if(isMatchCentre){key+="_matchcentre"}if(category==="player-matches"){key+="_"+category}break;case"Dispossessed":if(isMatchCentre){key+="_matchcentre"}if(category==="player-matches"){key+="_"+category}break;case"GoalTotal":if(category==="player-matches"){key+="_"+category}break;case"Assist":if(category==="player-matches"){key+="_"+category}break;case"OutfielderBlock":if(category==="player-matches"){key+="_"+category}break;case"ChallengeLost":if(category==="player-matches"){key+="_"+category}break;case"KeyPassesTotal":if(category==="player-matches"){key+="_"+category}break}return WSLocalizer.dbRes("TableColumnNames",key)}dust.helpers.pager=function(chunk,context,bodies,params){var first=dust.helpers.tap(params.first,chunk,context);var last=dust.helpers.tap(params.last,chunk,context);var url=params.url;var html='<ul class="pager">';for(var i=first;i<=last;i++){html+='<li class="pager-link"><a href="'+url.replace("%page%",i)+'">'+i+"</a></li>"}html+="</ul>";chunk.write(html);return chunk};dust.helpers.comment=function(chunk,context,bodies,params){params=params||{};var comment=params.comment||{};var text=comment.Text||"";var styledText=text;if(comment.IsDeleted){styledText='<span class="deleted"> This comment has been deleted</span>'}else if(text.indexOf("@")==0){var indexOfSpace=text.indexOf(" ");var repliedTo=text.substring(0,indexOfSpace);var actualComment=text.substring(indexOfSpace,text.length);styledText='<span class="replyTo">'+repliedTo+"</span>"+actualComment}return chunk.write(styledText)};dust.helpers.replaceStr=function(chunk,context,bodies,params){params=params||{};var str=dust.helpers.tap(params.strVal,chunk,context)||"";var searchVal=params.search||"";var replaceVal=params.replace||"";var result=str.replace(searchVal,replaceVal);return chunk.write(result)};dust.helpers.localizeKey=function(chunk,context,bodies,params){params=params||{};var resourceId=params.resId;var resourceSet=params.resSet;return chunk.write(WSLocalizer.dbRes(resourceSet,resourceId))};dust.helpers.localizeKeyWithFormat=function(chunk,context,bodies,params){params=params||{};var resourceId=params.resId;var resourceSet=params.resSet;var formatParam=params.formatParam;return chunk.write(WSLocalizer.dbRes(resourceSet,resourceId).format(formatParam))};dust.helpers.localizeParamKey=function(chunk,context,bodies,params){params=params||{};var resourceId=dust.helpers.tap(params.resId,chunk,context);var resourceSet=params.resSet;return chunk.write(WSLocalizer.dbRes(resourceSet,resourceId))};dust.helpers.generateSeoTextForPlayer=function(chunk,context,bodies,params){var playerName=dust.helpers.tap(params.playerName,chunk,context);return chunk.write(WSUrlHelper.GetSeoTextForPlayer(playerName))};dust.helpers.generateSeoTextForTeam=function(chunk,context,bodies,params){var teamName=dust.helpers.tap(params.teamName,chunk,context);var teamCountryName=dust.helpers.tap(params.teamCountryName,chunk,context);return chunk.write(WSUrlHelper.GetSeoTextForTeam(teamCountryName,teamName))};dust.helpers.generateSeoTextForTournament=function(chunk,context,bodies,params){var tournamentName=dust.helpers.tap(params.tournamentName,chunk,context);var tournamentRegionName=dust.helpers.tap(params.tournamentRegionName,chunk,context);return chunk.write(WSUrlHelper.GetSeoTextForTournament(tournamentRegionName,tournamentName))};dust.helpers.generateSeoTextForStage=function(chunk,context,bodies,params){var tournamentName=dust.helpers.tap(params.tournamentName,chunk,context);var tournamentRegionName=dust.helpers.tap(params.tournamentRegionName,chunk,context);var seasonName=dust.helpers.tap(params.seasonName,chunk,context);return chunk.write(WSUrlHelper.GetSeoTextForStage(tournamentRegionName,tournamentName,seasonName))};dust.helpers.generateSeoTextForMatch=function(chunk,context,bodies,params){var tournamentName=dust.helpers.tap(params.tournamentName,chunk,context);var tournamentRegionName=dust.helpers.tap(params.tournamentRegionName,chunk,context);var seasonName=dust.helpers.tap(params.seasonName,chunk,context);var homeTeamName=dust.helpers.tap(params.homeTeamName,chunk,context);var awayTeamName=dust.helpers.tap(params.awayTeamName,chunk,context);return chunk.write(WSUrlHelper.GetSeoTextForMatch(tournamentRegionName,tournamentName,seasonName,homeTeamName,awayTeamName))};dust.helpers.generateSeoTextForOfficial=function(chunk,context,bodies,params){var officialName=dust.helpers.tap(params.officialName,chunk,context);return chunk.write(WSUrlHelper.GetSeoTextForOfficial(officialName))};dust.helpers.truncate=function(chunk,context,bodies,params){var data=dust.helpers.tap(params.data,chunk,context),length=dust.helpers.tap(params.length,chunk,context);return chunk.write(data.substr(0,length))};dust.helpers.formatDate=function(chunk,context,bodies,params){var date=dust.helpers.tap(params.date,chunk,context);var format=dust.helpers.tap(params.format,chunk,context);var dateTime=new Date(date);return chunk.write(moment.utc(dateTime).utcOffset(args.config.site.gUtcOffSetNow).format(format))};dust.helpers.getMatchStatus=function(chunk,context,bodies,params){var matchStatus=dust.helpers.tap(params.matchStatus,chunk,context);var hasPreview=dust.helpers.tap(params.hasPreview,chunk,context);switch(matchStatus){case"1":{if(hasPreview){return chunk.write(WSLocalizer.dbRes("UIComponent","livescores_lnk_preview"))}return chunk.write(WSLocalizer.dbRes("UIComponent","livescores_lnk_h2h_tt"))}case"6":{return chunk.write(WSLocalizer.dbRes("UIComponent","livescores_lnk_match_centre"))}}return chunk.write(matchStatus)};dust.helpers.getPlayerShortName=function(chunk,context,bodies,params){var fullName=dust.helpers.tap(params.fullName,chunk,context);var minimumLength=dust.helpers.tap(params.minimumLength,chunk,context);return chunk.write(NG.getShortName(fullName,minimumLength))}});define("views/MatchCentreView",["views/BaseView","models/MatchCentreModel","views/MatchCentreStadiumView","views/MatchCentreStatsView","views/MatchCentreTimelineView","views/MatchCentreCommentaryView","underscore","lib/dust.ws"],function(BaseView,MatchCentreModel,MatchCentreStadiumView,MatchCentreStatsView,MatchCentreTimelineView,MatchCentreCommentaryView,_){var MatchCentreView=BaseView.extend({isActive:true,el:"#match-centre",template:"match-centre",events:{"click .player":"selectPlayerElement","click #back-to-team":"setTeamMode","click .match-centre-stat":"statSelected"},defaults:{selectedPlayers:{}},initialize:function(options){this.eventTypeMappings=options.eventTypeMappings;this.formationList=options.formationList;this.render()},onModelChange:function(){this.$el.attr("data-status-code",this.model.get("statusCode"));this.$el.attr("data-period-code",this.model.get("periodCode"))},onRender:function(){this.attachSubViews()},attachSubViews:function(){if(this.subViewsAttached)return;this.subViewsAttached=true;this.$stats=$("#match-centre-stats",this.$el);this.$timeline=$("#match-centre-timeline",this.$el);this.$stadium=$("#stadium",this.$el);this.$commentary=$("#match-centre-commentary-summary",this.$el);this.appendSubview(new MatchCentreStadiumView({$el:this.$stadium,model:this.model,eventTypeMappings:this.eventTypeMappings}));this.appendSubview(new MatchCentreStatsView({$el:this.$stats,model:this.model}));this.appendSubview(new MatchCentreTimelineView({$el:this.$timeline,model:this.model,eventTypeMappings:this.eventTypeMappings,formationList:this.formationList}));this.appendSubview(new MatchCentreCommentaryView({el:"#match-centre-commentary-summary",$el:this.$commentary,model:this.model,eventTypeMappings:this.eventTypeMappings,formationList:this.formationList,mode:"collapsable",selfRenderOnly:true}));this.renderSubviews(_.bind(function(){this.bindCustomEvents();this.model.set("initialize",true);this.fetchModel()},this))},fetchModel:function(){var timeoutInSeconds=this.model.get("timeoutInSeconds");var self=this;if(this.liveTimeoutId){clearTimeout(this.liveTimeoutId)}if(0<timeoutInSeconds){this.liveTimeoutId=setTimeout(_.bind(function(){this.model.fetch({success:function(){if({}==self.model.home&&{}==self.model.away){self.model.trigger("fetched-with-error")}else{self.model.trigger("fetched-with-success");self.fetchModel()}}})}),timeoutInSeconds*1e3)}},bindCustomEvents:function(){if(this.customEventsBound)return;this.customEventsBound=true;this.$bindTo(this.$stadium,"rendered",_.bind(function(e,stats){this.$stats.trigger("refresh",[stats])},this));this.$bindTo(this.$stats,"player-stats-updated-from-stats",_.bind(function(e,stats){this.$stadium.trigger("player-stats-updated",[stats])},this));this.$bindTo(this.$timeline,"minutes-range-changed",_.bind(function(e,range){this.$stats.trigger("minutes-range-changed-for-stats",[range]);this.$stadium.trigger("minutes-range-changed-for-stadium",[range]);this.$el.trigger("minutes-range-changed-for-match-centre",[range])},this));this.$bindTo(this.$stats,"match-centre-stat-changed",_.bind(function(e,statName){this.$timeline.trigger("match-centre-stat-changed",[statName])},this));this.$bindTo(this.$commentary,"show-more-clicked",_.bind(function(e){this.$el.trigger("comments-summary-show-more")},this));this.$bindTo(this.$stats,"team-rating-changed-from-stats",_.bind(function(e,teamRatings){this.$el.trigger("team-rating-changed",[teamRatings])},this));this.$el.on("team-mode-selected",_.bind(function(){this.setTeamMode()},this))},setDefaultComparisionMode:function(){this.setSelectedPlayer(this.model.home.getDefaultPlayer(),true);this.setSelectedPlayer(this.model.away.getDefaultPlayer(),true)},statSelected:function(e){var $el=$(e.currentTarget);if("0"==$el.attr("data-sum")){return}var statName=$el.attr("data-for");this.$stats.trigger("match-centre-stat-changed",[statName])},setTeamMode:function(){this.$el.attr("data-comparision-mode","team");this.selectedPlayers={};this.unselectPlayers();this.$stats.trigger("team-mode-on");this.$timeline.trigger("team-mode-on");this.$stadium.trigger("team-mode-on")},getTeamFormation:function(team){var formations=team.get("formations");if(!formations||formations.length<0)return;return formations[0]},setSelectedPlayer:function(player,isSilent){if(!this.comparePlayersSet()&&this.selectedPlayers[player.field]&&this.selectedPlayers[player.field].playerId===player.playerId){this.selectedPlayers[player.field]=undefined;this.unselectPlayers();this.$stadium.trigger("player-mode-off")}else{this.selectedPlayers[player.field]=player;this.markPlayerAsSelected(player);if(this.comparePlayersSet()){if(!isSilent){}}this.$el.attr("data-comparision-mode","player");this.$stats.trigger("player-selected",[player,isSilent]);this.$stadium.trigger("player-mode-on",[player])}},comparePlayersSet:function(){return!!this.selectedPlayers["home"]&&!!this.selectedPlayers["away"]},selectPlayerElement:function(e){var $player=$(e.currentTarget);var playerId=$player.attr("data-player-id");var field=$player.parent("[data-field]").attr("data-field");var player=this.model[field].getPlayerWithId(playerId);this.setSelectedPlayer(player);if(this.comparePlayersSet()){this.$timeline.trigger("player-mode-on",[this.selectedPlayers])}},markPlayerAsSelected:function(player){var $player=this.$el.find('[data-player-id="{0}"]'.format(player.playerId));this.$el.find('[data-field="{0}"] .player'.format(player.field)).removeClass("selected");$player.addClass("selected")},unselectPlayers:function(){var $players=this.$el.find(".player[data-player-id]");$players.removeClass("selected")}});return MatchCentreView});define("canvas/NG.Shapes",[],function(){return function(config){var ctx;this.init=function(){ctx=config.context};this.drawArrow=function(bodyLength,bodyWidth,headLength,headWidth){var arrowHeadWidth=(headWidth-bodyWidth)/2;ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(bodyLength,0);ctx.lineTo(bodyLength,-arrowHeadWidth);ctx.lineTo(bodyLength+headLength,bodyWidth/2);ctx.lineTo(bodyLength,bodyWidth+arrowHeadWidth);ctx.lineTo(bodyLength,bodyWidth);ctx.lineTo(0,bodyWidth);ctx.closePath();ctx.stroke();ctx.fill();ctx.beginPath();ctx.closePath()};this.drawCShape=function(x,y,width,height,innerX,innerY){ctx.save();ctx.translate(x,y);ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(width,0);ctx.lineTo(width,innerY);ctx.lineTo(innerX,innerY);ctx.lineTo(innerX,height-innerY);ctx.lineTo(width,height-innerY);ctx.lineTo(width,height);ctx.lineTo(0,height);ctx.lineTo(0,0);ctx.closePath();ctx.fill();ctx.restore()};this.drawArrowLine=function(xStart,yStart,xEnd,yEnd){var headlen=10;var angle=Math.atan2(yEnd-yStart,xEnd-xStart);ctx.strokeStyle="rgb(255, 255, 255)";ctx.beginPath();ctx.moveTo(xStart,yStart);ctx.lineTo(xEnd,yEnd);ctx.lineTo(xEnd-headlen*Math.cos(angle-Math.PI/6),yEnd-headlen*Math.sin(angle-Math.PI/6));ctx.moveTo(xEnd,yEnd);ctx.lineTo(xEnd-headlen*Math.cos(angle+Math.PI/6),yEnd-headlen*Math.sin(angle+Math.PI/6));ctx.closePath();ctx.stroke()};this.init()}});var base2={name:"base2",version:"1.0",exports:"Base,Package,Abstract,Module,Enumerable,Map,Collection,RegGrp,"+"Undefined,Null,This,True,False,assignID,detect,global",namespace:""};new function(_no_shrink_){var Undefined=K(),Null=K(null),True=K(true),False=K(false),This=function(){return this};var global=This();var base2=global.base2;var _FORMAT=/%([1-9])/g;var _LTRIM=/^\s\s*/;var _RTRIM=/\s\s*$/;var _RESCAPE=/([\/()[\]{}|*+-.,^$?\\])/g;var _BASE=/try/.test(detect)?/\bbase\b/:/.*/;var _HIDDEN=["constructor","toString","valueOf"];var _MSIE_NATIVE_FUNCTION=detect("(jscript)")?new RegExp("^"+rescape(isNaN).replace(/isNaN/,"\\w+")+"$"):{test:False};var _counter=1;var _slice=Array.prototype.slice;_Function_forEach();function assignID(object){if(!object.base2ID)object.base2ID="b2_"+_counter++;return object.base2ID}var _subclass=function(_instance,_static){base2.__prototyping=this.prototype;var _prototype=new this;if(_instance)extend(_prototype,_instance);delete base2.__prototyping;var _constructor=_prototype.constructor;function _class(){if(!base2.__prototyping){if(this.constructor==arguments.callee||this.__constructing){this.__constructing=true;_constructor.apply(this,arguments);delete this.__constructing}else{return extend(arguments[0],_prototype)}}return this}_prototype.constructor=_class;for(var i in Base)_class[i]=this[i];_class.ancestor=this;_class.base=Undefined;if(_static)extend(_class,_static);_class.prototype=_prototype;if(_class.init)_class.init();_class["#implements"]=[];_class["#implemented_by"]=[];return _class};var Base=_subclass.call(Object,{constructor:function(){if(arguments.length>0){this.extend(arguments[0])}},base:function(){},extend:delegate(extend)},Base={ancestorOf:function(klass){return _ancestorOf(this,klass)},extend:_subclass,forEach:function(object,block,context){_Function_forEach(this,object,block,context)},implement:function(source){if(typeof source=="function"){if(_ancestorOf(Base,source)){this["#implements"].push(source);source["#implemented_by"].push(this)}source=source.prototype}extend(this.prototype,source);return this}});var Package=Base.extend({constructor:function(_private,_public){this.extend(_public);if(this.init)this.init();if(this.name&&this.name!="base2"){if(!this.parent)this.parent=base2;this.parent.addName(this.name,this);this.namespace=format("var %1=%2;",this.name,String2.slice(this,1,-1))}if(_private){var JSNamespace=base2.JavaScript?base2.JavaScript.namespace:"";_private.imports=Array2.reduce(csv(this.imports),function(namespace,name){var ns=lookup(name)||lookup("JavaScript."+name);assert(ns,format("Object not found: '%1'.",name),ReferenceError);return namespace+=ns.namespace},"var base2=(function(){return this.base2})();"+base2.namespace+JSNamespace)+lang.namespace;_private.exports=Array2.reduce(csv(this.exports),function(namespace,name){var fullName=this.name+"."+name;this.namespace+="var "+name+"="+fullName+";";return namespace+="if(!"+fullName+")"+fullName+"="+name+";"},"",this)+"this._label_"+this.name+"();";var pkg=this;var packageName=String2.slice(this,1,-1);_private["_label_"+this.name]=function(){Package.forEach(pkg,function(object,name){if(object&&object.ancestorOf==Base.ancestorOf){object.toString=K(format("[%1.%2]",packageName,name));if(object.prototype.toString==Base.prototype.toString){object.prototype.toString=K(format("[object %1.%2]",packageName,name))}}})}}function lookup(names){names=names.split(".");var value=base2,i=0;while(value&&names[i]!=null){value=value[names[i++]]}return value}},exports:"",imports:"",name:"",namespace:"",parent:null,addName:function(name,value){if(!this[name]){this[name]=value;this.exports+=","+name;this.namespace+=format("var %1=%2.%1;",name,this.name)}},addPackage:function(name){this.addName(name,new Package(null,{name:name,parent:this}))},toString:function(){return format("[%1]",this.parent?String2.slice(this.parent,1,-1)+"."+this.name:this.name)}});var Abstract=Base.extend({constructor:function(){throw new TypeError("Abstract class cannot be instantiated.")}});var _moduleCount=0;var Module=Abstract.extend(null,{namespace:"",extend:function(_interface,_static){var module=this.base();var index=_moduleCount++;module.namespace="";module.partial=this.partial;module.toString=K("[base2.Module["+index+"]]");Module[index]=module;module.implement(this);if(_interface)module.implement(_interface);if(_static){extend(module,_static);if(module.init)module.init()}return module},forEach:function(block,context){_Function_forEach(Module,this.prototype,function(method,name){if(typeOf(method)=="function"){block.call(context,this[name],name,this)}},this)},implement:function(_interface){var module=this;var id=module.toString().slice(1,-1);if(typeof _interface=="function"){if(!_ancestorOf(_interface,module)){this.base(_interface)}if(_ancestorOf(Module,_interface)){for(var name in _interface){if(module[name]===undefined){var property=_interface[name];if(typeof property=="function"&&property.call&&_interface.prototype[name]){property=_staticModuleMethod(_interface,name)}module[name]=property}}module.namespace+=_interface.namespace.replace(/base2\.Module\[\d+\]/g,id)}}else{extend(module,_interface);_extendModule(module,_interface)}return module},partial:function(){var module=Module.extend();var id=module.toString().slice(1,-1);module.namespace=this.namespace.replace(/(\w+)=b[^\)]+\)/g,"$1="+id+".$1");this.forEach(function(method,name){module[name]=partial(bind(method,module))});return module}});function _extendModule(module,_interface){var proto=module.prototype;var id=module.toString().slice(1,-1);for(var name in _interface){var property=_interface[name],namespace="";if(name.charAt(0)=="@"){if(detect(name.slice(1)))_extendModule(module,property)}else if(!proto[name]){if(name==name.toUpperCase()){namespace="var "+name+"="+id+"."+name+";"}else if(typeof property=="function"&&property.call){namespace="var "+name+"=base2.lang.bind('"+name+"',"+id+");";proto[name]=_moduleMethod(module,name);proto[name]._module=module}if(module.namespace.indexOf(namespace)==-1){module.namespace+=namespace}}}}function _staticModuleMethod(module,name){return function(){return module[name].apply(module,arguments)}}function _moduleMethod(module,name){return function(){var args=_slice.call(arguments);args.unshift(this);return module[name].apply(module,args)}}var Enumerable=Module.extend({every:function(object,test,context){var result=true;try{forEach(object,function(value,key){result=test.call(context,value,key,object);if(!result)throw StopIteration})}catch(error){if(error!=StopIteration)throw error}return!!result},filter:function(object,test,context){var i=0;return this.reduce(object,function(result,value,key){if(test.call(context,value,key,object)){result[i++]=value}return result},[])},invoke:function(object,method){var args=_slice.call(arguments,2);return this.map(object,typeof method=="function"?function(item){return item==null?undefined:method.apply(item,args)}:function(item){return item==null?undefined:item[method].apply(item,args)})},map:function(object,block,context){var result=[],i=0;forEach(object,function(value,key){result[i++]=block.call(context,value,key,object)});return result},pluck:function(object,key){return this.map(object,function(item){return item==null?undefined:item[key]})},reduce:function(object,block,result,context){var initialised=arguments.length>2;forEach(object,function(value,key){if(initialised){result=block.call(context,result,value,key,object)}else{result=value;initialised=true}});return result},some:function(object,test,context){return!this.every(object,not(test),context)}});var _HASH="#";var Map=Base.extend({constructor:function(values){if(values)this.merge(values)},clear:function(){for(var key in this)if(key.indexOf(_HASH)==0){delete this[key]}},copy:function(){base2.__prototyping=true;var copy=new this.constructor;delete base2.__prototyping;for(var i in this)if(this[i]!==copy[i]){copy[i]=this[i]}return copy},forEach:function(block,context){for(var key in this)if(key.indexOf(_HASH)==0){block.call(context,this[key],key.slice(1),this)}},get:function(key){return this[_HASH+key]},getKeys:function(){return this.map(II)},getValues:function(){return this.map(I)},has:function(key){return _HASH+key in this},merge:function(values){var put=flip(this.put);forEach(arguments,function(values){forEach(values,put,this)},this);return this},put:function(key,value){this[_HASH+key]=value},remove:function(key){delete this[_HASH+key]},size:function(){var size=0;for(var key in this)if(key.indexOf(_HASH)==0)size++;return size},union:function(values){return this.merge.apply(this.copy(),arguments)}});Map.implement(Enumerable);Map.prototype.filter=function(test,context){return this.reduce(function(result,value,key){if(!test.call(context,value,key,this)){result.remove(key)}return result},this.copy(),this)};var _KEYS="~";var Collection=Map.extend({constructor:function(values){this[_KEYS]=new Array2;this.base(values)},add:function(key,item){assert(!this.has(key),"Duplicate key '"+key+"'.");this.put.apply(this,arguments)},clear:function(){this.base();this[_KEYS].length=0},copy:function(){var copy=this.base();copy[_KEYS]=this[_KEYS].copy();return copy},forEach:function(block,context){var keys=this[_KEYS];var length=keys.length;for(var i=0;i<length;i++){block.call(context,this[_HASH+keys[i]],keys[i],this)}},getAt:function(index){var key=this[_KEYS].item(index);return key===undefined?undefined:this[_HASH+key]},getKeys:function(){return this[_KEYS].copy()},indexOf:function(key){return this[_KEYS].indexOf(String(key))},insertAt:function(index,key,item){assert(this[_KEYS].item(index)!==undefined,"Index out of bounds.");assert(!this.has(key),"Duplicate key '"+key+"'.");this[_KEYS].insertAt(index,String(key));this[_HASH+key]=null;this.put.apply(this,_slice.call(arguments,1))},item:function(keyOrIndex){return this[typeof keyOrIndex=="number"?"getAt":"get"](keyOrIndex)},put:function(key,item){if(!this.has(key)){this[_KEYS].push(String(key))}var klass=this.constructor;if(klass.Item&&!instanceOf(item,klass.Item)){item=klass.create.apply(klass,arguments)}this[_HASH+key]=item},putAt:function(index,item){arguments[0]=this[_KEYS].item(index);assert(arguments[0]!==undefined,"Index out of bounds.");this.put.apply(this,arguments)},remove:function(key){if(this.has(key)){this[_KEYS].remove(String(key));delete this[_HASH+key]}},removeAt:function(index){var key=this[_KEYS].item(index);if(key!==undefined){this[_KEYS].removeAt(index);delete this[_HASH+key]}},reverse:function(){this[_KEYS].reverse();return this},size:function(){return this[_KEYS].length},slice:function(start,end){var sliced=this.copy();if(arguments.length>0){var keys=this[_KEYS],removed=keys;sliced[_KEYS]=Array2(_slice.apply(keys,arguments));if(sliced[_KEYS].length){removed=removed.slice(0,start);if(arguments.length>1){removed=removed.concat(keys.slice(end))}}for(var i=0;i<removed.length;i++){delete sliced[_HASH+removed[i]]}}return sliced},sort:function(compare){if(compare){this[_KEYS].sort(bind(function(key1,key2){return compare(this[_HASH+key1],this[_HASH+key2],key1,key2)},this))}else this[_KEYS].sort();return this},toString:function(){return"("+(this[_KEYS]||"")+")"}},{Item:null,create:function(key,item){return this.Item?new this.Item(key,item):item},extend:function(_instance,_static){var klass=this.base(_instance);klass.create=this.create;if(_static)extend(klass,_static);if(!klass.Item){klass.Item=this.Item}else if(typeof klass.Item!="function"){klass.Item=(this.Item||Base).extend(klass.Item)}if(klass.init)klass.init();return klass}});var _RG_BACK_REF=/\\(\d+)/g,_RG_ESCAPE_CHARS=/\\./g,_RG_ESCAPE_BRACKETS=/\(\?[:=!]|\[[^\]]+\]/g,_RG_BRACKETS=/\(/g,_RG_LOOKUP=/\$(\d+)/,_RG_LOOKUP_SIMPLE=/^\$\d+$/;var RegGrp=Collection.extend({constructor:function(values,ignoreCase){this.base(values);this.ignoreCase=!!ignoreCase},ignoreCase:false,exec:function(string,override){string+="";var items=this,keys=this[_KEYS];if(!keys.length)return string;if(override==RegGrp.IGNORE)override=0;return string.replace(new RegExp(this,this.ignoreCase?"gi":"g"),function(match){var item,offset=1,i=0;while(item=items[_HASH+keys[i++]]){var next=offset+item.length+1;if(arguments[offset]){var replacement=override==null?item.replacement:override;switch(typeof replacement){case"function":return replacement.apply(items,_slice.call(arguments,offset,next));case"number":return arguments[offset+replacement];default:return replacement}}offset=next}return match})},insertAt:function(index,expression,replacement){if(instanceOf(expression,RegExp)){arguments[1]=expression.source}return base(this,arguments)},test:function(string){return this.exec(string)!=string},toString:function(){var offset=1;return"("+this.map(function(item){var expression=(item+"").replace(_RG_BACK_REF,function(match,index){return"\\"+(offset+Number(index))});offset+=item.length+1;return expression}).join(")|(")+")"}},{IGNORE:"$0",init:function(){forEach("add,get,has,put,remove".split(","),function(name){_override(this,name,function(expression){if(instanceOf(expression,RegExp)){arguments[0]=expression.source}return base(this,arguments)})},this.prototype)},Item:{constructor:function(expression,replacement){if(replacement==null)replacement=RegGrp.IGNORE;else if(replacement.replacement!=null)replacement=replacement.replacement;else if(typeof replacement!="function")replacement=String(replacement);if(typeof replacement=="string"&&_RG_LOOKUP.test(replacement)){if(_RG_LOOKUP_SIMPLE.test(replacement)){replacement=parseInt(replacement.slice(1))}else{var Q='"';replacement=replacement.replace(/\\/g,"\\\\").replace(/"/g,"\\x22").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\$(\d+)/g,Q+"+(arguments[$1]||"+Q+Q+")+"+Q).replace(/(['"])\1\+(.*)\+\1\1$/,"$1");replacement=new Function("return "+Q+replacement+Q)}}this.length=RegGrp.count(expression);this.replacement=replacement;this.toString=K(expression+"")},length:0,replacement:""},count:function(expression){expression=(expression+"").replace(_RG_ESCAPE_CHARS,"").replace(_RG_ESCAPE_BRACKETS,"");return match(expression,_RG_BRACKETS).length}});var lang={name:"lang",version:base2.version,exports:"assert,assertArity,assertType,base,bind,copy,extend,forEach,format,instanceOf,match,pcopy,rescape,trim,typeOf",namespace:""};function assert(condition,message,ErrorClass){if(!condition){throw new(ErrorClass||Error)(message||"Assertion failed.")}}function assertArity(args,arity,message){if(arity==null)arity=args.callee.length;if(args.length<arity){throw new SyntaxError(message||"Not enough arguments.")}}function assertType(object,type,message){if(type&&(typeof type=="function"?!instanceOf(object,type):typeOf(object)!=type)){throw new TypeError(message||"Invalid type.")}}function copy(object){var copy={};for(var i in object){copy[i]=object[i]}return copy}function pcopy(object){_dummy.prototype=object;return new _dummy}function _dummy(){}function base(object,args){return object.base.apply(object,args)}function extend(object,source){if(object&&source){if(arguments.length>2){var key=source;source={};source[key]=arguments[2]}var proto=global[typeof source=="function"?"Function":"Object"].prototype;if(base2.__prototyping){var i=_HIDDEN.length,key;while(key=_HIDDEN[--i]){var value=source[key];if(value!=proto[key]){if(_BASE.test(value)){_override(object,key,value)}else{object[key]=value}}}}for(key in source){if(proto[key]===undefined){var value=source[key];if(key.charAt(0)=="@"){if(detect(key.slice(1)))extend(object,value)}else{var ancestor=object[key];if(ancestor&&typeof value=="function"){if(value!=ancestor){if(_BASE.test(value)){_override(object,key,value)}else{value.ancestor=ancestor;object[key]=value}}}else{object[key]=value}}}}}return object}function _ancestorOf(ancestor,fn){while(fn){if(!fn.ancestor)return false;fn=fn.ancestor;if(fn==ancestor)return true}return false}function _override(object,name,method){var ancestor=object[name];var superObject=base2.__prototyping;if(superObject&&ancestor!=superObject[name])superObject=null;function _base(){var previous=this.base;this.base=superObject?superObject[name]:ancestor;var returnValue=method.apply(this,arguments);this.base=previous;return returnValue}_base.method=method;_base.ancestor=ancestor;object[name]=_base;_base.toString=K(method+"")}if(typeof StopIteration=="undefined"){StopIteration=new Error("StopIteration")}function forEach(object,block,context,fn){if(object==null)return;if(!fn){if(typeof object=="function"&&object.call){fn=Function}else if(typeof object.forEach=="function"&&object.forEach!=arguments.callee){object.forEach(block,context);return}else if(typeof object.length=="number"){_Array_forEach(object,block,context);return}}_Function_forEach(fn||Object,object,block,context)}forEach.csv=function(string,block,context){forEach(csv(string),block,context)};forEach.detect=function(object,block,context){forEach(object,function(value,key){if(key.charAt(0)=="@"){if(detect(key.slice(1)))forEach(value,arguments.callee)}else block.call(context,value,key,object)})};function _Array_forEach(array,block,context){if(array==null)array=global;var length=array.length||0,i;if(typeof array=="string"){for(i=0;i<length;i++){block.call(context,array.charAt(i),i,array)}}else{for(i=0;i<length;i++){if(i in array)block.call(context,array[i],i,array)}}}function _Function_forEach(fn,object,block,context){var Temp=function(){this.i=1};Temp.prototype={i:1};var count=0;for(var i in new Temp)count++;_Function_forEach=count>1?function(fn,object,block,context){var processed={};for(var key in object){if(!processed[key]&&fn.prototype[key]===undefined){processed[key]=true;block.call(context,object[key],key,object)}}}:function(fn,object,block,context){for(var key in object){if(fn.prototype[key]===undefined){block.call(context,object[key],key,object)}}};_Function_forEach(fn,object,block,context)}function instanceOf(object,klass){if(typeof klass!="function"){throw new TypeError("Invalid 'instanceOf' operand.")}if(object==null)return false;if(object.constructor==klass)return true;if(klass.ancestorOf)return klass.ancestorOf(object.constructor);if(object instanceof klass)return true;if(Base.ancestorOf==klass.ancestorOf)return false;if(Base.ancestorOf==object.constructor.ancestorOf)return klass==Object;switch(klass){case Array:return!!(typeof object=="object"&&object.join&&object.splice);case Function:return typeOf(object)=="function";case RegExp:return typeof object.constructor.$1=="string";case Date:return!!object.getTimezoneOffset;case String:case Number:case Boolean:return typeOf(object)==typeof klass.prototype.valueOf();case Object:return true}return false}function typeOf(object){var type=typeof object;switch(type){case"object":return object==null?"null":typeof object.constructor=="undefined"?_MSIE_NATIVE_FUNCTION.test(object)?"function":type:typeof object.constructor.prototype.valueOf();case"function":return typeof object.call=="function"?type:"object";default:return type}}var JavaScript={name:"JavaScript",version:base2.version,exports:"Array2,Date2,Function2,String2",namespace:"",bind:function(host){var top=global;global=host;forEach.csv(this.exports,function(name2){var name=name2.slice(0,-1);extend(host[name],this[name2]);this[name2](host[name].prototype)},this);global=top;return host}};function _createObject2(Native,constructor,generics,extensions){var INative=Module.extend();var id=INative.toString().slice(1,-1);forEach.csv(generics,function(name){INative[name]=unbind(Native.prototype[name]);INative.namespace+=format("var %1=%2.%1;",name,id)});forEach(_slice.call(arguments,3),INative.implement,INative);var Native2=function(){return INative(this.constructor==INative?constructor.apply(null,arguments):arguments[0])};Native2.prototype=INative.prototype;for(var name in INative){if(name!="prototype"&&Native[name]){INative[name]=Native[name];delete INative.prototype[name]}Native2[name]=INative[name]}Native2.ancestor=Object;delete Native2.extend;Native2.namespace=Native2.namespace.replace(/(var (\w+)=)[^,;]+,([^\)]+)\)/g,"$1$3.$2");return Native2}if((new Date).getYear()>1900){Date.prototype.getYear=function(){return this.getFullYear()-1900};Date.prototype.setYear=function(year){return this.setFullYear(year+1900)}}var _testDate=new Date(Date.UTC(2006,1,20));_testDate.setUTCDate(15);if(_testDate.getUTCHours()!=0){forEach.csv("FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds",function(type){extend(Date.prototype,"setUTC"+type,function(){var value=base(this,arguments);if(value>=57722401e3){value-=36e5;this.setTime(value)}return value})})}Function.prototype.prototype={};if("".replace(/^/,K("$$"))=="$"){extend(String.prototype,"replace",function(expression,replacement){if(typeof replacement=="function"){var fn=replacement;replacement=function(){return String(fn.apply(null,arguments)).split("$").join("$$")}}return this.base(expression,replacement)})}var Array2=_createObject2(Array,Array,"concat,join,pop,push,reverse,shift,slice,sort,splice,unshift",Enumerable,{combine:function(keys,values){if(!values)values=keys;return Array2.reduce(keys,function(hash,key,index){hash[key]=values[index];return hash},{})},contains:function(array,item){return Array2.indexOf(array,item)!=-1},copy:function(array){var copy=_slice.call(array);if(!copy.swap)Array2(copy);return copy},flatten:function(array){var i=0;return Array2.reduce(array,function(result,item){if(Array2.like(item)){Array2.reduce(item,arguments.callee,result)}else{result[i++]=item}return result},[])},forEach:_Array_forEach,indexOf:function(array,item,fromIndex){var length=array.length;if(fromIndex==null){fromIndex=0}else if(fromIndex<0){fromIndex=Math.max(0,length+fromIndex)}for(var i=fromIndex;i<length;i++){if(array[i]===item)return i}return-1},insertAt:function(array,index,item){Array2.splice(array,index,0,item);return item},item:function(array,index){if(index<0)index+=array.length;return array[index]},lastIndexOf:function(array,item,fromIndex){var length=array.length;if(fromIndex==null){fromIndex=length-1}else if(fromIndex<0){fromIndex=Math.max(0,length+fromIndex)}for(var i=fromIndex;i>=0;i--){if(array[i]===item)return i}return-1},map:function(array,block,context){var result=[];Array2.forEach(array,function(item,index){result[index]=block.call(context,item,index,array)});return result},remove:function(array,item){var index=Array2.indexOf(array,item);if(index!=-1)Array2.removeAt(array,index)},removeAt:function(array,index){Array2.splice(array,index,1)},swap:function(array,index1,index2){if(index1<0)index1+=array.length;if(index2<0)index2+=array.length;var temp=array[index1];array[index1]=array[index2];array[index2]=temp;return array}});Array2.reduce=Enumerable.reduce;Array2.like=function(object){return typeOf(object)=="object"&&typeof object.length=="number"};Enumerable["#implemented_by"].pop();Enumerable["#implemented_by"].push(Array2);var _DATE_PATTERN=/^((-\d+|\d{4,})(-(\d{2})(-(\d{2}))?)?)?T((\d{2})(:(\d{2})(:(\d{2})(\.(\d{1,3})(\d)?\d*)?)?)?)?(([+-])(\d{2})(:(\d{2}))?|Z)?$/;var _DATE_PARTS={FullYear:2,Month:4,Date:6,Hours:8,Minutes:10,Seconds:12,Milliseconds:14};var _TIMEZONE_PARTS={Hectomicroseconds:15,UTC:16,Sign:17,Hours:18,Minutes:20};var _TRIM_ZEROES=/(((00)?:0+)?:0+)?\.0+$/;var _TRIM_TIMEZONE=/(T[0-9:.]+)$/;var Date2=_createObject2(Date,function(yy,mm,dd,h,m,s,ms){switch(arguments.length){case 0:return new Date;case 1:return typeof yy=="number"?new Date(yy):Date2.parse(yy);default:return new Date(yy,mm,arguments.length==2?1:dd,h||0,m||0,s||0,ms||0)}},"",{toISOString:function(date){var string="####-##-##T##:##:##.###";for(var part in _DATE_PARTS){string=string.replace(/#+/,function(digits){var value=date["getUTC"+part]();if(part=="Month")value++;return("000"+value).slice(-digits.length)})}return string.replace(_TRIM_ZEROES,"").replace(_TRIM_TIMEZONE,"$1Z")}});delete Date2.forEach;Date2.now=function(){return(new Date).valueOf()};Date2.parse=function(string,defaultDate){if(arguments.length>1){assertType(defaultDate,"number","default date should be of type 'number'.")}var parts=match(string,_DATE_PATTERN);if(parts.length){if(parts[_DATE_PARTS.Month])parts[_DATE_PARTS.Month]--;if(parts[_TIMEZONE_PARTS.Hectomicroseconds]>=5)parts[_DATE_PARTS.Milliseconds]++;var date=new Date(defaultDate||0);var prefix=parts[_TIMEZONE_PARTS.UTC]||parts[_TIMEZONE_PARTS.Hours]?"UTC":"";for(var part in _DATE_PARTS){var value=parts[_DATE_PARTS[part]];if(!value)continue;date["set"+prefix+part](value);if(date["get"+prefix+part]()!=parts[_DATE_PARTS[part]]){return NaN}}if(parts[_TIMEZONE_PARTS.Hours]){var hours=Number(parts[_TIMEZONE_PARTS.Sign]+parts[_TIMEZONE_PARTS.Hours]);var minutes=Number(parts[_TIMEZONE_PARTS.Sign]+(parts[_TIMEZONE_PARTS.Minutes]||0));date.setUTCMinutes(date.getUTCMinutes()+hours*60+minutes)}return date.valueOf()}else{return Date.parse(string)}};var String2=_createObject2(String,function(string){return new String(arguments.length==0?"":string)},"charAt,charCodeAt,concat,indexOf,lastIndexOf,match,replace,search,slice,split,substr,substring,toLowerCase,toUpperCase",{csv:csv,format:format,rescape:rescape,trim:trim});delete String2.forEach;function trim(string){return String(string).replace(_LTRIM,"").replace(_RTRIM,"")}function csv(string){return string?(string+"").split(/\s*,\s*/):[]}function format(string){var args=arguments;var pattern=new RegExp("%([1-"+(arguments.length-1)+"])","g");return(string+"").replace(pattern,function(match,index){return args[index]})}function match(string,expression){return(string+"").match(expression)||[]}function rescape(string){return(string+"").replace(_RESCAPE,"\\$1")}var Function2=_createObject2(Function,Function,"",{I:I,II:II,K:K,bind:bind,compose:compose,delegate:delegate,flip:flip,not:not,partial:partial,unbind:unbind});function I(i){return i}function II(i,ii){return ii}function K(k){return function(){return k}}function bind(fn,context){var lateBound=typeof fn!="function";if(arguments.length>2){var args=_slice.call(arguments,2);return function(){return(lateBound?context[fn]:fn).apply(context,args.concat.apply(args,arguments))}}else{return function(){return(lateBound?context[fn]:fn).apply(context,arguments)}}}function compose(){var fns=_slice.call(arguments);return function(){var i=fns.length,result=fns[--i].apply(this,arguments);while(i--)result=fns[i].call(this,result);return result}}function delegate(fn,context){return function(){var args=_slice.call(arguments);args.unshift(this);return fn.apply(context,args)}}function flip(fn){return function(){return fn.apply(this,Array2.swap(arguments,0,1))}}function not(fn){return function(){return!fn.apply(this,arguments)}}function partial(fn){var args=_slice.call(arguments,1);return function(){var specialised=args.concat(),i=0,j=0;while(i<args.length&&j<arguments.length){if(specialised[i]===undefined)specialised[i]=arguments[j++];i++}while(j<arguments.length){specialised[i++]=arguments[j++]}if(Array2.contains(specialised,undefined)){specialised.unshift(fn);return partial.apply(null,specialised)}return fn.apply(this,specialised)}}function unbind(fn){return function(context){return fn.apply(context,_slice.call(arguments,1))}}function detect(){var jscript=NaN;var javaEnabled=global.java?true:false;if(global.navigator){var MSIE=/MSIE[\d.]+/g;var element=document.createElement("span");var userAgent=navigator.userAgent.replace(/([a-z])[\s\/](\d)/gi,"$1$2");if(!jscript)userAgent=userAgent.replace(MSIE,"");if(MSIE.test(userAgent))userAgent=userAgent.match(MSIE)[0]+" "+userAgent.replace(MSIE,"");base2.userAgent=navigator.platform+" "+userAgent.replace(/like \w+/gi,"");javaEnabled&=navigator.javaEnabled()}var _cache={};detect=function(expression){if(_cache[expression]==null){var returnValue=false,test=expression;var not=test.charAt(0)=="!";if(not)test=test.slice(1);if(test.charAt(0)=="("){try{returnValue=new Function("element,jscript,java,global","return !!"+test)(element,jscript,javaEnabled,global)}catch(ex){}}else{returnValue=new RegExp("("+test+")","i").test(base2.userAgent)}_cache[expression]=!!(not^returnValue)}return _cache[expression]};return detect(arguments[0])}base2=global.base2=new Package(this,base2);var exports=this.exports;lang=new Package(this,lang);exports+=this.exports;JavaScript=new Package(this,JavaScript);eval(exports+this.exports);lang.base=base;lang.extend=extend};define("canvas/base2",function(){});define("canvas/NG.Stats.Base",["canvas/NG.Shapes","canvas/base2"],function(NGShapes){return base2.Base.extend({constructor:function(config){this.init(config)},init:function(config){var ctx=config.context;var ctxWidth=parseFloat(ctx.canvas.width);var ctxHeight=parseFloat(ctx.canvas.height);var extraOptions=config.extraOptions;this.getContext=function(){return ctx};this.getExtraOptions=function(){return extraOptions};this.getCanvasHeight=function(percentage){if(isNaN(percentage))return ctxHeight;return ctxHeight*percentage/100};this.getCanvasWidth=function(percentage){if(isNaN(percentage))return ctxWidth;return ctxWidth*percentage/100};this.pitch=config.pitch;this.type=config.type||"percentage";this.showValues="value"==this.type;this.shapes=new NGShapes({context:ctx});this.homeFillStyle=this.rgba(235,91,20,1);this.homeStrokeStyle=this.rgba(235,91,20,1);this.fillStyleConceded=this.rgba(170,170,170,1);this.awayFillStyle=this.rgba(0,139,224,1);this.awayStrokeStyle=this.rgba(0,139,224,1)},rgba:function(red,green,blue,alpha){var localVar;var createdRgba;var r,g,b,a;var rgba=function(){this.init(red,green,blue,alpha)};rgba.prototype={init:function(red,green,blue,alpha){r=red||0,g=green||0,b=blue||0,a=alpha||1;return this},setAlpha:function(alpha){a=alpha;return this},toRgbaString:function(){return"rgba("+rgbColors()+", "+a+")"},toRgbString:function(){return"rgb("+rgbColors()+")"}};function rgbColors(){return r+", "+g+", "+b}var createdRgba=new rgba;return createdRgba},drawText:function(percentage,point,fontSize){if(point==undefined)point={x:0,y:0};if(fontSize==undefined)fontSize="25px";if(!isNaN(fontSize))fontSize+="px";var ctx=this.getContext();ctx.font="bold "+fontSize+" 'arial'";ctx.lineWidth=1;ctx.save();ctx.fillStyle="rgb(255, 255, 255)";ctx.fillText(percentage.toString()+(this.showValues?"":"%"),point.x,point.y);ctx.restore()},relativePointToAbsolute:function(x,y){var width=this.getCanvasWidth(x);var height=this.getCanvasHeight(100-y);return{x:width,y:height}},fontSizeRelativeToCanvasHeight:function(scale){if(!scale)scale=8;return Math.round(this.getCanvasHeight()/scale)},setForOrAgainstFillAndStrokeStyle:function(against,alpha){if(alpha===undefined)alpha=1;if(against){this.getContext().fillStyle=this.awayFillStyle.setAlpha(alpha).toRgbaString();this.getContext().strokeStyle=this.awayStrokeStyle.setAlpha(alpha).toRgbaString();return}var forAlpha=alpha+.1;this.getContext().fillStyle=this.homeFillStyle.setAlpha(forAlpha).toRgbaString();this.getContext().strokeStyle=this.homeStrokeStyle.setAlpha(forAlpha).toRgbaString()},clearCanvas:function(){this.getContext().clearRect(0,0,this.getCanvasWidth(),this.getCanvasHeight())}})});define("canvas/NG.Stats.Events",["canvas/NG.Stats.Base","canvas/NG.Shapes","jquery"],function(NGStatsBase,NGShapes){return NGStatsBase.extend({eventColors:{1:"#67962E",13:"#2980b9",14:"#2980b9",15:"#2980b9",16:"#2980b9",3:"#d35400",8:"#f1c40f"},defaultEventColor:"#000",setEventStrokeStyle:function(ctx,event,isHomeEvent){var eventColor=this.getEventColor(event);ctx.strokeStyle=isHomeEvent?"#D25112":"#0B7ABF";ctx.fillStyle=event.isSelected?isHomeEvent?"#EB5B14":"#008BE0":"#333";ctx.globalAlpha=1;ctx.globalCompositeOperation=event.isSelected?"source-over":"destination-over"},getEventColor:function(event){if(!event.type)return this.defaultEventColor;var eventColor=this.eventColors[event.type.value];return eventColor?eventColor:this.defaultEventColor},getDestinationCoordinatesForEvent:function(event,forceDraw){if(-1!=[13,14,15,16].indexOf(event.type.value)||forceDraw){var destinationX,destinationY;if(event.blockedX&&event.blockedY){destinationX=event.blockedX;destinationY=event.blockedY}if(event.endX&&event.endY){destinationX=event.endX;destinationY=event.endY}if(event.goalMouthY){destinationX=100;destinationY=event.goalMouthY}if(undefined!=destinationY&&undefined!=destinationX){if(event.isOwnGoal){destinationX=100-destinationX}var position=this.relativePointToAbsolute(2==event.field?100-destinationX:destinationX,2==event.field?100-destinationY:destinationY);return position}}},drawEventDestinationLine:function(ctx,el){var event=el.details?el.details:el;var forceDraw=el.details;if(!event.isSelected)return;if(forceDraw){ctx.beginPath();ctx.moveTo(el.start.x+this.selectedRadius,el.start.y+this.selectedRadius);ctx.lineWidth=2;this.setEventStrokeStyle(ctx,event,1==event.field)}var destinationCoordinates=this.getDestinationCoordinatesForEvent(event,forceDraw);if(destinationCoordinates){ctx.lineTo(destinationCoordinates.x,destinationCoordinates.y);ctx.arc(destinationCoordinates.x,destinationCoordinates.y,this.selectedRadius/2,0,Math.PI*2,false)}if(forceDraw){ctx.fill();ctx.stroke();ctx.save();ctx.restore();ctx.closePath()}},draw:function(data){this.clearCanvas();var events=data.value;if(!events)return;var ctx=this.getContext(),shapes=new NGShapes({context:ctx}),defaultRadius=this.pitch.getLengthRatio()*1,selectedRadius=this.pitch.getLengthRatio()*1,actualRadius,totalEvents=events.length,extraOptions=this.getExtraOptions(),i,position,eventElements=[],that=this,canvasWidth=this.getCanvasWidth(),canvasHeight=this.getCanvasHeight();this.selectedRadius=selectedRadius;if(!this.detailsAreaIsSet){if(extraOptions){this.$homeDetails=extraOptions.$homeDetails;this.$awayDetails=extraOptions.$awayDetails;this.onEventSelect=extraOptions.onEventSelect}this.detailsAreaIsSet=true}ctx.clearRect(0,0,canvasWidth,canvasHeight);ctx.save();ctx.lineWidth=2;ctx.textBaseline="middle";ctx.textAlign="center";ctx.font="12px 'arial'";ctx.strokeStyle="#222";var showedDefaultDetails={home:false,away:false};for(i=0;i<totalEvents;i++){var event=events[i];if(!event.isSelected)continue;var radius=event.isSelected?selectedRadius:defaultRadius;actualRadius=ctx.lineWidth+radius;var awayTeam=event.field==2;this.setEventStrokeStyle(ctx,event,!awayTeam);position=this.relativePointToAbsolute(awayTeam?100-event.x:event.x,awayTeam?100-event.y:event.y);ctx.beginPath();ctx.moveTo(position.x+radius,position.y);ctx.arc(position.x,position.y,radius,0,Math.PI*2,false);this.drawEventDestinationLine(ctx,event);ctx.closePath();eventElements.push({details:event,start:{x:position.x-actualRadius,y:position.y-actualRadius},end:{x:position.x+actualRadius,y:position.y+actualRadius}});ctx.fill();ctx.stroke();ctx.save();ctx.restore();if(event.isSelected&&!showedDefaultDetails){populateEventDetails(!awayTeam?that.$homeDetails:that.$awayDetails,event);showedDefaultDetails=true}}ctx.restore();var $canvas=$(ctx.canvas);this.$canvas=$canvas;$canvas.unbind("click").bind("click",function(event){var ratioW=960/$canvas.width();var ratioH=560/$canvas.height();var x=(event.pageX-$(this).offset().left)*ratioW;var y=(event.pageY-$(this).offset().top)*ratioH;var $this=$(this);for(i=0;i<totalEvents;i++){var el=eventElements[i];if(!el)continue;if(el.start.x<=x&&x<=el.end.x&&(el.start.y<=y&&y<=el.end.y)){if(that.onEventSelect){that.onEventSelect(el.details);if(1==el.details.type.value){that.drawEventDestinationLine(ctx,el)}}return}else{if(that.onEventSelect){that.onEventSelect()}}}});function populateEventDetails($el,details){for(var attr in details){if("qualifiers"==attr){var r=[];for(var i=0;i<details.qualifiers.length;i++){if(details.qualifiers[i].qualifier.type){r.push('<li class="qualifier">'+details.qualifiers[i].qualifier.type.value+" = "+details.qualifiers[i].value+"</li>")}}$el.find(".qualifiers ul").html(r.join(""))}else{$el.find("."+attr+" span").text(details[attr])}}$el.find(".player-picture img").attr("src","http://164.177.157.12/img/players/"+details.playerId+".jpg")}}})});define("canvas/NG.PitchDefaults",[],function(){var strokeAndFillStyle="rgb(91, 91, 91)";return{lineWidth:1,strokeStyle:strokeAndFillStyle,fillStyle:strokeAndFillStyle}});define("canvas/NG.CanvasHelper",["jquery"],function(){return{degreesToRadians:function(degrees){return Math.PI/180*degrees},radiansToDegrees:function(radians){return radians*(180/Math.PI)},getContextById:function(id){return this.getCanvasContext($("#"+id)[0])},getCanvasContext:function(canvas){if(canvas.getContext==undefined)return G_vmlCanvasManager.initElement(canvas).getContext("2d");return canvas.getContext("2d")},lineWidthPixelsUsed:function(lineWidth){return Math.round(lineWidth/2)*2}}});define("canvas/NG.Pitch",["canvas/NG.PitchDefaults","canvas/NG.CanvasHelper","canvas/base2"],function(NGPitchDefaults,NGCanvasHelper){return base2.Base.extend({constructor:function(config){var ctx=config.context;this.getContext=function(){return ctx};this.length=config.length;this.width=config.width;this.drawCenterCircle=config.drawCenterCircle!=undefined?config.drawCenterCircle:true;this.drawPenaltyArcs=config.drawPenaltyArcs!=undefined?config.drawPenaltyArcs:true;this.drawCornerCircles=config.drawCornerCircles!=undefined?config.drawCornerCircles:true;this.initialGoalHeight=config.goalHeight;var lengthRatio=this.length/115;var widthRatio=this.width/74;var sixYards=6*lengthRatio;var lineWidth=ctx.lineWidth;if(this.initialGoalHeight==undefined){this.goalHeight=0}else{this.goalHeight=this.initialGoalHeight}this.getLengthRatio=function(){return lengthRatio};this.getWidthRatio=function(){return widthRatio};this.getSixYards=function(){return sixYards};this.getLineWidth=function(){return lineWidth};this.totalLength=function(){return this.length+this.goalHeight*2};this.totalWidth=function(){return this.width+lineWidth};this.yards=function(numberOfYards){return lengthRatio*numberOfYards};this.yardsW=function(numberOfYards){return widthRatio*numberOfYards};this.eighteenYardBoxWidth=function(){return 44*lengthRatio}},drawWithDefaults:function(){var ctx=this.getContext();var defaults=NGPitchDefaults;ctx.translate(this.goalHeight+1,1);ctx.lineWidth=defaults.lineWidth;ctx.strokeStyle=defaults.strokeStyle;ctx.fillStyle=defaults.fillStyle;this.drawStripes();this.draw()},draw:function(){that=this;var ctx=this.getContext();var lineWidth=ctx.lineWidth;that.getLineWidth=function(){return lineWidth};var lengthRatio=this.getLengthRatio();var widthRatio=this.getWidthRatio();var goalWidth=8*lengthRatio;var middle=this.width/2;var halfWay=this.length/2;var topPost=middle-goalWidth/2;var bottomPost=middle+goalWidth/2;var sixYards=this.getSixYards();var eighteenYardEllipseEdge=22*lengthRatio;var penaltySpot=sixYards*2;var circleRadius=10*lengthRatio;var goalHeight=that.goalHeight;var eighteenYards=sixYards*3;var spotWidth=.5*lengthRatio;drawOutline();drawHalfWayLineAndCircle();drawArea();ctx.save();ctx.translate(that.length,that.width);ctx.rotate(NGCanvasHelper.degreesToRadians(180));drawArea();ctx.restore();ctx.stroke();drawCenterSpotAndPenaltySpots();drawWSLogo();ctx.beginPath();ctx.closePath();function drawWSLogo(){var wsLogo=new Image;wsLogo.src="/img/wsblack.png";wsLogo.onload=function(){var logoRealWidth=this.width;var logoRealHeight=this.height;var logoAdjustedWidth=Math.min(120,that.length/4);var logoAdjustedHeight=logoRealHeight*(logoAdjustedWidth/logoRealWidth);var logoY=that.width-logoAdjustedHeight-4;var logoX=that.length-logoAdjustedWidth-4;ctx.drawImage(wsLogo,logoX,logoY,logoAdjustedWidth,logoAdjustedHeight)}}function drawOutline(){ctx.strokeRect(0,0,that.length,that.width)}function drawHalfWayLineAndCircle(){ctx.moveTo(halfWay,0);ctx.lineTo(halfWay,that.width);ctx.moveTo(halfWay+circleRadius,middle);if(that.drawCenterCircle){ctx.arc(halfWay,middle,circleRadius,0,NGCanvasHelper.degreesToRadians(360),false)}}function drawArea(){drawEighteenYardBoxEllipse();drawGoal();drawSixYardBox();drawEighteenYardBox()}function drawGoal(){if(goalHeight>0){ctx.moveTo(0,topPost);ctx.lineTo(-goalHeight,topPost);ctx.lineTo(-goalHeight,bottomPost);ctx.lineTo(0,bottomPost)}}function drawSixYardBox(){drawAreaBox(sixYards)}function drawEighteenYardBox(){drawAreaBox(eighteenYards)}function drawAreaBox(size){var top=topPost-size;ctx.moveTo(0,top);ctx.lineTo(size,top);ctx.lineTo(size,that.width-top);ctx.lineTo(0,that.width-top)}function drawEighteenYardBoxEllipse(){if(!that.drawPenaltyArcs)return;ctx.moveTo(eighteenYardEllipseEdge,middle);ctx.arc(penaltySpot,middle,circleRadius,NGCanvasHelper.degreesToRadians(0),NGCanvasHelper.degreesToRadians(52.5),false);ctx.moveTo(eighteenYardEllipseEdge,middle);ctx.arc(penaltySpot,middle,circleRadius,NGCanvasHelper.degreesToRadians(0),NGCanvasHelper.degreesToRadians(306.5),true)}function drawCenterSpotAndPenaltySpots(){var cornerSize=sixYards/4;ctx.beginPath();ctx.moveTo(penaltySpot,middle);ctx.arc(penaltySpot,middle,spotWidth,0,NGCanvasHelper.degreesToRadians(360),false);ctx.moveTo(penaltySpot,middle);ctx.arc(that.length-penaltySpot,middle,spotWidth,0,NGCanvasHelper.degreesToRadians(360),false);ctx.moveTo(penaltySpot,middle);ctx.arc(halfWay,middle,spotWidth,0,NGCanvasHelper.degreesToRadians(360),false);ctx.fill();ctx.closePath();if(that.drawCornerCircles){ctx.beginPath();ctx.moveTo(cornerSize,0);ctx.arc(0,0,cornerSize,0,NGCanvasHelper.degreesToRadians(90),false);ctx.moveTo(that.length,cornerSize);ctx.arc(that.length,0,cornerSize,NGCanvasHelper.degreesToRadians(90),NGCanvasHelper.degreesToRadians(180),false);ctx.moveTo(0,that.width-cornerSize);ctx.arc(0,that.width,cornerSize,NGCanvasHelper.degreesToRadians(270),NGCanvasHelper.degreesToRadians(360),false);ctx.moveTo(that.length-cornerSize,that.width);ctx.arc(that.length,that.width,cornerSize,NGCanvasHelper.degreesToRadians(180),NGCanvasHelper.degreesToRadians(270),false);ctx.closePath();ctx.stroke()}}},drawStripes:function(){var ctx=this.getContext();var numberOfStrips=20;var stripWidth=this.length/numberOfStrips;ctx.save();for(var i=0;i<numberOfStrips;i++){if(i%2>0){ctx.fillStyle="rgb(51, 51, 51)"}else{ctx.fillStyle="rgb(51, 51, 51)"}ctx.fillRect(i*stripWidth,0,stripWidth+1,this.width)}ctx.restore()}})});define("canvas/NG.TransformationMatrix",[],function(){var transformationMatrix=function(xScale,xShear,yShear,yScale,xTranslation,yTranslation){this.xScale=xScale;this.xShear=xShear;this.yShear=yShear;this.yScale=yScale;this.xTranslation=xTranslation;this.yTranslation=yTranslation;this.reset=function(){this.xScale=xScale;this.xShear=xShear;this.yShear=yShear;this.yScale=yScale;this.xTranslation=xTranslation;this.yTranslation=yTranslation}};transformationMatrix.prototype.setTransform=function(ctx){ctx.setTransform(this.xScale,this.xShear,this.yShear,this.yScale,this.xTranslation,this.yTranslation)};transformationMatrix.prototype.transform=function(ctx){ctx.transform(this.xScale,this.xShear,this.yShear,this.yScale,this.xTranslation,this.yTranslation)};transformationMatrix.prototype.rotate=function(radians){return new transformationMatrix(this.xScale*Math.cos(radians),this.xShear+this.xScale*-Math.sin(radians),this.yShear+this.yScale*Math.sin(radians),this.yScale*Math.cos(radians),this.xTranslation,this.yTranslation)};transformationMatrix.prototype.pointToTransformedPoint=function(xOriginal,yOriginal,width,height){return{x:yOriginal*this.yShear+this.xTranslation+xOriginal/width*(this.xScale*width),y:xOriginal*this.xShear+this.yTranslation+yOriginal/height*(this.yScale*height)}};return transformationMatrix});define("canvas/NG.Stats.Draw3DPitch",["canvas/NG.Pitch","canvas/NG.CanvasHelper","canvas/NG.TransformationMatrix","jquery"],function(NGPitch,NGCanvasHelper,NGTransformationMatrix){return function(pitchCtx,length,width){var threeDeePitch=new NGPitch({length:length,width:width,goalHeight:0,context:pitchCtx,drawCenterCircle:isCanvasSupported(),drawPenaltyArcs:isCanvasSupported(),drawCornerCircles:false});var tempLength=length;length=width;width=tempLength;var yShearRadians=NGCanvasHelper.degreesToRadians(30);var yShear=Math.tan(yShearRadians);var xScale=4;var yScale=1.3;var yTranslation=threeDeePitch.width*.15;var maxBarHeight=40;var matrix=new NGTransformationMatrix(xScale,0,-yShear,yScale,yShear*threeDeePitch.yardsW(47),yTranslation);pitchCtx.clearRect(0,0,2e3,2e3);var rightMargin=threeDeePitch.yardsW(7)*Math.tan(yShearRadians)*xScale;var canvasDimensions={width:threeDeePitch.length,height:threeDeePitch.width};$(pitchCtx.canvas).parent().css(canvasDimensions);$(pitchCtx.canvas).attr(canvasDimensions);pitchCtx.lineWidth=1;pitchCtx.strokeStyle=pitchCtx.fillStyle="rgba(255, 255, 255, 0.8)";pitchCtx.save();matrix.setTransform(pitchCtx);threeDeePitch.drawStripes();threeDeePitch.draw();pitchCtx.restore();displayGoal(pitchCtx);function isCanvasSupported(){return document.createElement("canvas").getContext!==undefined}function displayGoal(ctx){var goalWidth=threeDeePitch.yards(8);var startY=threeDeePitch.width/2-goalWidth/2;var startPoint=matrix.pointToTransformedPoint(0,startY,threeDeePitch.length,threeDeePitch.width);var endPoint=matrix.pointToTransformedPoint(0,startY+goalWidth,threeDeePitch.length,threeDeePitch.width);ctx.lineWidth=2;ctx.moveTo(startPoint.x,startPoint.y);ctx.lineTo(startPoint.x,startPoint.y-threeDeePitch.yards(6));ctx.lineTo(endPoint.x,endPoint.y-threeDeePitch.yards(6));ctx.lineTo(endPoint.x,endPoint.y);ctx.stroke();ctx.beginPath();ctx.closePath()}return{pitch:threeDeePitch,matrix:matrix,canvasDimensions:canvasDimensions,maxBarHeight:maxBarHeight}}});define("canvas/NG.FullPitchAndOverlayingStats",["canvas/NG.CanvasHelper","canvas/NG.PitchDefaults","canvas/NG.Pitch","jquery"],function(NGCanvasHelper,NGPitchDefaults,NGPitch){return function(target,pitchWidth,pitchHeight){var createCanvas=function(width,height){return $("<canvas></canvas>").attr("width",width).attr("height",height)};var pitchLineWidth=NGPitchDefaults.lineWidth;var goalHeight=0;var containerId=$(target).attr("id");var roundedLineWidth=NGCanvasHelper.lineWidthPixelsUsed(pitchLineWidth);var margin=Math.round((pitchLineWidth-1)/2);var pitchCanvasWidth=pitchWidth+goalHeight*2+roundedLineWidth;var pitchCanvasHeight=pitchHeight+roundedLineWidth;var pitchCanvas=createCanvas(pitchCanvasWidth,pitchCanvasHeight).css("position","absolute").attr("id",containerId+"PitchCanvas");var container=$("<div></div>").css("width",pitchCanvasWidth+pitchLineWidth/2-1).css("height",pitchCanvasHeight+pitchLineWidth/2-1).addClass("pitch-stats-container");var statsCanvas=createCanvas(pitchWidth-roundedLineWidth,pitchHeight-roundedLineWidth);statsCanvas.css("margin-top",roundedLineWidth).css("margin-left",goalHeight+roundedLineWidth).attr("id",containerId+"StatsCanvas").css("position","absolute");container.append(pitchCanvas);container.append(statsCanvas);target.append(container);var pitchCtx=NGCanvasHelper.getCanvasContext(pitchCanvas[0]);var pitch=new NGPitch({context:pitchCtx,length:pitchWidth,width:pitchHeight,goalHeight:goalHeight,name:"NormalPitch"});var translateMargin=roundedLineWidth/2-1;pitchCtx.save();pitchCtx.translate(translateMargin,translateMargin);pitch.drawWithDefaults();pitchCtx.restore();var statsCtx=NGCanvasHelper.getCanvasContext(statsCanvas[0]);return{pitch:pitch,statsContext:statsCtx}}});define("wscanvas",["canvas/NG.Stats.Draw3DPitch","canvas/NG.CanvasHelper","canvas/NG.FullPitchAndOverlayingStats","jquery"],function(NGStatsDraw3DPitch,NGCanvasHelper,NGFullPitchAndOverlayingStats){return function(config){var view,model,pitch,stats;init(config);function init(config){view=config.view;type=config.model.type;if(view.is3D){var pitchAndMatrix=NGStatsDraw3DPitch(NGCanvasHelper.getContextById(view.renderTo+" .pitch-canvas"),view.width,view.height);var statsCtx=NGCanvasHelper.getContextById(view.renderTo+" .stat-canvas");pitch=pitchAndMatrix.pitch;stats=new config.model.instanceType({context:statsCtx,pitch:pitch,matrix:pitchAndMatrix.matrix,maxBarHeight:pitchAndMatrix.maxBarHeight,type:type,extraOptions:config.extraOptions});$(statsCtx.canvas).attr(pitchAndMatrix.canvasDimensions)}else{var pitchAndStatsCtx=null;if(typeof view.drawPitch==="function"){pitchAndStatsCtx=view.drawPitch(view.renderTo)}else{pitchAndStatsCtx=NGFullPitchAndOverlayingStats($("#"+view.renderTo),view.width,view.height)}pitch=pitchAndStatsCtx.pitch;stats=new config.model.instanceType({pitch:pitch,context:pitchAndStatsCtx.statsContext,width:view.width,height:view.height,type:type,extraOptions:config.extraOptions})}}this.load=function(data){stats.draw(data,config.view)};this.id=function(){return view.renderTo}}});define("plugins/jquery.selected",["jquery"],function($){(function($){$.fn.selected=function(select){if(select===undefined){select=true}return this.each(function(){var t=this.type;if(t=="checkbox"||t=="radio"){this.checked=select}else if(this.tagName.toLowerCase()=="option"){var $sel=$(this).parent("select");if(select&&$sel[0]&&$sel[0].type=="select-one"){$sel.find("option").selected(false)}this.selected=select}})}})(jQuery)});define("views/ChalkboardView",["backbone","params","views/BaseView","commentaryCreator","lib/helpers/MatchCentreHelper","lib/helpers/EventFilterHelper","lib/helpers/TimelineHelper","vendor/nouislider","canvas/NG.Stats.Events","wscanvas","underscore","plugins/jquery.selected"],function(Backbone,params,BaseView,CommentaryCreator,MatchCentreHelper,EventFilterHelper,TimelineHelper,noUiSlider,NGStatsEvents,WSCanvas,_){var EventFilterz=EventFilterHelper.getHelper();var ChalkboardView=BaseView.extend({el:"#chalkboard",template:"chalkboard",events:{"click .filterz-option":"filterzOptionChanged",'click .filterz-filter[data-filter-index]:not([data-sum="0"])':"filterzFilterClicked","click .player":"playerClicked","click .team-name":"openPicker","click .team":"toggleAllPlayers"},defaults:{playerFilterIsOn:false,currentFilter:"0",filterIdentifiers:{},currentPlayerIds:{},currentFilterIndices:{},minMinute:0,maxMinute:90,minLimit:0,maxLimit:90,filterSatisfiers:{}},initialize:function(options){this.formationList=options.formationList;this.playerModeOn();this.checkSelection();this.render()},setCommentaryCreator:function(){if(!this.commentaryCreator){this.commentaryCreator=new CommentaryCreator(this.model.get("playerIdNameDictionary"),this.formationList)}},onModelChange:function(){if(!this.isActive)return;this.setTeam(this.model.home);this.setTeam(this.model.away);this.setCommentaryCreator();this.setInfo();this.refreshChalkboard();var timelineInfo=this.getTimelineInfo();this.setTimelineEventVisiblities()},templateContext:function(){return{filterGroups:this.filterGroups}},setTeam:function(team){var $team=this.$el.find('.team-players[data-field="{0}"]'.format(team.get("field")));this.$el.find('.team-name[data-field="{0}"]'.format(team.get("field"))).html(team.get("name"));var $players=$team.find(".players");var players=team.get("players");if(!players)return;this.setPlayers($players,players)},setPlayers:function($players,players){if(!this.playersAlive){this.playersAlive={}}_.each(players,_.bind(function(player){if(!this.playersAlive[player.playerId]){this.addPlayer($players,player);this.playersAlive[player.playerId]=1}},this))},addPlayer:function($players,player){NG.renderDustTemplate("chalkboard-player",player,_.bind(function(playerHtml){$players.append(playerHtml)},this))},openPicker:function(e){var OPEN_CALSS="open";var el=$(e.currentTarget);var field=el.data("field");var str='.team-players[data-field="'+field+'"]';var target=$(str);if(target.hasClass(OPEN_CALSS)){target.removeClass(OPEN_CALSS);el.removeClass(OPEN_CALSS)}else{target.addClass(OPEN_CALSS);el.addClass(OPEN_CALSS)}},filterzOptionChanged:function(e){this.selectedEventIdentifier=null;this.hideEventDetails();var $option=$(e.currentTarget);var filterIndex=$option.attr("data-filter-index");this.selectOption($option);this.resetFiltersView(filterIndex);this.setCurrentFilter(filterIndex);this.selectAllPlayers()},selectOption:function($option){$(".filterz-option a",this.$el).removeClass("selected");$option.find("a").addClass("selected")},resetFiltersView:function(filterIndex){this.$filterGroups.removeClass("selected");this.$filterGroups.filter('[data-filter-index="{0}"]'.format(filterIndex)).addClass("selected");this.$el.find('.filterz-filter:not([data-filter-index="all"])').removeClass("selected");this.$el.removeClass("filterz-filter-on")},setCurrentFilter:function(filterIndex){this.currentFilter=filterIndex;this.currentFilterIndices={}},createCanvas:function(){if(this.eventsPanel)return;var self=this;var eventsCanvasConfig={view:{width:960,height:560,renderTo:"chalkboard .canvas-container"},model:{instanceType:NGStatsEvents},extraOptions:{onEventSelect:function(event){if(event){self.highlightEvent(event);self.drawCanvas()}else{if(self.selectedEventIdentifier){self.dehighlightEvent();self.drawCanvas()}}}}};this.eventsPanel=new WSCanvas(eventsCanvasConfig)},dehighlightEvent:function(){if(this.selectedEventIdentifier){this.selectedEventIdentifier=null;this.hideEventDetails()}},highlightEvent:function(event){var eventIdentifier=this.getEventIdentifier(event);if(eventIdentifier!=this.selectedEventIdentifier){this.selectedEventIdentifier=eventIdentifier;this.showEventDetails(event)}return},dehighlightFilters:function(){return},hideEventDetails:function(){this.$playerEventDetails.removeClass("visible")},showEventDetails:function(event){if(!event)return;this.$playerEventDetails.attr("data-event-id",event.eventId);this.$playerEventDetails.find(".player-event-minute").html(event.minute);this.$playerEventDetails.find(".player-event-text").html(this.commentaryCreator.getSentence(event,this.model.get("events")));this.$playerEventDetails.find(".player-avatar").attr("src",params.config.site.gImageUrl+"players/"+event.playerId+".jpg");var mappedX=this.homeTeamId==event.teamId?event.x:100-event.x;var mappedY=this.homeTeamId==event.teamId?event.y:100-event.y;var left=50<mappedX?10:60,top=50<mappedY?10:60;this.$playerEventDetails.addClass("visible").css("left",left+"%").css("top",top+"%")},drawCanvas:function(){if(!this.eventsPanel){this.createCanvas()}var eventsToDraw=this.getCurrentEvents();this.eventsPanel.load({value:eventsToDraw});this.setPlayerCountValues(eventsToDraw);this.setTimelineEvents(eventsToDraw)},setTimelineEvents:function(eventsToDraw){this.setTimelineEventsForTeam(eventsToDraw,this.homeTeamId);this.setTimelineEventsForTeam(eventsToDraw,this.awayTeamId)},setTimelineEventsForTeam:function(events,teamId){var teamEvents=_.filter(events,function(event){return event.teamId==teamId&&event.isSelected});var field=this.homeTeamId==teamId?"home":"away";var timelineEvents=this.prepareEventsForTimeline(teamEvents,field);NG.renderDustTemplate("chalkboard-timeline-events",timelineEvents,_.bind(function(data){this.$el.find('.timeline-events[data-field="{0}"]'.format(field)).html(data)},this))},prepareEventsForTimeline:function(events,field){var resultEvents=[];var groupedByExpandedMinute={};var maxNoOfEventsInExpandedMinute=0;var self=this;_.each(events,_.bind(function(event){if(!groupedByExpandedMinute[event.expandedMinute]){groupedByExpandedMinute[event.expandedMinute]=[]}groupedByExpandedMinute[event.expandedMinute].push(event)}));for(var expandedMinute in groupedByExpandedMinute){var left=MatchCentreHelper.getLeftFromMinute(expandedMinute,0,this.expandedMaxLimit);var expandedMinuteInfo=this.minuteInfos[expandedMinute];var expandedMinuteEvents=groupedByExpandedMinute[expandedMinute];maxNoOfEventsInExpandedMinute=Math.max(maxNoOfEventsInExpandedMinute,expandedMinuteEvents.length);resultEvents.push(_.extend({},{left:left,events:expandedMinuteEvents},expandedMinuteInfo))}var eventHeight=Math.min(8,100/maxNoOfEventsInExpandedMinute);_.each(resultEvents,function(resultEvent){resultEvent.eventHeight=eventHeight;resultEvent.eventWidth=eventHeight;resultEvent.height=eventHeight*resultEvent.events.length;if("home"==field){resultEvent.top=100-resultEvent.height}else{resultEvent.bottom=100-resultEvent.height}});return{events:resultEvents,maxNoOfEventsInExpandedMinute:maxNoOfEventsInExpandedMinute}},getCurrentFilterEvents:function(){var events=_.union(this.groupedFilters[this.currentFilter].home,this.groupedFilters[this.currentFilter].away);return events},getCurrentEvents:function(){if(this.groupedFilters&&this.groupedFilters[this.currentFilter]){var events=this.getCurrentFilterEvents();var self=this;var resultEvents=[];_.each(events,function(event){var isInCurrentTimeRange=self.eventIsInMinuteRange(event);var isInSelectedPlayers=self.eventIsInSelectedPlayers(event);var isInSelectedEventTypes=self.eventIsInSelectedEventTypes(event);var isEventHighlighted=self.eventIsHighlighted(event);event.isSelected=!self.selectedEventIdentifier&&isInCurrentTimeRange&&isInSelectedPlayers&&isInSelectedEventTypes||isEventHighlighted;resultEvents.push(event)});return resultEvents}return this.model.get("events")},eventIsHighlighted:function(event){var eventIdentifier=this.getEventIdentifier(event);return this.selectedEventIdentifier?this.selectedEventIdentifier==eventIdentifier:false},eventIsInSelectedPlayers:function(event){var resultSatisfied=true;if(!$.isEmptyObject(this.currentPlayerIds)){resultSatisfied=this.currentPlayerIds[event.playerId]}return resultSatisfied},getSatisfiedEventFilterIndicesForEvent:function(event){var satisfiedFilterIndices={};for(var filterIndex in this.filterSatisfiers){var filterSatisfier=this.filterSatisfiers[filterIndex];if(filterSatisfier(event)){satisfiedFilterIndices[filterIndex]=1}}return satisfiedFilterIndices},eventIsInSelectedEventTypes:function(event){var resultSatisfied=true;if(!$.isEmptyObject(this.currentFilterIndices)){for(var filterGroupIndex in this.currentFilterIndices){var filterGroup=this.currentFilterIndices[filterGroupIndex];var filterGroupSatisfied=false;for(var filterIndex in filterGroup){var satisfier=this.filterSatisfiers[filterIndex];if(satisfier){var filterSatisfied=satisfier(event);filterGroupSatisfied=filterGroupSatisfied||filterSatisfied}}resultSatisfied=resultSatisfied&&filterGroupSatisfied}}return resultSatisfied},getEventIdentifier:function(event){return event.teamId?"{0}_{1}".format(event.teamId,event.eventId):null},getTimelineInfo:function(){return{statusCode:this.model.get("statusCode"),expandedMaxMinute:this.expandedMaxMinute,expandedMinutes:this.expandedMinutes,minuteInfos:this.minuteInfos,minuteExpanded:this.minuteExpanded}},setInfo:function(){this.maxMinute=this.model.get("maxMinute");this.maxLimit=Math.max(90,this.maxMinute);this.homeTeamId=this.model.get("home").teamId;this.awayTeamId=this.model.get("away").teamId;this.expandedMinutes=this.model.get("expandedMinutes");this.expandedMinMinute=0;this.expandedMaxLimit=this.model.get("expandedMaxMinute");this.expandedMaxMinute=this.model.get("expandedMaxMinute");this.minuteInfos=MatchCentreHelper.getMinuteInfosFromExpandedMinutes(this.expandedMinutes);this.minuteExpanded=this.model.get("minuteExpanded")},setupTimeline:function(){if(this.$slider)return;var self=this;var timelineInfo=this.getTimelineInfo();var range=timelineInfo.expandedMaxMinute;this.$slider=document.querySelector("#chalkboard-timeline-slider");TimelineHelper.setupMinutes("#chalkboard-timeline-minutes",timelineInfo);noUiSlider.create(this.$slider,{start:[0,range],format:TimelineHelper.rangeFormatter(),connect:true,tooltips:[TimelineHelper.tooltipFormatter(timelineInfo.minuteInfos),TimelineHelper.tooltipFormatter(timelineInfo.minuteInfos)],step:1,range:{min:0,max:range}});this.$slider.noUiSlider.on("set.two",function(values,handle,unencoded,tap,positions){var currentRange={0:timelineInfo.minuteInfos[values[0]],1:timelineInfo.minuteInfos[values[1]]};self.currentRange=currentRange;self.rangeChanged()})},refreshChalkboard:function(){this.$playerEventDetails=this.$el.find("#player-event-details");this.$filterGroups=this.$el.find(".filterz-filter-group");this.$pitchContainer=this.$el.find(".pitch-stats-container",this.$el);this.timelineWidth=964;this.groupEventsByFilterz();this.setupTimeline();this.drawCanvas();var timelineInfo=this.getTimelineInfo();if(!this.$el.attr("data-initialized")){this.$el.find("#event-type-filters .filterz-option:first-child").click()}},onRender:function(){},rangeChanged:function(){this.setMinuteRanges();this.groupEventsByFilterz();this.drawCanvas()},setTimelineEventVisiblities:function(){var self=this;this.$el.find(".chalkboard-timeline-event").each(function(){var $el=$(this);var expandedMinute=$el.attr("data-expanded-minute");expandedMinute=parseInt(expandedMinute,10);if(self.eventIsInMinuteRange(expandedMinute)){$el.removeClass("hidden")}else{$el.addClass("hidden")}})},getMinuteFromLeft:function(left){if(!left)return;if(left.replace){if(-1!=left.indexOf("px")){left=left.replace("px","")}if(-1!=left.indexOf("%")){var leftInPercentage=left.replace("%","");left=leftInPercentage*this.timelineWidth/100}}return parseInt(this.maxLimit*(left/this.timelineWidth),10)},getHandleMinute:function($handle){var left=$handle.css("left");return this.getMinuteFromLeft(left)},setMinuteRanges:function(){var range1=this.currentRange[0];var range2=this.currentRange[1];this.expandedMinMinute=Math.min(range1.expandedMinute,range2.expandedMinute);this.expandedMaxMinute=Math.max(range1.expandedMinute,range2.expandedMinute)},setMinuteFiltersOn:function(min,max){this.maxMinute=max;this.minMinute=min;this.maxLimit=Math.max(this.maxMinute,this.maxLimit)},filterzFilterOn:function(){this.$el.addClass("filterz-filter-on");this.drawCanvas()},filterzFilterOff:function(){this.$el.removeClass("filterz-filter-on");this.selectedEventIdentifiers=null;this.drawCanvas()},playerFilterKeyTemplate:"player_{0}",filterzFilterKeyTemplate:"filterz_{0}",filterzFilterClicked:function(e){this.dehighlightEvent();var $filter=$(e.currentTarget);var $filterGroup=$filter.parent(".filterz-filter-sub-group");var filterIndex=$filter.attr("data-filter-index");if("all"==filterIndex){this.uncheckAllFiltersInGroup($filterGroup);$filter.addClass("selected")}else{$filter.siblings('[data-filter-index="all"]').removeClass("selected");$filter.toggleClass("selected")}this.currentFilterIndices=this.getCurrentSelection();if(!$.isEmptyObject(this.currentFilterIndices)){this.filterzFilterOn(filterIndex)}else{$filter.siblings('[data-filter-index="all"]').addClass("selected");$filterGroup.addClass("has-selected-stats");this.filterzFilterOff()}},checkAllFiltersInGroup:function(){this.$el.find('[data-filter-index="{0}"] [data-filter-index="all"]'.format(this.currentFilter)).click()},uncheckAllFiltersInGroup:function($filterGroup){$filterGroup.find('.filterz-filter:not([data-sum="0"])').removeClass("selected")},getCurrentSelection:function(){var self=this;var filterSelection={};this.ignoredFilters={};var $filterGroups=this.$el.find('[data-filter-index="{0}"] .filterz-filter-sub-group'.format(this.currentFilter));$filterGroups.each(function(){var $filterGroup=$(this);var filterGroupIndex=$filterGroup.index();var $selectedFilters=$filterGroup.find('.filterz-filter.selected:not([data-filter-index="all"])');if(0!=$selectedFilters.length){filterSelection[filterGroupIndex]={};$selectedFilters.each(function(){var $filter=$(this);var filterIndex=$filter.attr("data-filter-index");var ignoredParentIndex=$filter.attr("data-ignore-parent-filter");if("all"!=filterIndex){filterSelection[filterGroupIndex][filterIndex]=1}if(ignoredParentIndex){self.ignoredFilters[ignoredParentIndex]=1}})}});return filterSelection},playerClicked:function(e){this.dehighlightEvent();var $player=$(e.currentTarget);var playerId=parseInt($player.attr("data-player-id"),10);if($player.hasClass("selected")){$player.removeClass("selected");$player.find("input").selected(false)}else{$player.addClass("selected");$player.find("input").selected(true)}this.checkSelection();this.drawCanvas()},toggleAllPlayers:function(e){var SELECTED="selected";var el=$(e.currentTarget);var field=el.parent().data("field");if(el.hasClass(SELECTED)){el.removeClass(SELECTED);el.find("input").selected(false);this.unmarkSelectedPlayers(field)}else{el.addClass(SELECTED);el.find("input").selected(true);this.markSelectedPlayers(field)}this.checkSelection();this.drawCanvas()},selectAllPlayers:function(){var SELECTED="selected";var el=$(".team-players .team");el.addClass(SELECTED);el.find("input").selected(true);this.markSelectedPlayers("home");this.markSelectedPlayers("away");this.checkSelection();this.drawCanvas()},unmarkSelectedPlayers:function(field){var players=$('.team-players[data-field="'+field+'"] .player');players.removeClass("selected");players.find("input").selected(false)},markSelectedPlayers:function(field){var players=$('.team-players[data-field="'+field+'"] .player');players.addClass("selected");players.find("input").selected(true)},checkSelection(){var newMap={};_.each($("#chalkboard-stadium .player.selected"),function(item){var playerId=$(item).attr("data-player-id");newMap[playerId]=1});this.currentPlayerIds=newMap},playerModeOn:function(){this.playerFilterIsOn=true;this.$el.addClass("player-filter-on")},playerModeOff:function(){this.currentPlayerIds={};this.playerFilterIsOn=false;this.$el.removeClass("player-filter-on")},setSelectedEventsByPlayer:function(){var events=this.getCurrentFilterEvents();var self=this;self.selectedEventIdentifiers=[];if(self.playerFilterIsOn){_.each(events,function(event){if(self.playerIsSelected(event.playerId)){self.selectedEventIdentifiers.push(self.getEventIdentifier(event))}})}},playerIsSelected:function(playerId){return this.selectedPlayers.home==playerId||this.selectedPlayers.away==playerId},getPlayerIdsToHighlight:function(){var resultPlayerIds=[];if(!this.playerFilterIsOn)return null;if(this.selectedPlayers.home.hovered){resultPlayerIds.push(this.selectedPlayers.home.hovered)}else if(this.selectedPlayers.home){resultPlayerIds.push(this.selectedPlayers.home.selected)}if(this.selectedPlayers.away.hovered){resultPlayerIds.push(this.selectedPlayers.away.hovered)}else if(this.selectedPlayers.away.selected){resultPlayerIds.push(this.selectedPlayers.away.selected)}return resultPlayerIds},selectPlayer:function(playerId,field){this.playerFilterIsOn=true;this.selectedPlayers[field]=playerId;this.setSelectedEventsByPlayer();this.drawCanvas()},addSelectedPlayer:function(playerId,field){this.currentPlayerIds.push(playerId)},removeSelectedPlayer:function(playerId,field){},deselectPlayer:function(playerId,field){this.playerFilterIsOn=false;this.selectedPlayers[field]=null;this.setSelectedEventsByPlayer();this.drawCanvas()},groupEventsByFilterz:function(){var self=this;var groupedResult={};var events=this.model.get("events");_.each(this.filterGroups,function(filterGroup,groupIndex){var groupSatisfier=filterGroup.satisfier;var filterGroupCount=self.getCountForFilterSatisfier(groupSatisfier,events);if(filterGroupCount){groupedResult[groupIndex]=filterGroupCount;if(filterGroup.displaySatisfier){groupedResult[groupIndex+"_d"]=self.getCountForFilterSatisfier(filterGroup.displaySatisfier,events)}_.each(filterGroup.filterSubGroups,function(filterSubGroup,filterSubGroupIndex){_.each(filterSubGroup.filters,function(filter,filterIndex){if(filter.satisfier){var filterKey=groupIndex+"_"+filterSubGroupIndex+"_"+filterIndex;var filterCount=self.getCountForFilterSatisfier(function(event){return(!filter.ignoreParentSatisfier&&groupSatisfier(event)||filter.ignoreParentSatisfier)&&filter.satisfier(event)},events);if(groupedResult[groupIndex]){groupedResult[filterKey]=filterCount;self.filterSatisfiers[filterKey]=filter.satisfier}}})})}});this.groupedFilters=groupedResult;this.setFilterCountValues();this.setShotZoneValues()},setShotZoneValues:function(){if(0!=this.currentFilter)return;var self=this;var currentEvents=this.getCurrentEvents();this.setShotZoneValuesForTeam("home",_.filter(currentEvents,function(event){return self.homeTeamId==event.teamId}));this.setShotZoneValuesForTeam("away",_.filter(currentEvents,function(event){return self.awayTeamId==event.teamId}))},setShotZoneValuesForTeam:function(field,shotEvents){var $detailSlot=$('.detail-slot[data-detail-slot-id="shots"][data-field={0}]'.format(field));var shotZonesHtml=[],shotZones={};var self=this;_.each(shotEvents,function(shotEvent){var shotZoneType=MatchCentreHelper.getShotZoneTypeFromEvent(shotEvent);if(!shotZoneType)return;if(!shotZones[shotZoneType]){shotZones[shotZoneType]={count:0,goalCount:0}}shotZones[shotZoneType].count++;if(shotEvent.isGoal){shotZones[shotZoneType].goalCount++}});for(var shotZone in shotZones){var shotZoneStats=shotZones[shotZone];if(shotZoneStats.count){var goalCount=shotZoneStats.goalCount;var shotCount=shotZoneStats.count-shotZoneStats.goalCount;shotZonesHtml.push('<span class="shot-zone {0} {1} {2}">'.format(shotZone,goalCount?"has-goals":"",goalCount&&shotCount?"has-goals-and-shots":""));if(shotCount){shotZonesHtml.push(shotCount)}if(goalCount){shotZonesHtml.push('<span class="incidents-icon ui-icon goal"><span class="number box-shadow">{0}</span></span>'.format(goalCount))}shotZonesHtml.push("</span>")}}$detailSlot.html(shotZonesHtml.join(""))},getShotZonesInRange:function(shotZones){var result={};var self=this;for(var shotZone in shotZones){var shotZoneStats=shotZones[shotZone].stats;result[shotZone]={goalCount:0,count:0};if(shotZoneStats){_.each(shotZoneStats,function(stat,expandedMinute){if(self.expandedMinuteIsInRange(expandedMinute)){result[shotZone].count+=stat.count;result[shotZone].goalCount+=stat.goalCount}})}}return result},setPlayerCountValues:function(events){var eventsGroupedByPlayerId={};_.each(events,function(event){if(event.playerId){if(!eventsGroupedByPlayerId[event.playerId]){eventsGroupedByPlayerId[event.playerId]={total:[],selected:[]}}eventsGroupedByPlayerId[event.playerId].total.push(event);if(event.isSelected){eventsGroupedByPlayerId[event.playerId].selected.push(event)}}});this.$el.find(".total-stat-value").html("");this.$el.find(".selected-stat-value").html("");this.$el.find(".has-selected-event").removeClass("has-selected-event");for(var playerId in eventsGroupedByPlayerId){var playerEvents=eventsGroupedByPlayerId[playerId];this.setPlayerCountValue(playerId,playerEvents)}},setPlayerCountValue:function(playerId,playerEvents){var $player=this.$el.find('.player[data-player-id="{0}"]'.format(playerId));if(0==$player.length){setTimeout(_.bind(function(){this.setPlayerCountValue(playerId,playerEvents)},this),1e3);return}$player.find(".total-stat-value").html(playerEvents.total.length);$player.removeClass("has-selected-event").attr("data-has-events",0!=playerEvents.total.length);$player.find(".selected-stat-value").html(playerEvents.selected.length).attr("data-value",playerEvents.selected.length);$player.addClass("has-selected-event")},setFilterCountValues:function(){for(var filterIndex in this.groupedFilters){var filterCount=this.groupedFilters[filterIndex+"_d"]?this.groupedFilters[filterIndex+"_d"]:this.groupedFilters[filterIndex];var $filter=$('[data-filter-index="{0}"]'.format(filterIndex));var homeValue=filterCount.home.length;var awayValue=filterCount.away.length;$filter.find('.filterz-value[data-field="home"]').html(homeValue).attr("data-value",homeValue).removeClass("greater").addClass(awayValue<homeValue?"greater":"");$filter.find('.filterz-value[data-field="away"]').html(awayValue).attr("data-value",awayValue).removeClass("greater").addClass(homeValue<awayValue?"greater":"");$filter.attr("data-sum",homeValue+awayValue)}},eventIsInMinuteRange:function(event){return this.expandedMinuteIsInRange(event.expandedMinute)},expandedMinuteIsInRange:function(expandedMinute){return this.expandedMinMinute<=expandedMinute&&expandedMinute<=this.expandedMaxMinute},getCountForFilterSatisfier:function(satisfier,events){if(!satisfier)return null;var counts={home:[],away:[]};var homeTeamId=this.model.get("home").teamId;var awayTeamId=this.model.get("away").teamId;var self=this;_.each(events,function(event){if(satisfier(event)&&self.eventIsInMinuteRange(event)){if(homeTeamId==event.teamId){event.field=1;counts.home.push(event)}if(awayTeamId==event.teamId){event.field=2;counts.away.push(event)}}});return counts},filterGroups:[{displayName:"chalk_clmn_shot",withDetailsSlotId:"shots",satisfier:function(e){return EventFilterz.isAnyOfTypes(e,[13,14,15,16])},filterSubGroups:[{displayName:"chalk_clmn_result",filters:[{displayName:"chalk_clmn_goal",satisfier:function(e){return EventFilterz.isOfType(e,16)&&!EventFilterz.hasSatisfier(e,"goalOwn")}},{displayName:"chalk_clmn_shot_on",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotOnTarget")}},{displayName:"chalk_clmn_shot_off",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotOffTarget")}},{displayName:"chalk_clmn_shot_post",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotOnPost")}},{displayName:"chalk_clmn_shot_blocked",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotBlocked")}},{displayName:"chalk_clmn_shot_own",satisfier:function(e){return EventFilterz.hasSatisfier(e,"goalOwn")}}]},{displayName:"chalk_clmn_zone",filters:[{displayName:"chalk_clmn_six_yard",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotSixYardBox")}},{displayName:"chalk_clmn_pen_area",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotPenaltyArea")}},{displayName:"chalk_clmn_obox",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotOboxTotal")}}]},{displayName:"chalk_clmn_situation",filters:[{displayName:"chalk_clmn_open_play",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotOpenPlay")}},{displayName:"chalk_clmn_counter",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotCounter")}},{displayName:"chalk_clmn_set_piece",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotSetPiece")}},{displayName:"chalk_clmn_pen",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["penaltyScored","penaltyMissed"])}},{displayName:"chalk_clmn_own_goal",satisfier:function(e){return EventFilterz.hasSatisfier(e,"goalOwn")}}]},{displayName:"chalk_clmn_body_part",filters:[{displayName:"chalk_clmn_right_foot",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotRightFoot")}},{displayName:"chalk_clmn_left_foot",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotLeftFoot")}},{displayName:"chalk_clmn_head",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotHead")}},{displayName:"chalk_clmn_other_body",satisfier:function(e){return EventFilterz.hasSatisfier(e,"shotObp")}}]}]},{displayName:"chalk_clmn_pass",footNote:"chalk_info_pass",displaySatisfier:function(e){return EventFilterz.hasAnySatisfier(e,["passAccurate","passInaccurate"])},satisfier:function(e){return EventFilterz.isAnyOfTypes(e,[1])},filterSubGroups:[{displayName:"chalk_clmn_pass_type",filters:[{displayName:"chalk_clmn_cross",ignoreParentSatisfier:true,satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["passCrossAccurate","passCrossInaccurate"])}},{displayName:"chalk_clmn_freekick",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["passFreekickAccurate","passFreekickInaccurate"])}},{displayName:"chalk_clmn_corner",ignoreParentSatisfier:true,satisfier:function(e){return EventFilterz.hasSatisfier(e,"passCorner")}},{displayName:"chalk_clmn_through",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["passThroughBallAccurate","passThroughBallInaccurate"])}},{displayName:"chalk_clmn_throwin",ignoreParentSatisfier:true,satisfier:function(e){return EventFilterz.hasSatisfier(e,"throwIn")}},{displayName:"chalk_clmn_pass_key",ignoreParentSatisfier:true,satisfier:function(e){return EventFilterz.hasSatisfier(e,"passKey")}}]},{displayName:"chalk_clmn_pass_length",filters:[{displayName:"chalk_clmn_pass_long",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["passLongBallAccurate","passLongBallInaccurate"])}},{displayName:"chalk_clmn_pass_short",satisfier:function(e){return!EventFilterz.hasAnySatisfier(e,["passLongBallAccurate","passLongBallInaccurate"])}}]},{displayName:"chalk_clmn_pass_height",filters:[{displayName:"chalk_clmn_pass_chipped",satisfier:function(e){return EventFilterz.hasSatisfier(e,"passChipped")}},{displayName:"chalk_clmn_pass_ground",satisfier:function(e){return!EventFilterz.hasSatisfier(e,"passChipped")}}]},{displayName:"chalk_clmn_body_part",filters:[{displayName:"chalk_clmn_head",satisfier:function(e){return EventFilterz.hasSatisfier(e,"passHead")}},{displayName:"chalk_clmn_feet",satisfier:function(e){return EventFilterz.isOfType(e,1)&&!EventFilterz.hasSatisfier(e,"passHead")}}]},{displayName:"chalk_clmn_pass_dir",filters:[{displayName:"chalk_clmn_pass_forw",satisfier:function(e){return EventFilterz.hasSatisfier(e,"passForward")}},{displayName:"chalk_clmn_pass_back",satisfier:function(e){return EventFilterz.hasSatisfier(e,"passBack")}},{displayName:"chalk_clmn_pass_left",satisfier:function(e){return EventFilterz.hasSatisfier(e,"passLeft")}},{displayName:"chalk_clmn_pass_right",satisfier:function(e){return EventFilterz.hasSatisfier(e,"passRight")}}]},{displayName:"chalk_clmn_pass_zone",filters:[{displayName:"chalk_clmn_pass_def",satisfier:function(e){return EventFilterz.hasSatisfier(e,"defensiveThird")}},{displayName:"chalk_clmn_pass_mid",satisfier:function(e){return EventFilterz.hasSatisfier(e,"midThird")}},{displayName:"chalk_clmn_pass_off",satisfier:function(e){return EventFilterz.hasSatisfier(e,"finalThird")}}]}]},{displayName:"chalk_clmn_dribble",satisfier:function(e){return EventFilterz.isAnyOfTypes(e,[3])},filterSubGroups:[{displayName:"chalk_clmn_outcome",filters:[{displayName:"chalk_clmn_succes",satisfier:function(e){return EventFilterz.isSuccessful(e)}},{displayName:"chalk_clmn_unsucces",satisfier:function(e){return!EventFilterz.isSuccessful(e)}}]}]},{displayName:"chalk_clmn_tackle_total",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["tackleWon","tackleLost","challengeLost"])},filterSubGroups:[{displayName:"chalk_clmn_outcome",filters:[{displayName:"chalk_clmn_tackle_succ",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["tackleWon","tackleLost"])}},{displayName:"chalk_clmn_tackle_unsucc",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["challengeLost"])}}]}]},{displayName:"chalk_clmn_inter",satisfier:function(e){return EventFilterz.isAnyOfTypes(e,[8])&&EventFilterz.isSuccessful(e)}},{displayName:"chalk_clmn_clear",satisfier:function(e){return EventFilterz.hasSatisfier(e,"clearanceTotal")},filterSubGroups:[{displayName:"chalk_clmn_outcome",filters:[{displayName:"chalk_clmn_clear_total",satisfier:function(e){return EventFilterz.hasSatisfier(e,"clearanceTotal")}},{displayName:"chalk_clmn_clear_line",satisfier:function(e){return EventFilterz.hasSatisfier(e,"clearanceOffTheLine")}}]},{displayName:"chalk_clmn_body_part",filters:[{displayName:"chalk_clmn_head",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["clearanceHead"])}},{displayName:"chalk_clmn_feet",satisfier:function(e){return!EventFilterz.hasAnySatisfier(e,["clearanceHead"])}}]}]},{displayName:"chalk_clmn_block",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["outfielderBlock","passCrossBlockedDefensive","outfielderBlockedPass"])},filterSubGroups:[{displayName:"chalk_clmn_block_type",filters:[{displayName:"chalk_clmn_block_shot",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["outfielderBlock"])}},{displayName:"chalk_clmn_block_cross",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["passCrossBlockedDefensive","outfielderBlockedPass"])}}]}]},{displayName:"chalk_clmn_offside",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["offsideGiven"])}},{displayName:"chalk_clmn_foul",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["foulCommitted"])}},{displayName:"chalk_clmn_aerial",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["duelAerialWon"])}},{displayName:"chalk_clmn_touch",satisfier:function(e){return e.isTouch}},{displayName:"chalk_clmn_poss_loss",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["dispossessed","turnover"])},filterSubGroups:[{displayName:"chalk_clmn_poss_type",filters:[{displayName:"chalk_clmn_disposs",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["dispossessed"])}},{displayName:"chalk_clmn_turnover",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["turnover"])}}]}]},{displayName:"chalk_clmn_error",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["errorLeadsToGoal","errorLeadsToShot"])},filterSubGroups:[{displayName:"chalk_clmn_error_type",filters:[{displayName:"chalk_clmn_error_shot",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["errorLeadsToShot"])}},{displayName:"chalk_clmn_error_goal",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["errorLeadsToGoal"])}}]}]},{displayName:"chalk_clmn_save",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["keeperSaveTotal"])}},{displayName:"chalk_clmn_claim",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["keeperClaimHighWon","keeperClaimHighLost"])}},{displayName:"chalk_clmn_punch",satisfier:function(e){return EventFilterz.hasAnySatisfier(e,["punches"])}}]});return ChalkboardView});define("views/MatchCentreHeaderView",["views/BaseView","commentaryCreator","lib/helpers/MatchCentreHelper","moment","underscore"],function(BaseView,CommentaryCreator,MatchCentreHelper,moment,_){var MatchCentreHeaderView=BaseView.extend({el:"#match-centre-header",template:"match-centre-header",events:{"click .team-name":"teamSelected","click #match-centre-key-incidents-background-mask":"closeIncidents","click #match-centre-key-incidents a":"toggleIncidents"},defaults:{teamRatings:{},minMinute:0},initialize:function(options){this.eventTypeMappings=options.eventTypeMappings;this.formationList=options.formationList;this.bindCustomEvents();this.model.on("change",_.bind(function(){this.onModelChange()},this))},onModelChange:function(){this.homeTeamId=this.model.home.get("teamId");this.awayTeamId=this.model.away.get("teamId");this.maxMinute=this.maxMinute?this.maxMinute:this.model.get("expandedMaxMinute");this.maxExpandedLimit=this.model.get("expandedMaxMinute");this.expandedMinutes=this.model.get("expandedMinutes");this.minuteInfos=MatchCentreHelper.getMinuteInfosFromExpandedMinutes(this.expandedMinutes);this.playerIdNameDictionary=this.model.get("playerIdNameDictionary");this.$el.attr("data-status-code",this.model.get("statusCode"));this.model.set("currentElapsed",this.getElapsed(),{silent:true});this.setGoalScorers();this.render();setTimeout(_.bind(this.renderTopMatchHeader,this),0)},setGoalScorers:function(){var resultGoalScorers={home:[],away:[]};var homeIncidents=this.model.home.get("incidentEvents");var awayIncidents=this.model.away.get("incidentEvents");var homeGoalsNormal=this.getGoalsNormal(homeIncidents);var homeGoalsOwn=this.getGoalsOwn(homeIncidents);var awayGoalsNormal=this.getGoalsNormal(awayIncidents);var awayGoalsOwn=this.getGoalsOwn(awayIncidents);resultGoalScorers.home=this.getJoinedAndSortedGoals(homeGoalsNormal,awayGoalsOwn);resultGoalScorers.away=this.getJoinedAndSortedGoals(awayGoalsNormal,homeGoalsOwn);this.setEventMinuteInfos(resultGoalScorers.home);this.setEventMinuteInfos(resultGoalScorers.away);this.setPlayerNamesForGoals(resultGoalScorers.home);this.setPlayerNamesForGoals(resultGoalScorers.away);this.model.set("goalScorers",resultGoalScorers,{silent:true})},setPlayerNamesForGoals:function(goals){_.each(goals,_.bind(function(goal){goal.playerName=this.playerIdNameDictionary[goal.playerId]},this))},getGoalsNormal:function(incidents){return _.filter(incidents,function(incident){return incident.type.value==16&&!incident.isOwnGoal})},getGoalsOwn:function(incidents){return _.filter(incidents,function(incident){return incident.isOwnGoal})},getJoinedAndSortedGoals:function(goalsNormal,goalsOwn){return _.union(goalsNormal,goalsOwn).sort(function(a,b){return a.expandedMinute-b.expandedMinute})},setEventMinuteInfos:function(events){var self=this;_.each(events,function(event){event.minuteInfo=self.minuteInfos[event.expandedMinute];if(5==event.period.value){event.minuteInfo={minuteString:"Pen",isPenaltyShootOut:true}}});return events},setCommentaryCreator:function(){if(!this.commentaryCreator){this.playerIdNameDictionary=this.model.get("playerIdNameDictionary");this.commentaryCreator=new CommentaryCreator(this.playerIdNameDictionary,this.formationList)}},toggleIncidents:function(e){if(!this.hasIncidents)return;var $keyIncidents=this.$el.find(".match-centre-key-incidents");var $keyIncidentsMask=this.$el.find("#match-centre-key-incidents-background-mask");$keyIncidents.toggleClass("expanded");$keyIncidentsMask.toggleClass("expanded");this.incidentsExpanded=$keyIncidents.hasClass("expanded")},closeIncidents:function(){var $keyIncidents=this.$el.find(".match-centre-key-incidents");var $keyIncidentsMask=this.$el.find("#match-centre-key-incidents-background-mask");$keyIncidents.removeClass("expanded");$keyIncidentsMask.toggleClass("expanded");this.incidentsExpanded=false},bindCustomEvents:function(){if(!this.customEventsBound){this.customEventsBound=true;this.$bindTo(this.$el,"minutes-range-changed-for-match-header",_.bind(function(e,range){if(!range)return;var range1=range[0];var range2=range[1];this.minMinute=Math.min(range1.expandedMinute,range2.expandedMinute);this.maxMinute=Math.max(range1.expandedMinute,range2.expandedMinute);this.render()},this));this.$bindTo(this.$el,"team-rating-changed-for-header",_.bind(function(e,teamRatings){this.teamRatings=teamRatings;this.displayTeamRatings()},this))}},displayTeamRatings:function(){this.displayTeamRating("home");this.displayTeamRating("away")},displayTeamRating:function(field){var $fieldRating=this.$el.find('[data-field="{0}"] .team-rating'.format(field));$fieldRating.html(this.teamRatings[field])},teamSelected:function(){this.$el.trigger("team-selected")},renderTopMatchHeader:function(){var $topMatchHeader=$("#match-header");var topMatchHeaderData=this.getTopMatchHeaderData();NG.renderDustTemplate("match-centre-top-header",topMatchHeaderData,function(data){$topMatchHeader.html(data)})},unexpectedTerminationStatuses:[2,5,7],hasMatchTerminatedUnExpectedly:function(){return-1!=this.unexpectedTerminationStatuses.indexOf(this.model.get("statusCode"))},getTopMatchHeaderData:function(){return{homeTeamName:this.model.home.get("name"),homeTeamCountryName:this.model.home.get("countryName"),homeTeamId:this.model.home.get("teamId"),awayTeamName:this.model.away.get("name"),awayTeamCountryName:this.model.away.get("countryName"),awayTeamId:this.model.away.get("teamId"),score:this.model.get("score"),htScore:this.model.get("htScore"),ftScore:this.model.get("ftScore"),etScore:this.model.get("etScore"),pkScore:this.model.get("pkScore"),matchTerminatedUnExpectedly:this.hasMatchTerminatedUnExpectedly(),elapsed:this.getElapsed(),finished:6==this.model.get("statusCode"),startTime:this.getDateWithFormat(this.model.get("startTime"),"HH:mm"),startDate:this.getDateWithFormat(this.model.get("startDate"),"ddd, DD-MMM-YY")}},getElapsed:function(){var elapsed=this.model.get("elapsed");if(isNaN(elapsed)||elapsed==""){return elapsed}else{var maxMinuteInfo=this.minuteInfos[this.maxExpandedLimit];return maxMinuteInfo.minuteText}},getDateWithFormat:function(dateString,format){return moment.utc(dateString,["YYYY-MM-DD HH:mm:SS","DD.MM.YYYY HH:mm:SS"]).format(format)},setTeamInfosInRange:function(){this.setTeamInfoInRange(this.model.home);this.setTeamInfoInRange(this.model.away)},setTeamInfoInRange:function(team){var formation=team.getFormation(this.minMinute,this.maxMinute,this.maxExpandedLimit,this.model.get("statusCode"));if(!formation)return;var teamField=team.get("field");var $teamInfo=this.$el.find('.match-centre-header-team[data-field="{0}"]'.format(teamField));this.setFormationNameForTeam($teamInfo,formation.formationName)},setFormationNameForTeam:function($teamInfo,formationName){var hypenedFormatioName=formationName.split("").join("-");$teamInfo.find(".formation").html(hypenedFormatioName)},onRender:function(){this.setTeamInfosInRange();this.displayTeamRatings();if(this.incidentsExpanded){this.$el.find(".match-centre-key-incidents").addClass("expanded")}var outerHeight=this.$el.height();this.$el.css("min-height",outerHeight)}});return MatchCentreHeaderView});define("views/LoadingView",["views/BaseView","lib/dust.ws"],function(BaseView){var LoadingView=BaseView.extend({template:"spinning-loading-animation",className:"loading-wrapper",initialize:function(options){this.el=options.el;this.firstRender=true;this.renderOnInitialize=options.renderOnInitialize;this.render({firstRender:this.firstRender});this.show()},show:function(){this.$el.show()},hide:function(){if(this.firstRender){this.firstRender=false;this.render({firstRender:this.firstRender})}this.$el.hide()},onRender:function(){if(this.renderOnInitialize!==false){this.show();this.renderOnInitialize=false}this.$el.addClass("loading-wrapper")}});return LoadingView});(function(w){var heatmapFactory=function(){var store=function store(hmap){var _={data:[],heatmap:hmap};this.max=1;this.get=function(key){return _[key]};this.set=function(key,value){_[key]=value}};store.prototype={addDataPoint:function(x,y){if(x<0||y<0)return;var me=this,heatmap=me.get("heatmap"),data=me.get("data");if(!data[x])data[x]=[];if(!data[x][y])data[x][y]=0;data[x][y]+=arguments.length<3?1:arguments[2];me.set("data",data);if(me.max<data[x][y]){heatmap.get("actx").clearRect(0,0,heatmap.get("width"),heatmap.get("height"));me.setDataSet({max:data[x][y],data:data},true);return}heatmap.drawAlpha(x,y,data[x][y],true)},setDataSet:function(obj,internal){var me=this,heatmap=me.get("heatmap"),data=[],d=obj.data,dlen=d.length;heatmap.clear();this.max=obj.max;heatmap.get("legend")&&heatmap.get("legend").update(obj.max);if(internal!=null&&internal){for(var one in d){if(one===undefined)continue;for(var two in d[one]){if(two===undefined)continue;heatmap.drawAlpha(one,two,d[one][two],false)}}}else{while(dlen--){var point=d[dlen];heatmap.drawAlpha(point.x,point.y,point.count,false);if(!data[point.x])data[point.x]=[];if(!data[point.x][point.y])data[point.x][point.y]=0;data[point.x][point.y]=point.count}}heatmap.colorize();this.set("data",d)},exportDataSet:function(){var me=this,data=me.get("data"),exportData=[];for(var one in data){if(one===undefined)continue;for(var two in data[one]){if(two===undefined)continue;exportData.push({x:parseInt(one,10),y:parseInt(two,10),count:data[one][two]})}}return{max:me.max,data:exportData}},generateRandomDataSet:function(points){var heatmap=this.get("heatmap"),w=heatmap.get("width"),h=heatmap.get("height");var randomset={},max=Math.floor(Math.random()*1e3+1);randomset.max=max;var data=[];while(points--){data.push({x:Math.floor(Math.random()*w+1),y:Math.floor(Math.random()*h+1),count:Math.floor(Math.random()*max+1)})}randomset.data=data;this.setDataSet(randomset)}};var legend=function legend(config){this.config=config;var _={element:null,labelsEl:null,gradientCfg:null,ctx:null};this.get=function(key){return _[key]};this.set=function(key,value){_[key]=value};this.init()};legend.prototype={init:function(){var me=this,config=me.config,title=config.title||"Legend",position=config.position,offset=config.offset||10,gconfig=config.gradient,labelsEl=document.createElement("ul"),labelsHtml="",grad,element,gradient,positionCss="";me.processGradientObject();if(position.indexOf("t")>-1){positionCss+="top:"+offset+"px;"}else{positionCss+="bottom:"+offset+"px;"}if(position.indexOf("l")>-1){positionCss+="left:"+offset+"px;"}else{positionCss+="right:"+offset+"px;"}element=document.createElement("div");element.style.cssText="border-radius:5px;position:absolute;"+positionCss+"font-family:Helvetica; width:256px;z-index:10000000000; background:rgba(255,255,255,1);padding:10px;border:1px solid black;margin:0;";element.innerHTML="<h3 style='padding:0;margin:0;text-align:center;font-size:16px;'>"+title+"</h3>";labelsEl.style.cssText="position:relative;font-size:12px;display:block;list-style:none;list-style-type:none;margin:0;height:15px;";gradient=document.createElement("div");gradient.style.cssText=["position:relative;display:block;width:256px;height:15px;border-bottom:1px solid black; background-image:url(",me.createGradientImage(),");"].join("");element.appendChild(labelsEl);element.appendChild(gradient);me.set("element",element);me.set("labelsEl",labelsEl);me.update(1)},processGradientObject:function(){var me=this,gradientConfig=this.config.gradient,gradientArr=[];for(var key in gradientConfig){if(gradientConfig.hasOwnProperty(key)){gradientArr.push({stop:key,value:gradientConfig[key]})}}gradientArr.sort(function(a,b){return a.stop-b.stop});gradientArr.unshift({stop:0,value:"rgba(0,0,0,0)"});me.set("gradientArr",gradientArr)},createGradientImage:function(){var me=this,gradArr=me.get("gradientArr"),length=gradArr.length,canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),grad;canvas.width="256";canvas.height="15";grad=ctx.createLinearGradient(0,5,256,10);for(var i=0;i<length;i++){grad.addColorStop(1/(length-1)*i,gradArr[i].value)}ctx.fillStyle=grad;ctx.fillRect(0,5,256,10);ctx.strokeStyle="black";ctx.beginPath();for(var i=0;i<length;i++){ctx.moveTo((1/(length-1)*i*256>>0)+.5,0);ctx.lineTo((1/(length-1)*i*256>>0)+.5,i==0?15:5)}ctx.moveTo(255.5,0);ctx.lineTo(255.5,15);ctx.moveTo(255.5,4.5);ctx.lineTo(0,4.5);ctx.stroke();me.set("ctx",ctx);return canvas.toDataURL()},getElement:function(){return this.get("element")},update:function(max){var me=this,gradient=me.get("gradientArr"),ctx=me.get("ctx"),labels=me.get("labelsEl"),labelText,labelsHtml="",offset;for(var i=0;i<gradient.length;i++){labelText=max*gradient[i].stop>>0;offset=ctx.measureText(labelText).width/2>>0;if(i==0){offset=0}if(i==gradient.length-1){offset*=2}labelsHtml+='<li style="position:absolute;left:'+(((1/(gradient.length-1)*i*256||0)>>0)-offset+.5)+'px">'+labelText+"</li>"}labels.innerHTML=labelsHtml}};var heatmap=function heatmap(config){var _={radius:40,element:{},canvas:{},acanvas:{},ctx:{},actx:{},legend:null,visible:true,width:0,height:0,max:false,gradient:false,opacity:180,premultiplyAlpha:false,bounds:{l:1e3,r:0,t:1e3,b:0},debug:false};this.store=new store(this);this.get=function(key){return _[key]};this.set=function(key,value){_[key]=value};this.configure(config);this.init()};heatmap.prototype={configure:function(config){var me=this,rout,rin;me.set("radius",config["radius"]||40);me.set("element",config.element instanceof Object?config.element:document.getElementById(config.element));me.set("visible",config.visible!=null?config.visible:true);me.set("max",config.max||false);me.set("gradient",config.gradient||{.45:"rgb(0,0,255)",.55:"rgb(0,255,255)",.65:"rgb(0,255,0)",.95:"yellow",1:"rgb(255,0,0)"});me.set("opacity",parseInt(255/(100/config.opacity),10)||180);me.set("width",config.width||0);me.set("height",config.height||0);me.set("debug",config.debug);if(config.legend){var legendCfg=config.legend;legendCfg.gradient=me.get("gradient");me.set("legend",new legend(legendCfg))}},resize:function(){var me=this,element=me.get("element"),canvas=me.get("canvas"),acanvas=me.get("acanvas");canvas.width=acanvas.width=me.get("width")||element.style.width.replace(/px/,"")||me.getWidth(element);this.set("width",canvas.width);canvas.height=acanvas.height=me.get("height")||element.style.height.replace(/px/,"")||me.getHeight(element);this.set("height",canvas.height)},init:function(){var me=this,canvas=document.createElement("canvas"),acanvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),actx=acanvas.getContext("2d"),element=me.get("element");me.initColorPalette();me.set("canvas",canvas);me.set("ctx",ctx);me.set("acanvas",acanvas);me.set("actx",actx);me.resize();canvas.style.cssText=acanvas.style.cssText="position:absolute;top:0;left:0;z-index:10000000;";if(!me.get("visible"))canvas.style.display="none";element.appendChild(canvas);if(me.get("legend")){element.appendChild(me.get("legend").getElement())}if(me.get("debug"))document.body.appendChild(acanvas);actx.shadowOffsetX=15e3;actx.shadowOffsetY=15e3;actx.shadowBlur=15},initColorPalette:function(){var me=this,canvas=document.createElement("canvas"),gradient=me.get("gradient"),ctx,grad,testData;canvas.width="1";canvas.height="256";ctx=canvas.getContext("2d");grad=ctx.createLinearGradient(0,0,1,256);testData=ctx.getImageData(0,0,1,1);testData.data[0]=testData.data[3]=64;testData.data[1]=testData.data[2]=0;ctx.putImageData(testData,0,0);testData=ctx.getImageData(0,0,1,1);me.set("premultiplyAlpha",testData.data[0]<60||testData.data[0]>70);for(var x in gradient){grad.addColorStop(x,gradient[x])}ctx.fillStyle=grad;ctx.fillRect(0,0,1,256);me.set("gradient",ctx.getImageData(0,0,1,256).data)},getWidth:function(element){var width=element.offsetWidth;if(element.style.paddingLeft){width+=element.style.paddingLeft}if(element.style.paddingRight){width+=element.style.paddingRight}return width},getHeight:function(element){var height=element.offsetHeight;if(element.style.paddingTop){height+=element.style.paddingTop}if(element.style.paddingBottom){height+=element.style.paddingBottom}return height},colorize:function(x,y){var me=this,width=me.get("width"),radius=me.get("radius"),height=me.get("height"),actx=me.get("actx"),ctx=me.get("ctx"),x2=radius*3,premultiplyAlpha=me.get("premultiplyAlpha"),palette=me.get("gradient"),opacity=me.get("opacity"),bounds=me.get("bounds"),left,top,bottom,right,image,imageData,length,alpha,offset,finalAlpha;if(x!=null&&y!=null){if(x+x2>width){x=width-x2}if(x<0){x=0}if(y<0){y=0}if(y+x2>height){y=height-x2}left=x;top=y;right=x+x2;bottom=y+x2}else{if(bounds["l"]<0){left=0}else{left=bounds["l"]}if(bounds["r"]>width){right=width}else{right=bounds["r"]}if(bounds["t"]<0){top=0}else{top=bounds["t"]}if(bounds["b"]>height){bottom=height}else{bottom=bounds["b"]}}image=actx.getImageData(left,top,right-left,bottom-top);imageData=image.data;length=imageData.length;for(var i=3;i<length;i+=4){alpha=imageData[i],offset=alpha*4;if(!offset)continue;finalAlpha=alpha<opacity?alpha:opacity;imageData[i-3]=palette[offset];imageData[i-2]=palette[offset+1];imageData[i-1]=palette[offset+2];if(premultiplyAlpha){imageData[i-3]/=255/finalAlpha;imageData[i-2]/=255/finalAlpha;imageData[i-1]/=255/finalAlpha}imageData[i]=finalAlpha}image.data=imageData;ctx.putImageData(image,left,top)},drawAlpha:function(x,y,count,colorize){var me=this,radius=me.get("radius"),ctx=me.get("actx"),max=me.get("max"),bounds=me.get("bounds"),xb=x-1.5*radius>>0,yb=y-1.5*radius>>0,xc=x+1.5*radius>>0,yc=y+1.5*radius>>0;ctx.shadowColor="rgba(0,0,0,"+(count?count/me.store.max:"0.1")+")";ctx.shadowOffsetX=15e3;ctx.shadowOffsetY=15e3;ctx.shadowBlur=15;ctx.beginPath();ctx.arc(x-15e3,y-15e3,radius,0,Math.PI*2,true);ctx.closePath();ctx.fill();if(colorize){me.colorize(xb,yb)}else{if(xb<bounds["l"]){bounds["l"]=xb}if(yb<bounds["t"]){bounds["t"]=yb}if(xc>bounds["r"]){bounds["r"]=xc}if(yc>bounds["b"]){bounds["b"]=yc}}},toggleDisplay:function(){var me=this,visible=me.get("visible"),canvas=me.get("canvas");if(!visible)canvas.style.display="block";else canvas.style.display="none";me.set("visible",!visible)},getImageData:function(){return this.get("canvas").toDataURL()},clear:function(){var me=this,w=me.get("width"),h=me.get("height");me.store.set("data",[]);me.get("ctx").clearRect(0,0,w,h);me.get("actx").clearRect(0,0,w,h)},cleanup:function(){var me=this;me.get("element").removeChild(me.get("canvas"))}};return{create:function(config){return new heatmap(config)},util:{mousePosition:function(ev){var x,y;if(ev.layerX){x=ev.layerX;y=ev.layerY}else if(ev.offsetX){x=ev.offsetX;y=ev.offsetY}if(typeof x=="undefined")return;return[x,y]}}}}();w.h337=w.heatmapFactory=heatmapFactory})(window);define("heatmap",function(){});define("canvas/NG.Stats.HeatMaps",["canvas/NG.Stats.Base","heatmap"],function(NGStatsBase){return NGStatsBase.extend({draw:function(data){this.clearCanvas();if(data&&data.heatmap&&data.heatmapData){data.heatmap.store.setDataSet(data.heatmapData)}}})});define("views/HeatmapsView",["views/BaseView","canvas/NG.Stats.HeatMaps","wscanvas","underscore","lib/dust.ws","plugins/jquery.selected"],function(BaseView,NGStatsHeatMaps,WSCanvas,_){var HeatmapsView=BaseView.extend({el:"#heatmaps",template:"heatmaps",defaults:{pitchOptions:{width:320,height:200,columns:20,rows:20,boxMargin:1},$teamInfos:{},maxCounts:{home:null,away:null},playerTouchesUpdated:{home:false,away:false},pitchesData:{home:[],away:[]},heatmaps:{home:[],away:[]},teamIds:{home:[],away:[]}},events:{"click .player":"playerSelected","click .team-name":"openPicker","click .team":"teamSelected"},initialize:function(){this.pitchOptions.boxWidth=this.pitchOptions.width/parseFloat(this.pitchOptions.columns);this.pitchOptions.boxHeight=this.pitchOptions.height/parseFloat(this.pitchOptions.rows);this.render()},onModelChange:function(){this.playerTouchesUpdated={home:false,away:false};this.teamIds.home=this.model.home.get("teamId");this.teamIds.away=this.model.away.get("teamId");if(!this.selectedPlayers){this.selectedPlayers={home:_.pluck(this.model.home.get("players"),"playerId"),away:_.pluck(this.model.away.get("players"),"playerId")}}this.setTeams();this.drawPitches();this.updateTouchesInfo()},openPicker:function(e){var OPEN_CALSS="open";var el=$(e.currentTarget);var field=el.data("field");var str='.team-players[data-field="'+field+'"]';var target=$(str);if(target.hasClass(OPEN_CALSS)){target.removeClass(OPEN_CALSS);el.removeClass(OPEN_CALSS)}else{target.addClass(OPEN_CALSS);el.addClass(OPEN_CALSS)}},setTeams:function(){this.setTeam("home");this.setTeam("away")},setTeam:function(field){var $team=this.$el.find('.team-players[data-field="{0}"]'.format(field));var team=this.model[field].toJSON();this.$el.find('.team-name[data-field="{0}"]'.format(field)).html(team["name"]);NG.renderDustTemplate("heatmap-team",this.model[field].toJSON(),_.bind(function(teamHtml){$team.html(teamHtml)},this));this.setPlayerSelectedStatuses($team,field)},setPlayerSelectedStatuses:function($team,field){var $players=$team.find(".player");var selectedPlayersForTeam=this.selectedPlayers[field];$players.each(function(){var $player=$(this);var playerId=parseInt($player.attr("data-player-id"),10);if(_.contains(selectedPlayersForTeam,playerId)){$player.addClass("selected")}else{$player.removeClass("selected")}$player.find("input").selected($player.hasClass("selected"))});if(0==selectedPlayersForTeam.length){$team.find(".team").removeClass("selected");$team.find(".team input").selected(false)}},updateTouchesInfo:function(){this.updateTouchesInfoForTeam("home");this.updateTouchesInfoForTeam("away")},updateTouchesInfoForTeam:function(field){if(!this.pitchesData[field])return;if(!this.$teamInfos[field]){this.$teamInfos[field]=$('.heatmap-info-for-team[data-field="{0}"]'.format(field))}var numberOfCurrentTouches=this.pitchesData[field].length;this.$teamInfos[field].find(".touch-count").html(numberOfCurrentTouches).attr("data-value",numberOfCurrentTouches)},playerSelected:function(e){var $player=$(e.currentTarget);$player.toggleClass("selected");$player.find("input").selected($player.hasClass("selected"));var isFirstEleven=$.isEmptyObject($player.attr("data-is-first-eleven"));var isSubbedIn=$.isEmptyObject($player.attr("data-subbed-in"));if(!isFirstEleven&&!isSubbedIn)return;var playerId=parseInt($player.attr("data-player-id"),10);var field=$player.attr("data-field");if(-1!=_.indexOf(this.selectedPlayers[field],playerId)){this.selectedPlayers[field]=_.filter(this.selectedPlayers[field],function(pId){return pId!=parseInt(playerId,10)})}else{this.selectedPlayers[field].push(playerId)}this.drawPitches();this.updateTouchesInfo()},teamSelected:function(e){var $team=$(e.currentTarget);var field=$team.attr("data-field");$team.toggleClass("selected");$team.find("input").selected($team.hasClass("selected"));var teamIsSelected=$team.hasClass("selected");if(teamIsSelected){this.$el.find("[data-field={0}] .player".format(field)).addClass("selected");this.$el.find("[data-field={0}] .player input".format(field)).selected(true);this.selectedPlayers[field]=_.pluck(this.model[field].get("players"),"playerId")}else{this.$el.find("[data-field={0}] .player".format(field)).removeClass("selected");this.$el.find("[data-field={0}] .player input".format(field)).selected(false);this.selectedPlayers[field]=[]}this.drawPitches();this.updateTouchesInfo()},drawPitches:function(){if(!this.pitches){this.pitches={home:this.getPitchForTeam("home"),away:this.getPitchForTeam("away")}}this.maxCount=0;this.loadPitchForTeam("home");this.loadPitchForTeam("away")},loadPitchForTeam:function(field){var heatmapDataForTeam=this.getHeatmapDataForTeam(field);this.pitches[field].load({heatmap:this.heatmaps[field],heatmapData:heatmapDataForTeam});this.updateTouchesInfoForPlayers(field,heatmapDataForTeam.eventCounts)},updateTouchesInfoForPlayers:function(field,eventCounts){if(this.playerTouchesUpdated[field])return;this.playerTouchesUpdated[field]=true;for(var playerId in eventCounts){var eventCountForPlayer=eventCounts[playerId];$(this.el).find('[data-player-id="{0}"] .total-stat-value'.format(playerId)).html(eventCountForPlayer)}},getHeatmapDataForTeam:function(field){var selectedPlayerIds=this.getSelectedPlayerIdsForTeam(field);return this.getHeatmapDataFromPlayers(selectedPlayerIds,field)},getHeatmapDataFromPlayers:function(selectedPlayerIds,field){this.pitchesData[field]=this.getPlayerEventsForHeatmap(selectedPlayerIds);var eventsForHeatmap=this.pitchesData[field];var eventCounts={};var groupedCoordinates=_.countBy(eventsForHeatmap,_.bind(function(playerEvent){if(!eventCounts[playerEvent.playerId]){eventCounts[playerEvent.playerId]=0}eventCounts[playerEvent.playerId]++;var coordinateRangeX=this.getCoordinateRange(playerEvent.x,0,this.pitchOptions.columns);var coordinateRangeY=this.getCoordinateRange(playerEvent.y,0,this.pitchOptions.rows);return"{0}_{1}".format(coordinateRangeX,coordinateRangeY)},this));var resultCounts=[];var maxCount=0;for(var groupedCoordinate in groupedCoordinates){var coordinates=groupedCoordinate.split("_");var count=groupedCoordinates[groupedCoordinate];maxCount=Math.max(count,maxCount);var coordinateX=parseInt(coordinates[0],10);coordinateX="home"==field?coordinateX:this.pitchOptions.columns-coordinateX;var coordinateY=parseInt(coordinates[1],10);coordinateY="home"==field?this.pitchOptions.rows-coordinateY:coordinateY;var boxX=this.pitchOptions.boxWidth*coordinateX;var boxY=this.pitchOptions.boxHeight*coordinateY;resultCounts.push({x:boxX,y:boxY,count:groupedCoordinates[groupedCoordinate]})}this.maxCount=Math.max(this.maxCount,maxCount);if(!this.maxCounts[field]){this.maxCounts[field]=maxCount}return{data:resultCounts,max:10,eventCounts:eventCounts}},getCoordinateRange:function(coordinate,minRange,maxRange){return Math.floor((maxRange-minRange)*(coordinate/parseFloat(100))+minRange)},getPlayerEventsForHeatmap:function(selectedPlayerIds){return _.filter(this.model.get("events"),function(event){return-1!=_.indexOf(selectedPlayerIds,event.playerId)&&event.isTouch})},getSelectedPlayerIdsForTeam:function(field){return this.selectedPlayers[field]},getPitchForTeam:function(field){var pitchSelector="heatmaps .canvas-container[data-field={0}]".format(field);var $pitch=$("#"+pitchSelector);var config={element:$pitch[0],radius:20,opacity:50};var heatmap=h337.create(config);this.heatmaps[field]=heatmap;var eventsCanvasConfig={heatmap:heatmap,view:{width:this.pitchOptions.width,height:this.pitchOptions.height,renderTo:pitchSelector},model:{instanceType:NGStatsHeatMaps}};return new WSCanvas(eventsCanvasConfig)}});return HeatmapsView});define("views/LiveStreamView",["views/BaseView"],function(BaseView){var LiveStreamView=BaseView.extend({el:"#livestream",template:"livestream",defaults:{},events:{"mouseover .image-container .play-btn":"mouseoverevent","mouseout .image-container .play-btn":"mouseoutevent"},initialize:function(options){this.matchName=options.matchName;this.affiliateId=options.affiliateId;this.render()},templateContext:function(){return{matchName:this.matchName,affiliateId:this.affiliateId}},mouseoverevent:function(e){$(e.target).attr("src","/img/playbtn-alt.png")},mouseoutevent:function(e){$(e.target).attr("src","/img/playbtn.png")}});return LiveStreamView});define("views/MatchCentreIncidentsView",["views/BaseView","commentaryCreator","lib/helpers/MatchCentreHelper","underscore"],function(BaseView,CommentaryCreator,MatchCentreHelper,_){var MatchCentreIncidentsView=BaseView.extend({el:"#live-incidents",template:"match-centre-incidents",isActive:true,defaults:{minMinute:0},initialize:function(options){this.eventTypeMappings=options.eventTypeMappings;this.formationList=options.formationList},onModelChange:function(){this.homeTeamId=this.model.home.get("teamId");this.awayTeamId=this.model.away.get("teamId");this.maxExpandedLimit=this.model.get("expandedMaxMinute");this.maxMinute=this.maxMinute?this.maxMinute:this.maxExpandedLimit;this.expandedMinutes=this.model.get("expandedMinutes");this.minuteInfos=MatchCentreHelper.getMinuteInfosFromExpandedMinutes(this.expandedMinutes);this.setCommentaryCreator();this.setIncidents();this.render()},setEventMinuteInfos:function(events){var self=this;_.each(events,function(event){event.minuteInfo=self.minuteInfos[event.expandedMinute];if(5==event.period.value){event.minuteInfo={minuteString:"Pen",isPenaltyShootOut:true}}});return events},setCommentaryCreator:function(){if(!this.commentaryCreator){this.playerIdNameDictionary=this.model.get("playerIdNameDictionary");this.commentaryCreator=new CommentaryCreator(this.playerIdNameDictionary,this.formationList)}},setIncidents:function(){var homeIncidents=this.model.home.get("incidentEvents");var awayIncidents=this.model.away.get("incidentEvents");var matchIncidents=_.union(homeIncidents,awayIncidents);matchIncidents=matchIncidents.sort(function(a,b){return a.expandedMinute-b.expandedMinute});var incidentsByGroups=[],homeScore=0,awayScore=0,lastMinute=-1;var self=this;_.each(matchIncidents,function(matchIncident){var isHomeTeam=self.homeTeamId==matchIncident.teamId;var isAwayTeam=!isHomeTeam;matchIncident.satisfiers=MatchCentreHelper.getKeyIncidentEventSatisfiers(matchIncident,self.eventTypeMappings);if(MatchCentreHelper.eventIsKeyIncident(matchIncident)){if(matchIncident.isGoal||matchIncident.isOwnGoal){if(matchIncident.isOwnGoal){if(isHomeTeam){awayScore++}if(isAwayTeam){homeScore++}}else{if(isHomeTeam){homeScore++}else{awayScore++}}matchIncident.score="{0}-{1}".format(homeScore,awayScore)}matchIncident.playerName=self.playerIdNameDictionary[matchIncident.playerId];matchIncident.text=self.commentaryCreator.getSentence(matchIncident,matchIncidents);var expandedMinute=matchIncident.expandedMinute;var minuteInfo=self.minuteInfos[expandedMinute];if(5==matchIncident.period.value){minuteInfo={minuteString:"Pen",isPenaltyShootout:true};expandedMinute=99999}if(lastMinute<expandedMinute){incidentsByGroups.push({minuteInfo:minuteInfo,home:[],away:[]});lastMinute=expandedMinute}if(isHomeTeam&&!matchIncident.isOwnGoal||isAwayTeam&&matchIncident.isOwnGoal){incidentsByGroups[incidentsByGroups.length-1].home.push(matchIncident)}else if(isAwayTeam&&!matchIncident.isOwnGoal||isHomeTeam&&matchIncident.isOwnGoal){incidentsByGroups[incidentsByGroups.length-1].away.push(matchIncident)}}});this.hasIncidents=0!=incidentsByGroups.length;this.model.set("hasIncidents",true,{silent:true});this.model.set("incidents",matchIncidents,{silent:true});this.model.set("incidentsByGroups",incidentsByGroups,{silent:true})},onRender:function(){var outerHeight=this.$el.height();this.$el.css("min-height",outerHeight)}});return MatchCentreIncidentsView});define("mod_matchcentre",["params","WS/WS.Localizer","views/MatchCentreView","views/MatchCentreCommentaryView","views/ChalkboardView","views/MatchCentreHeaderView","models/MatchCentreModel","views/LoadingView","views/HeatmapsView","views/LiveStreamView","views/MatchCentreIncidentsView","lib/helpers/EventFilterHelper","underscore","jquery"],function(params,WSLocalizer,MatchCentreView,MatchCentreCommentaryView,ChalkboardView,MatchCentreHeaderView,MatchCentreModel,LoadingView,HeatmapsView,LiveStreamView,MatchCentreIncidentsView,EventFilterHelper,_){return function(){var $liveMatch=$("#live-match");var $lastUpdatedAt=$("#match-last-updated-at");var eventTypeMappings=_.invert(params.config.args.matchCentreEventTypeJson);if(params.config.args.matchCentreData){var model=new MatchCentreModel(params.config.args.matchCentreData);model.id=params.config.args.matchId;window.model=model;var loadingView=new LoadingView({el:"#match-loading-view"});model.bind("before-fetch",function(){$liveMatch.attr("data-mode",1);loadingView.show()}).bind("fetched-with-success",function(){$liveMatch.attr("data-mode",2);loadingView.hide()}).bind("fetched-with-error",function(){$liveMatch.attr("data-mode",3);loadingView.hide()}).bind("is-not-valid",function(){$liveMatch.attr("data-mode",3);loadingView.hide()});var tickerIntervalId;var startTicker=function(){clearInterval(tickerIntervalId);var timestamp=this.get("timeStamp");var timeoutInSeconds=this.get("timeoutInSeconds");var isLive=3==this.get("statusCode");var updateTicker=function(){if(0<timeoutInSeconds){$lastUpdatedAt.html(WSLocalizer.dbRes("MatchCentre","live_info_refreshed_in").format(timeoutInSeconds--))}};if(!isLive){if(timestamp){$lastUpdatedAt.html(WSLocalizer.dbRes("MatchCentre","live_info_last_update").format(timestamp))}}else{tickerIntervalId=setInterval(updateTicker,1e3)}};var rmultiDash=/([a-z])([A-Z])/g;var setIncidentIconTexts=function(){$(".incident-icon-legend").each(function(){var $icon=$(this).find(".incident-icon");var label=$(this).find("label").html();var data=$icon.data();for(var attr in data){var name="data-"+attr.replace(rmultiDash,"$1-$2").toLowerCase();var value=data[attr];var selector=".incident-icon["+name+(value?"="+value:"")+"]";$("body").on("DOMNodeInserted",selector,function(){$(this).attr("title",label)})}})};model.on("change",function(){$liveMatch.attr("data-match-status-code",this.get("statusCode"));_.bind(startTicker,this)();setTimeout(setIncidentIconTexts(),3e3)});EventFilterHelper.init(params.config.args.matchCentreEventTypeJson);var matchCentre=new MatchCentreView({eventTypeMappings:eventTypeMappings,formationList:params.config.args.formationIdNameMappings});var matchCentreCommentary=new MatchCentreCommentaryView({el:"#match-commentary",eventTypeMappings:eventTypeMappings,formationList:params.config.args.formationIdNameMappings});var chalkboard=new ChalkboardView({eventTypes:params.config.args.matchCentreEventTypeJson,eventTypeMappings:eventTypeMappings,formationList:params.config.args.formationIdNameMappings});var matchCentreHeader=new MatchCentreHeaderView({model:model,eventTypeMappings:eventTypeMappings,formationList:params.config.args.formationIdNameMappings});var matchCentreIncidents=new MatchCentreIncidentsView({eventTypeMappings:eventTypeMappings,formationList:params.config.args.formationIdNameMappings});var heatmaps=new HeatmapsView({});matchCentre.setModel(model);matchCentreIncidents.setModel(model);chalkboard.setModel(model);matchCentreCommentary.setModel(model);heatmaps.setModel(model);var customEventsBound=false;var bindCustomEvents=function(){if(customEventsBound)return;customEventsBound=true;matchCentre.$bindTo(matchCentre.$el,"comments-summary-show-more",function(){$('#live-match-options [href="#match-commentary"]').click()});matchCentre.$bindTo(matchCentre.$el,"minutes-range-changed-for-match-centre",function(e,range){matchCentreHeader.$el.trigger("minutes-range-changed-for-match-header",[range])});matchCentre.$bindTo(matchCentre.$el,"team-rating-changed",function(e,teamRatings){matchCentreHeader.$el.trigger("team-rating-changed-for-header",[teamRatings])});matchCentreHeader.$bindTo(matchCentreHeader.$el,"team-selected",function(e){matchCentre.$el.trigger("team-mode-selected")});$(".simple-tabs").on("click","a",function(e){e.preventDefault();var $tabs=$(e.delegateTarget);var $tab=$(e.currentTarget);var oldId=$tabs.find(".selected").removeClass("selected").attr("href");$tab.addClass("selected");$(oldId).removeClass("is-active-panel");var id=$tab.attr("href");var $view=$(id).addClass("is-active-panel");$view.attr("data-initialized",true);if("#match-centre"==id){matchCentre.activate();matchCentreCommentary.deactivate();chalkboard.deactivate();heatmaps.deactivate()}else if("#match-commentary"==id){matchCentre.deactivate();matchCentreCommentary.activate();chalkboard.deactivate();heatmaps.deactivate()}else if("#chalkboard"==id){matchCentre.deactivate();matchCentreCommentary.deactivate();chalkboard.activate();heatmaps.deactivate()}else if("#heatmaps"==id){matchCentre.deactivate();matchCentreCommentary.deactivate();chalkboard.deactivate();heatmaps.activate();liveStream.deactivate()}else if("#livestream"==id){matchCentre.deactivate();matchCentreCommentary.deactivate();chalkboard.deactivate();heatmaps.deactivate()}return false})};bindCustomEvents()}}});require(["params","mod_matches-common","mod_matchcentre"],function(params,mc,MatchCentre){mc();MatchCentre()});define("match-centre",function(){});!function(){function t(t,i){return t.write('<div id="stadium"></div><div id="match-centre-stats"></div><div id="match-centre-timeline"></div><div id="match-centre-commentary-summary"></div>')}return dust.register("match-centre",t),t}();define("templates-js/match-centre",function(){});!function(){function e(e,t){return e.write('<div id="chalkboard-stadium"><div class="player-selector"><div class="team-name" data-field="home"></div><div class="team-name" data-field="away"></div></div><div class="team-players" data-field="home"><div class="team selected"><input type="checkbox" name="checkbox" value="value" checked/><span> Select all</span></div><ul class="players"></ul></div> <div class="canvas-container"><div id="player-event-details"><img loading="lazy" class="player-avatar"/><div class="player-event-info"><span class="player-event-minute"></span><span class="player-event-text"></span></div>    </div></div><div class="team-players" data-field="away"><div class="team selected"><input type="checkbox" name="checkbox" value="value" checked/><span> Select all</span></div><ul class="players" ></ul></div><div class="clear"></div></div><ul id="event-type-filters" class="tabs">').section(t.get(["filterGroups"],!1),t,{block:i},null).write('</ul><div class="filterz-filter-groups clearfix">').section(t.get(["filterGroups"],!1),t,{block:a},null).write('</div><div id="chalkboard-timeline" class="timeline"><div id="chalkboard-timeline-minutes" class="ws-timeline-minutes"></div><div id="chalkboard-timeline-slider"></div><div class="timeline-control"><div class="timeline-graph"><div class="timeline-events" data-field="home"></div><div class="timeline-events" data-field="away"></div></div><div class="minutes-container"></div><div class="timeline-handles"></div></div></div>')}function i(e,i){return e.write('<li class="filterz-option" data-filter-index="').reference(i.get(["$idx"],!1),i,"h").write('"><a class="').helper("if",i,{block:t},{cond:l}).write(' "><h4>').helper("localizeKey",i,{},{resId:i.get(["displayName"],!1),resSet:"MatchCentre"}).write('</h4><div class="filterz-values"><span class="filterz-value" data-field="home"></span><span style="display: inline-block; vertical-align: middle;">-</span><span class="filterz-value" data-field="away"></span></div></a></li>')}function t(e,i){return e.write("selected")}function l(e,i){return e.write("(").reference(i.get(["$idx"],!1),i,"h").write(" == 0)")}function a(e,i){return e.write('<div class="filterz-filter-group ').helper("if",i,{block:r},{cond:s}).write('" data-filter-index="').reference(i.get(["$idx"],!1),i,"h").write('">').exists(i.get(["filterSubGroups"],!1),i,{block:d},null).section(i.get(["withDetailsSlotId"],!1),i,{block:n},null).section(i.get(["filterSubGroups"],!1),i,{block:c},{groupIndex:i.get(["$idx"],!1),groupDisplayName:i.get(["displayName"],!1)}).exists(i.get(["withDetailsSlotId"],!1),i,{block:v},null).write("</div>")}function r(e,i){return e.write("selected")}function s(e,i){return e.write("(").reference(i.get(["$idx"],!1),i,"h").write(" == 0)")}function d(e,i){return e.write("<h3>").helper("localizeKey",i,{},{resId:i.get(["displayName"],!1),resSet:"MatchCentre"}).write("</h3>")}function n(e,i){return e.write('<div class="detail-slot" data-field="home" data-detail-slot-id="').reference(i.get(["withDetailsSlotId"],!1),i,"h").write('"></div>')}function c(e,i){return e.write('<div class="filterz-filter-sub-group"><h4 class="filterz-filter-sub-group-header">').helper("localizeKey",i,{},{resId:i.get(["displayName"],!1),resSet:"MatchCentre"}).write('</h4><div class="filterz-filter selected" data-filter-index="all"><label>').helper("localizeKey",i,{},{resId:"chalk_clmn_all",resSet:"MatchCentre"}).write("</label></div>").section(i.get(["filters"],!1),i,{block:o},{groupIndex:i.get(["groupIndex"],!1),subGroupIndex:i.get(["$idx"],!1)}).write("</div>")}function o(e,i){return e.write('<div class="filterz-filter" data-filter-index="').reference(i.get(["groupIndex"],!1),i,"h").write("_").reference(i.get(["subGroupIndex"],!1),i,"h").write("_").reference(i.get(["$idx"],!1),i,"h").write('"').exists(i.get(["ignoreParentSatisfier"],!1),i,{block:u},null).write('><span class="filterz-value" data-field="home"></span><label>').helper("localizeKey",i,{},{resId:i.get(["displayName"],!1),resSet:"MatchCentre"}).write('</label><span class="filterz-value" data-field="away"></span></div>')}function u(e,i){return e.write('data-ignore-parent-filter="').reference(i.get(["groupIndex"],!1),i,"h").write('"')}function v(e,i){return e.write('<div class="detail-slot" data-field="away" data-detail-slot-id="').reference(i.get(["withDetailsSlotId"],!1),i,"h").write('"></div>')}return dust.register("chalkboard",e),e}();define("templates-js/chalkboard",function(){});!function(){function e(e,a){return a=a.shiftBlocks(m),e.write('<div class="scrollable">').helper("partial",a,{block:o},{field:"home",players:a.getPath(!1,["home","players"]),teamId:a.getPath(!1,["home","teamId"])}).write('<div class="pitch-container"><div class="match-info"><span class="venue" data-for="venueName" title="').reference(a.get(["venueName"],!1),a,"h").write('"><label>').helper("localizeKey",a,{},{resSet:"matchCentre",resId:"stadium_clmn_venue"}).write(': </label><span class="incident-icon" data-venue></span><span class="value">').reference(a.get(["venueName"],!1),a,"h").write('</span></span><span class="attendance" data-for="attendance" title="').reference(a.get(["attendance"],!1),a,"h").write('"><label>').helper("localizeKey",a,{},{resSet:"matchCentre",resId:"stadium_clmn_attend"}).write(':</label><span class="incident-icon" data-attendance></span><span class="value">').reference(a.get(["attendance"],!1),a,"h").write('</span></span>\x3c!-- <span class="weather" data-for="weatherCode"><label>').helper("localizeKey",a,{},{resSet:"matchCentre",resId:"stadium_clmn_weather"}).write(': </label><span class="mc-icon"></span><span class="value"></span></span> --\x3e').exists(a.get(["referee"],!1),a,{block:h},null).write('</div><div class="pitch"><div class="pitch-field" data-team-id="').reference(a.getPath(!1,["home","teamId"]),a,"h").write('" data-field="home"></div><div class="pitch-field" data-team-id="').reference(a.getPath(!1,["away","teamId"]),a,"h").write('" data-field="away"></div></div></div>').helper("partial",a,{block:u},{field:"away",players:a.getPath(!1,["away","players"]),teamId:a.getPath(!1,["away","teamId"])}).write('</div><div class="compare-container"><div class="compare-decorations"><div class="close-comparison"></div><div class="compare-data"><span>vs</span><div class="hr"></div><span>Position</span><span>Age</span><span>Height</span><span>Weight</span></div></div><div class="compared" data-mode="player" data-field="home"><div class="detached"><div class="player-name-wrapper"><span class="player-shirt-no"></span><a class="player-name" href=""></a><div class="player-key-incidents"></div></div><div class="player-avatar"><img loading="lazy" src=""/></div></div><div class="player-position"></div><div class="player-age"></div><div class="player-height"></div><div class="player-weight"></div></div><div class="compared" data-mode="player" data-field="away"><div class="detached"><div class="player-name-wrapper"><span class="player-shirt-no"></span><a class="player-name" href=""></a><div class="player-key-incidents"></div></div><div class="player-avatar"><img loading="lazy" src=""/></div></div><div class="player-position"></div><div class="player-age"></div><div class="player-height"></div><div class="player-weight"></div></div></div>')}function a(e,a){return a=a.shiftBlocks(m),e.write('<div class="player').section(a.get(["isManOfTheMatch"],!1),a,{block:t},null).write('"').section(a.get(["playerId"],!1),a,{block:s},null).write('data-field="').reference(a.get(["field"],!1),a,"h").write('"').section(a.get(["subbedInExpandedMinute"],!1),a,{block:i},null).section(a.get(["subbedOutExpandedMinute"],!1),a,{block:r},null).write('><div class="player-stat"><span class="player-stat-value"></span></div><div class="selector-text">Select second player</div><div class="player-info"><div class="player-name-wrapper" title="').reference(a.get(["name"],!1),a,"h").write('">').exists(a.get(["shirtNo"],!1),a,{block:l},null).write('<span class="player-name">').helper("playerName",a,{block:n},{fullName:a.get(["name"],!1),isLastName:"true"}).write('</span><div class="background-mask"></div></div><div class="player-key-incidents"></div></div></div>')}function t(e,a){return a=a.shiftBlocks(m),e.write(" is-man-of-the-match")}function s(e,a){return a=a.shiftBlocks(m),e.write('data-player-id="').reference(a.get(["playerId"],!1),a,"h").write('"')}function i(e,a){return a=a.shiftBlocks(m),e.write('data-subbed-in="true"')}function r(e,a){return a=a.shiftBlocks(m),e.write('data-is-subbed-off="true"')}function l(e,a){return a=a.shiftBlocks(m),e.write('<span class="shirt-number">').reference(a.get(["shirtNo"],!1),a,"h").write(".</span>")}function n(e,a){return a=a.shiftBlocks(m),e}function c(e,a){return a=a.shiftBlocks(m),e.write('<div class="bench" data-team-id="').reference(a.get(["teamId"],!1),a,"h").write('" data-field="').reference(a.get(["field"],!1),a,"h").write('"><h4>').helper("localizeKey",a,{},{resSet:"MatchCentre",resId:"stadium_clmn_subs"}).write('</h4><div class="stadium-bench-nav left"><span></span></div><div class="stadium-bench-nav right"><span></span></div><div class="substitutes" data-field="').reference(a.get(["field"],!1),a,"h").write('" >').section(a.get(["players"],!1),a,{block:d},null).write('</div><div class="compared" data-mode="team" data-field="').reference(a.get(["field"],!1),a,"h").write('"><div class="team-emblem"><img loading="lazy" src=""/></div><div class="manager-name"></div><div class="formation"></div><div class="average-age"></div></div></div>')}function d(e,a){return a=a.shiftBlocks(m),e.helper("partial",a,{block:p},{playerId:a.get(["playerId"],!1),name:a.get(["name"],!1),shirtNo:a.get(["shirtNo"],!1),stats:a.get(["stats"],!1),isManOfTheMatch:a.get(["isManOfTheMatch"],!1),field:a.get(["field"],!1),subbedInExpandedMinute:a.get(["subbedInExpandedMinute"],!1),subbedOutExpandedMinute:a.get(["subbedOutExpandedMinute"],!1)})}function p(e,a){return a=a.shiftBlocks(m),e.block(a.getBlock("match_centre_player"),a,{},null)}function o(e,a){return a=a.shiftBlocks(m),e.block(a.getBlock("match_centre_players"),a,{},null)}function h(e,a){return a=a.shiftBlocks(m),e.write('<span class="referee" data-for="refereeName" title="').reference(a.getPath(!1,["referee","name"]),a,"h").write('"><label>').helper("localizeKey",a,{},{resSet:"matchCentre",resId:"stadium_clmn_referee"}).write(': </label><a href="/Referees/').reference(a.getPath(!1,["referee","officialId"]),a,"h").write("/Show/").helper("generateSeoTextForOfficial",a,{},{officialName:v}).write('"><span class="incident-icon" data-referee></span><span class="value">').helper("getPlayerShortName",a,{},{fullName:f}).write("</span></a></span>")}function v(e,a){return a=a.shiftBlocks(m),e.reference(a.getPath(!1,["referee","name"]),a,"h")}function f(e,a){return a=a.shiftBlocks(m),e.reference(a.getPath(!1,["referee","name"]),a,"h")}function u(e,a){return a=a.shiftBlocks(m),e.block(a.getBlock("match_centre_players"),a,{},null)}dust.register("match-centre-stadium",e);var m={match_centre_player:a,match_centre_players:c};return e}();define("templates-js/match-centre-stadium",function(){});!function(){function t(t,e){return e=e.shiftBlocks(w),t.write('<div class="match-centre-stats" data-mode="team"><ul>').section(e.get(["teamStatGroups"],!1),e,{block:d},null).write("</ul><ul>").section(e.get(["teamStatGroups"],!1),e,{block:f},null).write('</ul></div><div class="match-centre-stats" data-mode="player"><div id="back-to-team" class="iconize iconize-icon-left ui-state-transparent-default"><span class="ui-icon ui-icon-triangle-1-w"></span><span>').helper("localizeKey",e,{},{resSet:"MatchCentre",resId:"stats_info_back_team"}).write("</span></div><ul>").section(e.get(["playerStatGroups"],!1),e,{block:p},null).write("</ul><ul>").section(e.get(["playerStatGroups"],!1),e,{block:k},null).write("</ul></div>")}function e(t,e){return e=e.shiftBlocks(w),t.write('<li class="match-centre-stat ').helper("if",e,{block:a},{cond:s}).write(" ").helper("if",e,{block:l},{cond:i}).write('" data-for="').reference(e.get(["dafaFor"],!1),e,"h").write('"><h4>').helper("localizeKey",e,{},{resId:e.get(["displayName"],!1),resSet:"MatchCentre"}).write('</h4><div class="match-centre-stat-values"><span class="match-centre-stat-value" data-field="home"></span> <span style="display: inline-block; vertical-align: middle;">-</span> <span class="match-centre-stat-value" data-field="away"></span></div><div class="toggle-stat-details iconize iconize-icon-right ui-state-transparent-default"><label>').helper("localizeKey",e,{},{resSet:"MatchCentre",resId:"stats_info_more"}).write('</label><span class="ui-icon ui-icon-circle-arrow-s"></span></div></li>')}function a(t,e){return e=e.shiftBlocks(w),t.write("selected")}function s(t,e){return e=e.shiftBlocks(w),t.write("(").reference(e.get(["$idx"],!1),e,"h").write(" == 0)")}function l(t,e){return e=e.shiftBlocks(w),t.write("has-stats")}function i(t,e){return e=e.shiftBlocks(w),t.write("0 < '").reference(e.get(["stats"],!1),e,"h").write("'.length")}function r(t,e){return e=e.shiftBlocks(w),t.write('<li class="match-centre-stat-details" data-detail-for="').reference(e.get(["dafaFor"],!1),e,"h").write('">').helper("if",e,{block:c},{cond:o}).write('<div class="top-players-for-stat-wrapper"><h3>').helper("localizeKey",e,{},{resSet:"MatchCentre",resId:"stats_clmn_top_player"}).write('</h3><div class="top-players-for-stat"></div></div><div class="close-stat-details">').helper("localizeKey",e,{},{resSet:"MatchCentre",resId:"stats_info_close"}).write(' x</div><div class="match-centre-stat-footnote">').helper("localizeKey",e,{},{resSet:"MatchCentre",resId:e.get(["footNote"],!1)}).write("</div></li>")}function c(t,e){return e=e.shiftBlocks(w),t.write(' <div class="match-centre-stats"><h3>').helper("localizeKey",e,{},{resSet:"MatchCentre",resId:"stats_clmn_details"}).write("</h3><ul >").section(e.get(["stats"],!1),e,{block:n},null).write("</ul></div>")}function n(t,e){return e=e.shiftBlocks(w),t.write('<li class="match-centre-stat match-centre-sub-stat" data-for="').reference(e.get(["key"],!1),e,"h").write('"><h4>').helper("localizeKey",e,{},{resId:e.get(["displayName"],!1),resSet:"MatchCentre"}).write('</h4><div class="match-centre-stat-values"><span class="match-centre-stat-value" data-field="home"></span><span style="display: inline-block; vertical-align: middle;">-</span> <span class="match-centre-stat-value" data-field="away"></span></div></li>')}function o(t,e){return e=e.shiftBlocks(w),t.write("0 < '").reference(e.get(["stats"],!1),e,"h").write("'.length")}function d(t,e){return e=e.shiftBlocks(w),t.helper("partial",e,{block:h},{$idx:e.get(["$idx"],!1),stats:e.get(["stats"],!1),displayName:e.get(["displayName"],!1),dafaFor:e.get(["key"],!1),footNote:e.get(["footNote"],!1)})}function h(t,e){return e=e.shiftBlocks(w),t.block(e.getBlock("match_centre_stat"),e,{},null)}function f(t,e){return e=e.shiftBlocks(w),t.helper("partial",e,{block:u},{$idx:e.get(["$idx"],!1),stats:e.get(["stats"],!1),displayName:e.get(["displayName"],!1),dafaFor:e.get(["key"],!1),footNote:e.get(["footNote"],!1)})}function u(t,e){return e=e.shiftBlocks(w),t.block(e.getBlock("match_centre_stat2"),e,{},null)}function p(t,e){return e=e.shiftBlocks(w),t.helper("partial",e,{block:g},{$idx:e.get(["$idx"],!1),stats:e.get(["stats"],!1),displayName:e.get(["displayName"],!1),dafaFor:e.get(["key"],!1),footNote:e.get(["footNote"],!1)})}function g(t,e){return e=e.shiftBlocks(w),t.block(e.getBlock("match_centre_stat"),e,{},null)}function k(t,e){return e=e.shiftBlocks(w),t.helper("partial",e,{block:m},{$idx:e.get(["$idx"],!1),stats:e.get(["stats"],!1),displayName:e.get(["displayName"],!1),dafaFor:e.get(["key"],!1),footNote:e.get(["footNote"],!1)})}function m(t,e){return e=e.shiftBlocks(w),t.block(e.getBlock("match_centre_stat2"),e,{},null)}dust.register("match-centre-stats",t);var w={match_centre_stat:e,match_centre_stat2:r};return t}();define("templates-js/match-centre-stats",function(){});!function(){function e(e,i){return e.write('<div class="timeline"><div id="matchcentre-timeline-minutes" class="ws-timeline-minutes"></div><div id="matchcentre-timeline-slider"></div><div id="match-centre-follow-live" class="follow-live hidden">Follow live</div><div class="timeline-content"><div class="timeline-events" data-field="home" data-team-id="').reference(i.getPath(!1,["home","teamId"]),i,"h").write('"></div><div class="timeline-control"><div class="minutes-container"></div><div class="timeline-handles"></div>\x3c!-- <div class="timeline-stat-performance"></div> --\x3e<div class="timeline-stat-performance2"><div class="timeline-stats" data-field="home"></div><div class="timeline-stats" data-field="away"></div></div></div><div class="timeline-bars-container"><div class="timeline-bars" data-field="home" data-team-id="').reference(i.getPath(!1,["home","teamId"]),i,"h").write('"></div><div class="timeline-bars" data-field="away" data-team-id="').reference(i.getPath(!1,["away","teamId"]),i,"h").write('"></div></div><div class="timeline-events" data-field="away" data-team-id="').reference(i.getPath(!1,["away","teamId"]),i,"h").write('"></div></div></div><div class="timeline-range-mask"></div>')}return dust.register("match-centre-timeline",e),e}();define("templates-js/match-centre-timeline",function(){});!function(){function e(e,a){return e.section(a.get(["showPager"],!1),a,{block:t},null).write('<ul class="commentary-items">').section(a.get(["events"],!1),a,{block:r},null).section(a.get(["showMore"],!1),a,{block:o},null).write('<li class="commentary-mask"></li></ul>').section(a.get(["showMore"],!1),a,{block:p},null)}function t(e,t){return e.write("<div>").helper("pager",t,{},{first:"0",last:a,url:"%page%"}).write('</div><div class="page-navigation" data-page="0"><span class="page-navigation-item" data-page="first-page">').helper("localizeKey",t,{},{resId:"pager_fltr_first",resSet:"UIComponent"}).write('</span><span class="page-navigation-item" data-page="prev-page">').helper("localizeKey",t,{},{resId:"pager_fltr_previous",resSet:"UIComponent"}).write('</span><span class="page-navigation-item" data-page="next-page">').helper("localizeKey",t,{},{resId:"pager_fltr_next",resSet:"UIComponent"}).write('</span><span class="page-navigation-item" data-page="last-page">').helper("localizeKey",t,{},{resId:"pager_fltr_last",resSet:"UIComponent"}).write('</span></div><div class="page-info"> <span class="current-page"></span>/<span class="total-pages"></span></div>')}function a(e,t){return e.reference(t.get(["pageSize"],!1),t,"h")}function r(e,t){return e.exists(t.get(["text"],!1),t,{block:n},null)}function n(e,t){return e.write('<li class="commentary-item" data-field="').reference(t.get(["field"],!1),t,"h").write('" data-period-id="').reference(t.getPath(!1,["period","value"]),t,"h").write('"data-player-id="').reference(t.get(["playerId"],!1),t,"h").write('" data-team-id="').reference(t.get(["teamId"],!1),t,"h").write('"data-minute="').reference(t.get(["minute"],!1),t,"h").write('"data-second="').reference(t.get(["second"],!1),t,"h").write('"data-expanded-minute="').reference(t.get(["expandedMinute"],!1),t,"h").write('"data-type="').reference(t.getPath(!1,["type","value"]),t,"h").write('"><img loading="lazy" class="team-emblem" src=').helper("imageUrl",t,{},{fileName:i}).write('><span class="commentary-minute">').reference(t.getPath(!1,["minuteInfo","minuteString"]),t,"h").write('</span><span class="commentary-text">').reference(t.get(["text"],!1),t,"h",["s"]).write('</span><span class="incident-icon"data-minute="').reference(t.get(["minute"],!1),t,"h").write('" data-second="').reference(t.get(["second"],!1),t,"h").write('" data-player-id="').reference(t.get(["playerId"],!1),t,"h").write('"data-team-id="').reference(t.get(["teamId"],!1),t,"h").write('"data-type="').section(t.get(["type"],!1),t,{block:s},null).write('"\t').section(t.get(["cardType"],!1),t,{block:l},null).section(t.get(["satisfiers"],!1),t,{block:c},null).write("></span></li>")}function i(e,t){return e.write("teams/").reference(t.get(["teamId"],!1),t,"h").write(".png")}function s(e,t){return e.reference(t.get(["value"],!1),t,"h")}function l(e,t){return e.write('data-card-type="').reference(t.get(["value"],!1),t,"h").write('"')}function c(e,t){return e.write("data-event-satisfier-").reference(t.get(["name"],!1),t,"h").write(" ")}function o(e,t){return e.write('<li class="show-more-commentaries"> Show All Commentary </li>')}function p(e,t){return e.write('<span id="collapsable-toggle" class="ui-icon ui-icon-triangle-1-s"></span>')}return dust.register("match-centre-commentary",e),e}();define("templates-js/match-centre-commentary",function(){});!function(){function e(e,t){return t=t.shiftBlocks(g),e.helper("partial",t,{block:h},{teamId:t.getPath(!1,["home","teamId"]),field:t.getPath(!1,["home","field"]),name:t.getPath(!1,["home","name"]),managerName:t.getPath(!1,["home","managerName"]),goalScorers:t.getPath(!1,["goalScorers","home"]),countryName:t.getPath(!1,["home","countryName"])}).write('<div class="match-centre-info"><div class="status"><div class="score" data-for="score">').reference(t.get(["score"],!1),t,"h").write('</div><div><span class="elapsed" data-for="elapsed">').reference(t.get(["currentElapsed"],!1),t,"h").write("</span></div></div></div>").helper("partial",t,{block:f},{teamId:t.getPath(!1,["away","teamId"]),field:t.getPath(!1,["away","field"]),name:t.getPath(!1,["away","name"]),managerName:t.getPath(!1,["away","managerName"]),goalScorers:t.getPath(!1,["goalScorers","away"]),countryName:t.getPath(!1,["away","countryName"])})}function t(e,t){return t=t.shiftBlocks(g),e.write('<div class="match-centre-header-team" data-mode="team" data-field="').reference(t.get(["field"],!1),t,"h").write('"><div class="team-emblem"><img loading="lazy" src="').helper("imageUrl",t,{},{fileName:a}).write('"></div><div class="team-info"><div class="team-rating"></div> <a href="/Teams/').reference(t.get(["teamId"],!1),t,"h").write("/Show/").helper("generateSeoTextForTeam",t,{},{teamName:r,teamCountryName:n}).write('" class="team-name">').reference(t.get(["name"],!1),t,"h").write('</a><div class="manager"><label>').helper("localizeKey",t,{},{resSet:"MatchCentre",resId:"header_clmn_manager"}).write(':</label><span class="mc-icon"></span><span class="manager-name">').reference(t.get(["managerName"],!1),t,"h").write('</span></div><div class="formation"></div></div><ul class="match-centre-header-goal-scorers">').section(t.get(["goalScorers"],!1),t,{block:c},null).write("</ul></div>")}function a(e,t){return t=t.shiftBlocks(g),e.write("teams/").reference(t.get(["teamId"],!1),t,"h").write(".png")}function r(e,t){return t=t.shiftBlocks(g),e.reference(t.get(["name"],!1),t,"h")}function n(e,t){return t=t.shiftBlocks(g),e.reference(t.get(["countryName"],!1),t,"h")}function c(e,t){return t=t.shiftBlocks(g),e.write(" ").exists(t.get(["minuteInfo"],!1),t,{block:l},null)}function l(e,t){return t=t.shiftBlocks(g),e.write('<li class="match-centre-header-goal-scorer"><span class="match-centre-header-goal-scorer-minute">').reference(t.getPath(!1,["minuteInfo","minuteString"]),t,"h").notexists(t.getPath(!1,["minuteInfo","isPenaltyShootOut"]),t,{block:i},null).write("</span> ").exists(t.get(["playerName"],!1),t,{block:s},null).section(t.get(["isOwnGoal"],!1),t,{block:m},null).write("</li>")}function i(e,t){return t=t.shiftBlocks(g),e.write("'")}function s(e,t){return t=t.shiftBlocks(g),e.helper("playerName",t,{block:o},{fullName:t.get(["playerName"],!1),isShortName:"true"})}function o(e,t){return t=t.shiftBlocks(g),e}function m(e,t){return t=t.shiftBlocks(g),e.write("(OG)")}function h(e,t){return t=t.shiftBlocks(g),e.block(t.getBlock("match_centre_header_team"),t,{},null)}function f(e,t){return t=t.shiftBlocks(g),e.block(t.getBlock("match_centre_header_team"),t,{},null)}dust.register("match-centre-header",e);var g={match_centre_header_team:t};return e}();define("templates-js/match-centre-header",function(){});!function(){function i(i,n){return i.write('<div class="loading-spinner-container"  ').exists(n.get(["firstRender"],!1),n,{block:c},null).write('> <div class="loading-spinner"><div class="spinner-container loading-container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container loading-container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container loading-container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div><div class="loading-spinner-container-shade"></div></div>')}function c(i,c){return i.write('style="position:static;height: 20.4em;" ')}return dust.register("spinning-loading-animation",i),i}();define("templates-js/spinning-loading-animation",function(){});!function(){function a(a,e){return a.write('<div id="match-centre-heatmaps"><div class="player-selector"><div class="team-name" data-field="home"></div><div class="team-name" data-field="away"></div></div><div class="team-players" data-field="home"></div><div id="heatmap-pitches">        <div class="direction-info"><div class="direction-arrow" data-direction="r" data-field="home"></div><div class="heatmap-info-for-team" data-field="home"><label>').helper("localizeKey",e,{},{resSet:"MatchCentre",resId:"heatmap_clmn_touch"}).write(':</label><span class="touch-count"></span></div></div><div class="canvas-container" data-field="home"></div><div class="direction-info"><div class="direction-arrow" data-direction="l" data-field="away"></div><div class="heatmap-info-for-team" data-field="away"><label>').helper("localizeKey",e,{},{resSet:"MatchCentre",resId:"heatmap_clmn_touch"}).write(':</label><span class="touch-count"></span></div></div><div class="canvas-container" data-field="away"></div><div class="direction-arrows"></div></div><div class="team-players" data-field="away"></div></div>')}return dust.register("heatmaps",a),a}();define("templates-js/heatmaps",function(){});!function(){function e(e,t){return e.write('<div id="match-centre-livestream"><div class="content-container"><div class="image-container"><a target="_blank" href="http://www.bet365.com/EXTRA/?ContentPath=LiveStreaming%252cStreaming&affiliate=').reference(t.get(["affiliateId"],!1),t,"h").write('"><img src=').helper("imageUrl",t,{},{fileName:"video-stream.png"}).write(' /><img class="play-btn" src="').helper("imageUrl",t,{},{fileName:"playbtn.png"}).write('"/><span class="match-name">').helper("localizeKeyWithFormat",t,{},{resSet:"MatchCentre",resId:"streaming_info_live_stream",formatParam:t.get(["matchName"],!1)}).write('</span></a></div><div id="instructions-container"><div id="instructions-header"><a target="_blank" href="http://www.bet365.com/EXTRA/?ContentPath=LiveStreaming%252cStreaming&affiliate=').reference(t.get(["affiliateId"],!1),t,"h").write('">').helper("localizeKeyWithFormat",t,{},{resSet:"MatchCentre",resId:"streaming_info_watch_live",formatParam:t.get(["matchName"],!1)}).write("</a></div><ol><li>").helper("localizeKeyWithFormat",t,{},{resSet:"MatchCentre",resId:"streaming_info_signin",formatParam:t.get(["affiliateId"],!1)}).write("</li><li>").helper("localizeKeyWithFormat",t,{},{resSet:"MatchCentre",resId:"streaming_info_live_play",formatParam:t.get(["affiliateId"],!1)}).write('</li></ol></div></div><div id="disclaimer-container"><span>').helper("localizeKeyWithFormat",t,{},{resSet:"MatchCentre",resId:"streaming_info_notice",formatParam:t.get(["affiliateId"],!1)}).write("</span></div></div>")}return dust.register("livestream",e),e}();define("templates-js/livestream",function(){});!function(){function e(e,t){return t=t.shiftBlocks(p),e.section(t.get(["hasIncidents"],!1),t,{block:d},null)}function t(e,t){return t=t.shiftBlocks(p),e.write('<td class="key-incident ').reference(t.get(["field"],!1),t,"h").write('-incident" data-field="').reference(t.get(["field"],!1),t,"h").write('">').section(t.get(["events"],!1),t,{block:r},null).write('<div class="clear"></div></td>')}function r(e,t){return t=t.shiftBlocks(p),e.write('<div class="match-centre-header-team-key-incident ').exists(t.get(["relatedEventId"],!1),t,{block:n},null).write('" data-type="').reference(t.getPath(!1,["type","value"]),t,"h").write('"title="').reference(t.get(["text"],!1),t,"h",["s"]).write('">').helper("eq",t,{block:i},{key:t.get(["field"],!1),value:"home"}).write('<div class="incident-icon" data-minute="').reference(t.get(["minute"],!1),t,"h").write('" data-second="').reference(t.get(["second"],!1),t,"h").write('" data-player-id="').reference(t.get(["playerId"],!1),t,"h").write('"data-team-id="').reference(t.get(["teamId"],!1),t,"h").write('"data-type="').reference(t.getPath(!1,["type","value"]),t,"h").write('"\t').section(t.get(["cardType"],!1),t,{block:a},null).section(t.get(["left"],!1),t,{block:s},null).section(t.get(["satisfiers"],!1),t,{block:o},null).write("></div>").helper("eq",t,{block:f},{key:t.get(["field"],!1),value:"away"}).write("</div>")}function n(e,t){return t=t.shiftBlocks(p),e.write("has-related-event")}function i(e,t){return t=t.shiftBlocks(p),e.write('<a href="/Players/').reference(t.get(["playerId"],!1),t,"h").write("/Show/").helper("generateSeoTextForPlayer",t,{},{playerName:c}).write('" class="player-name">').reference(t.get(["playerName"],!1),t,"h").write("</a>").exists(t.get(["score"],!1),t,{block:l},null)}function c(e,t){return t=t.shiftBlocks(p),e.reference(t.get(["playerName"],!1),t,"h")}function l(e,t){return t=t.shiftBlocks(p),e.write('<span class="current-score">(').reference(t.get(["score"],!1),t,"h").write(")</span>")}function a(e,t){return t=t.shiftBlocks(p),e.write('data-card-type="').reference(t.get(["value"],!1),t,"h").write('"')}function s(e,t){return t=t.shiftBlocks(p),e.write('style="left: ').reference(t.get(["left"],!1),t,"h").write('%"')}function o(e,t){return t=t.shiftBlocks(p),e.write("data-event-satisfier-").reference(t.get(["name"],!1),t,"h").write(" ")}function f(e,t){return t=t.shiftBlocks(p),e.exists(t.get(["score"],!1),t,{block:h},null).write('<a href="/Players/').reference(t.get(["playerId"],!1),t,"h").write("/Show/").helper("generateSeoTextForPlayer",t,{},{playerName:u}).write('" class="player-name">').reference(t.get(["playerName"],!1),t,"h").write("</a>")}function h(e,t){return t=t.shiftBlocks(p),e.write('<span class="current-score">(').reference(t.get(["score"],!1),t,"h").write(")</span>")}function u(e,t){return t=t.shiftBlocks(p),e.reference(t.get(["playerName"],!1),t,"h")}function d(e,t){return t=t.shiftBlocks(p),e.write("<div data-incident-count=").reference(t.getPath(!1,["incidentsByGroups","length"]),t,"h").write("><table><tbody>").section(t.get(["incidentsByGroups"],!1),t,{block:w},null).write("</tbody></table></div>")}function w(e,t){return t=t.shiftBlocks(p),e.write("<tr ").exists(t.getPath(!1,["minuteInfo","isPenaltyShootout"]),t,{block:g},null).write(">").helper("partial",t,{block:k},{events:t.get(["home"],!1),field:"home"}).write('<td><span class="minute rc box">').reference(t.getPath(!1,["minuteInfo","minuteString"]),t,"h").write("'</span></td>").helper("partial",t,{block:y},{events:t.get(["away"],!1),field:"away"}).write("</tr>")}function g(e,t){return t=t.shiftBlocks(p),e.write('data-is-penalty-shootout="true"')}function k(e,t){return t=t.shiftBlocks(p),e.block(t.getBlock("match_centre_header_team_key_incidents"),t,{},null)}function y(e,t){return t=t.shiftBlocks(p),e.block(t.getBlock("match_centre_header_team_key_incidents"),t,{},null)}dust.register("match-centre-incidents",e);var p={match_centre_header_team_key_incidents:t};return e}();define("templates-js/match-centre-incidents",function(){});!function(){function e(e,r){return e.write('<div id="matchslider" >').section(r.get(["matches"],!1),r,{block:t},null).write('</div><div class="forward nav-button"><span class="next button ui-state-default rc-r is-default"><span class="ui-icon ui-icon-triangle-1-e"></span></span></div><div class="previous nav-button"><span class="previous button ui-state-default rc-l is-default"><span class="ui-icon ui-icon-triangle-1-w"></span></span></div>')}function t(e,t){return e.write('<div class="match"><div class="match-header"><a href="/Regions/').reference(t.get(["regionId"],!1),t,"h").write("/Tournaments/").reference(t.get(["tournamentId"],!1),t,"h").write("/Seasons/").reference(t.get(["seasonId"],!1),t,"h").write("/Stages/").reference(t.get(["stageId"],!1),t,"h").write("/Show/").helper("generateSeoTextForStage",t,{},{tournamentRegionName:r,tournamentName:n,seasonName:a}).write('" class="match-region pt iconize iconize-icon-left">').reference(t.get(["tournamentShortName"],!1),t,"h").write('<span class="ui-icon country flg-').reference(t.get(["regionCode"],!1),t,"h").write('"></span></a><span class="match-date">').helper("formatDate",t,{},{date:i,format:"ddd, Do HH:mm"}).write('</span></div><div class="teams-info"><div class="team-section"><div class="team-logo"><img loading="lazy" src="https://d2zywfiolv4f83.cloudfront.net/img/teams/').reference(t.get(["homeTeamId"],!1),t,"h").write('.png" alt="').reference(t.get(["homeTeamName"],!1),t,"h").write('"/></div></div><div class="team-section"><div class="team-logo"><img loading="lazy" src="https://d2zywfiolv4f83.cloudfront.net/img/teams/').reference(t.get(["awayTeamId"],!1),t,"h").write('.png" alt="').reference(t.get(["awayTeamName"],!1),t,"h").write('"/></div></div><div class="team-section"><a class="team-name" href="/Teams/').reference(t.get(["homeTeamId"],!1),t,"h").write("/Show/").helper("generateSeoTextForTeam",t,{},{teamName:o,teamCountryName:c}).write('">').reference(t.get(["homeTeamCode"],!1),t,"h").write('</a></div><div class="team-section"><a class="team-name" href="/Teams/').reference(t.get(["awayTeamId"],!1),t,"h").write("/Show/").helper("generateSeoTextForTeam",t,{},{teamName:m,teamCountryName:s}).write('">').reference(t.get(["awayTeamCode"],!1),t,"h").write('</a></div><div class="team-section"><span class="team-score">').exists(t.get(["homeRunningScore"],!1),t,{else:u,block:h},null).write('</span></div><div class="team-section"><span class="team-score">').exists(t.get(["awayRunningScore"],!1),t,{else:f,block:l},null).write("</span></div>").helper("if",t,{else:g,block:z},{cond:E}).write("</div></div>")}function r(e,t){return e.reference(t.get(["regionName"],!1),t,"h")}function n(e,t){return e.reference(t.get(["tournamentName"],!1),t,"h")}function a(e,t){return e.reference(t.get(["seasonName"],!1),t,"h")}function i(e,t){return e.reference(t.get(["startTimeUtc"],!1),t,"h")}function o(e,t){return e.reference(t.get(["homeTeamName"],!1),t,"h")}function c(e,t){return e.reference(t.get(["homeTeamCountryName"],!1),t,"h")}function m(e,t){return e.reference(t.get(["awayTeamName"],!1),t,"h")}function s(e,t){return e.reference(t.get(["awayTeamCountryName"],!1),t,"h")}function u(e,t){return e.write("-")}function h(e,t){return e.reference(t.get(["homeRunningScore"],!1),t,"h")}function f(e,t){return e.write("-")}function l(e,t){return e.reference(t.get(["awayRunningScore"],!1),t,"h")}function g(e,t){return e.helper("if",t,{block:d},{cond:y}).helper("if",t,{block:S},{cond:x})}function d(e,t){return e.write('<div class="page-link live"><a href="/Matches/').reference(t.get(["id"],!1),t,"h").write("/Live/").helper("generateSeoTextForMatch",t,{},{homeTeamName:w,awayTeamName:N,tournamentRegionName:v,seasonName:p,tournamentName:T}).write('">').helper("localizeKey",t,{},{resId:"slide_lbl_live_match",resSet:"UIComponent"}).write("</a> </div>")}function w(e,t){return e.reference(t.get(["homeTeamName"],!1),t,"h")}function N(e,t){return e.reference(t.get(["awayTeamName"],!1),t,"h")}function v(e,t){return e.reference(t.get(["regionName"],!1),t,"h")}function p(e,t){return e.reference(t.get(["seasonName"],!1),t,"h")}function T(e,t){return e.reference(t.get(["tournamentName"],!1),t,"h")}function y(e,t){return e.reference(t.getPath(!1,["status","value"]),t,"h").write(" == 3")}function S(e,t){return e.write('<div class="page-link post-match"><a href="/Matches/').reference(t.get(["id"],!1),t,"h").write("/Live/").helper("generateSeoTextForMatch",t,{},{homeTeamName:I,awayTeamName:b,tournamentRegionName:k,seasonName:C,tournamentName:_}).write('">').helper("localizeKey",t,{},{resId:"livescores_lnk_match_centre",resSet:"UIComponent"}).write("</a></div>")}function I(e,t){return e.reference(t.get(["homeTeamName"],!1),t,"h")}function b(e,t){return e.reference(t.get(["awayTeamName"],!1),t,"h")}function k(e,t){return e.reference(t.get(["regionName"],!1),t,"h")}function C(e,t){return e.reference(t.get(["seasonName"],!1),t,"h")}function _(e,t){return e.reference(t.get(["tournamentName"],!1),t,"h")}function x(e,t){return e.reference(t.getPath(!1,["status","value"]),t,"h").write(" == 6")}function z(e,t){return e.helper("if",t,{else:R,block:D},{cond:B})}function R(e,t){return e.write('<div class="page-link h2h"><a href="/Matches/').reference(t.get(["id"],!1),t,"h").write("/Show/").helper("generateSeoTextForMatch",t,{},{homeTeamName:M,awayTeamName:F,tournamentRegionName:P,seasonName:U,tournamentName:K}).write('">').helper("localizeKey",t,{},{resId:"livescores_lnk_h2h_tt",resSet:"UIComponent"}).write("</a></div>")}function M(e,t){return e.reference(t.get(["homeTeamName"],!1),t,"h")}function F(e,t){return e.reference(t.get(["awayTeamName"],!1),t,"h")}function P(e,t){return e.reference(t.get(["regionName"],!1),t,"h")}function U(e,t){return e.reference(t.get(["seasonName"],!1),t,"h")}function K(e,t){return e.reference(t.get(["tournamentName"],!1),t,"h")}function D(e,t){return e.write('<div class="page-link preview"><a href="/Matches/').reference(t.get(["id"],!1),t,"h").write("/Preview/").helper("generateSeoTextForMatch",t,{},{homeTeamName:H,awayTeamName:L,tournamentRegionName:j,seasonName:q,tournamentName:A}).write('">').helper("localizeKey",t,{},{resId:"slide_lbl_preview",resSet:"UIComponent"}).write("</a></div>")}function H(e,t){return e.reference(t.get(["homeTeamName"],!1),t,"h")}function L(e,t){return e.reference(t.get(["awayTeamName"],!1),t,"h")}function j(e,t){return e.reference(t.get(["regionName"],!1),t,"h")}function q(e,t){return e.reference(t.get(["seasonName"],!1),t,"h")}function A(e,t){return e.reference(t.get(["tournamentName"],!1),t,"h")}function B(e,t){return e.reference(t.get(["hasPreview"],!1),t,"h")}function E(e,t){return e.reference(t.getPath(!1,["status","value"]),t,"h").write(" == 1")}return dust.register("matchslider",e),e}();define("templates-js/matchslider",function(){});require(["ngga","jquery"],function(NGGA){$(document).ready(function(){$("#live-incidents  .player-link").on("click",function(){NGGA.trackEvent(NGGA.Categories.Match,NGGA.Actions.ClickPlayer,"ContentHeader")});$("#link-players-lineup  .player-link").on("click",function(){NGGA.trackEvent(NGGA.Categories.Match,NGGA.Actions.ClickPlayer,"Inside_Lineups")});$("#link-player-substitutes .player-link").on("click",function(){NGGA.trackEvent(NGGA.Categories.Match,NGGA.Actions.ClickPlayer,"Inside_Substitutes")})})});define("ga/match/ga-match-centre",function(){});